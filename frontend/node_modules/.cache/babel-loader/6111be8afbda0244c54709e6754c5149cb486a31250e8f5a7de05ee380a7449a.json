{"ast":null,"code":"var _jsxFileName = \"/Users/te/Desktop/sickoscoop/frontend/src/App.js\",\n  _s = $RefreshSig$(),\n  _s2 = $RefreshSig$(),\n  _s3 = $RefreshSig$(),\n  _s4 = $RefreshSig$(),\n  _s5 = $RefreshSig$(),\n  _s6 = $RefreshSig$(),\n  _s7 = $RefreshSig$();\n// App.js - FIXED VERSION with Dynamic Environment Detection\nimport React, { useState, useRef, useEffect, useCallback } from 'react';\nimport { Heart, MessageCircle, Share2, Send, Image, Video, FileText, Mic, Search, Settings, X, MoreHorizontal, Flag, Bookmark, Eye, ArrowLeft, Clock, Users, Copy, ExternalLink, Twitter, Facebook, Linkedin, CheckCircle, AlertCircle } from 'lucide-react';\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst safeString = value => value ? String(value) : '';\nconst safeNumber = value => Number(value) || 0;\n\n// âœ… FIXED: Dynamic API Base URL Detection\nconst getApiBase = () => {\n  const hostname = window.location.hostname;\n  const port = window.location.port;\n\n  // Production detection\n  if (hostname.includes('sickoscoop') || hostname.includes('netlify.app') || hostname.includes('digitalocean')) {\n    return 'https://sickoscoop-backend-deo45.ondigitalocean.app/api';\n  }\n\n  // Development detection\n  if (hostname === 'localhost' || hostname === '127.0.0.1') {\n    // If frontend is on 3000, backend is on 3001\n    if (port === '3000') {\n      return 'http://localhost:3001/api';\n    }\n    // If frontend is on 3001 (same port as backend), use relative URLs\n    if (port === '3001') {\n      return '/api';\n    }\n  }\n\n  // Fallback to production\n  return 'https://sickoscoop-backend-deo45.ondigitalocean.app/api';\n};\nconst API_BASE = getApiBase();\nconsole.log('ðŸŒ Environment Detection:', {\n  hostname: window.location.hostname,\n  port: window.location.port,\n  apiBase: API_BASE,\n  environment: API_BASE.includes('localhost') ? 'development' : 'production'\n});\n\n// Enhanced URL generation for posts\nconst generatePostUrl = postId => {\n  const baseUrl = window.location.hostname === 'localhost' ? 'http://localhost:3000' : 'https://sickoscoop.netlify.app';\n  return `${baseUrl}/post/${postId}`;\n};\n\n// Enhanced timestamp function with more details\nconst getDetailedTimestamp = date => {\n  const now = new Date();\n  const postDate = new Date(date);\n  const diffInMinutes = Math.floor((now - postDate) / (1000 * 60));\n  if (diffInMinutes < 1) return {\n    relative: 'Just now',\n    absolute: postDate.toLocaleTimeString()\n  };\n  if (diffInMinutes < 60) return {\n    relative: `${diffInMinutes}m ago`,\n    absolute: postDate.toLocaleString()\n  };\n  const diffInHours = Math.floor(diffInMinutes / 60);\n  if (diffInHours < 24) return {\n    relative: `${diffInHours}h ago`,\n    absolute: postDate.toLocaleString()\n  };\n  const diffInDays = Math.floor(diffInHours / 24);\n  if (diffInDays < 7) return {\n    relative: `${diffInDays}d ago`,\n    absolute: postDate.toLocaleDateString()\n  };\n  const diffInWeeks = Math.floor(diffInDays / 7);\n  if (diffInWeeks < 4) return {\n    relative: `${diffInWeeks}w ago`,\n    absolute: postDate.toLocaleDateString()\n  };\n  return {\n    relative: postDate.toLocaleDateString(),\n    absolute: postDate.toLocaleString()\n  };\n};\n\n// Enhanced API helper with better error handling\nconst apiRequest = async (endpoint, options = {}) => {\n  const url = `${API_BASE}${endpoint}`;\n  const token = localStorage.getItem('authToken');\n  const defaultOptions = {\n    headers: {\n      'Content-Type': 'application/json',\n      ...(token && {\n        'Authorization': `Bearer ${token}`\n      }),\n      ...options.headers\n    },\n    ...options\n  };\n\n  // Remove Content-Type for FormData\n  if (options.body instanceof FormData) {\n    delete defaultOptions.headers['Content-Type'];\n  }\n  console.log('ðŸŒ API Request:', {\n    url,\n    method: options.method || 'GET',\n    hasToken: !!token,\n    hasBody: !!options.body\n  });\n  try {\n    const response = await fetch(url, defaultOptions);\n    console.log('ðŸ“¡ API Response:', {\n      url,\n      status: response.status,\n      statusText: response.statusText,\n      ok: response.ok\n    });\n    if (!response.ok) {\n      const errorData = await response.json().catch(() => ({}));\n      throw new Error(errorData.message || `HTTP ${response.status}: ${response.statusText}`);\n    }\n    return await response.json();\n  } catch (error) {\n    console.error('âŒ API Request Failed:', {\n      url,\n      error: error.message,\n      stack: error.stack\n    });\n    throw error;\n  }\n};\n\n// Enhanced Share Modal Component\nconst ShareModal = /*#__PURE__*/_s(/*#__PURE__*/React.memo(_c = _s(({\n  post,\n  isOpen,\n  onClose\n}) => {\n  var _post$userId, _post$userId2, _post$userId2$usernam, _post$userId3;\n  _s();\n  const [copied, setCopied] = useState(false);\n  const postUrl = generatePostUrl(post._id);\n  const shareText = `Check out this post by ${((_post$userId = post.userId) === null || _post$userId === void 0 ? void 0 : _post$userId.username) || 'someone'} on SickoScoop: \"${post.content.substring(0, 100)}${post.content.length > 100 ? '...' : ''}\"`;\n  const handleCopyLink = async () => {\n    try {\n      await navigator.clipboard.writeText(postUrl);\n      setCopied(true);\n      setTimeout(() => setCopied(false), 2000);\n    } catch (error) {\n      console.error('Failed to copy:', error);\n      const textArea = document.createElement('textarea');\n      textArea.value = postUrl;\n      document.body.appendChild(textArea);\n      textArea.select();\n      document.execCommand('copy');\n      document.body.removeChild(textArea);\n      setCopied(true);\n      setTimeout(() => setCopied(false), 2000);\n    }\n  };\n  const handleSocialShare = platform => {\n    const encodedText = encodeURIComponent(shareText);\n    const encodedUrl = encodeURIComponent(postUrl);\n    const shareUrls = {\n      twitter: `https://twitter.com/intent/tweet?text=${encodedText}&url=${encodedUrl}`,\n      facebook: `https://www.facebook.com/sharer/sharer.php?u=${encodedUrl}`,\n      linkedin: `https://www.linkedin.com/sharing/share-offsite/?url=${encodedUrl}`,\n      reddit: `https://reddit.com/submit?url=${encodedUrl}&title=${encodedText}`,\n      email: `mailto:?subject=${encodeURIComponent('Check out this SickoScoop post')}&body=${encodedText}%0A%0A${encodedUrl}`\n    };\n    if (shareUrls[platform]) {\n      window.open(shareUrls[platform], '_blank', 'width=600,height=400');\n    }\n  };\n  const handleNativeShare = async () => {\n    if (navigator.share) {\n      try {\n        await navigator.share({\n          title: 'SickoScoop Post',\n          text: shareText,\n          url: postUrl\n        });\n      } catch (error) {\n        console.error('Error sharing:', error);\n      }\n    }\n  };\n  if (!isOpen) return null;\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50\",\n    onClick: onClose,\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"bg-gradient-to-r from-slate-900/95 to-zinc-900/95 backdrop-blur-md rounded-2xl border border-slate-600/50 shadow-2xl max-w-md w-full mx-4\",\n      onClick: e => e.stopPropagation(),\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex items-center justify-between p-6 border-b border-slate-600/30\",\n        children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n          className: \"text-xl font-semibold text-white\",\n          children: \"Share Post\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 200,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: onClose,\n          className: \"p-2 text-slate-400 hover:text-white hover:bg-slate-700/50 rounded-lg transition-colors\",\n          children: /*#__PURE__*/_jsxDEV(X, {\n            className: \"h-5 w-5\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 205,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 201,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 199,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"p-6\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"bg-slate-800/50 rounded-lg p-4 mb-6\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex items-center space-x-3 mb-3\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"w-8 h-8 bg-gradient-to-r from-slate-600 to-zinc-600 rounded-full flex items-center justify-center text-white font-semibold text-xs\",\n              children: ((_post$userId2 = post.userId) === null || _post$userId2 === void 0 ? void 0 : (_post$userId2$usernam = _post$userId2.username) === null || _post$userId2$usernam === void 0 ? void 0 : _post$userId2$usernam.slice(0, 2).toUpperCase()) || 'UN'\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 212,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"text-white font-medium\",\n              children: ((_post$userId3 = post.userId) === null || _post$userId3 === void 0 ? void 0 : _post$userId3.username) || 'Unknown User'\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 215,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 211,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"text-slate-300 text-sm line-clamp-3\",\n            children: post.content\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 217,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 210,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"mb-6\",\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            className: \"block text-sm font-medium text-slate-300 mb-2\",\n            children: \"Post Link\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 221,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex space-x-2\",\n            children: [/*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"text\",\n              value: postUrl,\n              readOnly: true,\n              className: \"flex-1 px-3 py-2 bg-black/40 border border-slate-600/50 rounded-lg text-white text-sm focus:outline-none focus:ring-2 focus:ring-amber-500/50\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 223,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: handleCopyLink,\n              className: `px-4 py-2 rounded-lg transition-all duration-200 flex items-center space-x-2 ${copied ? 'bg-green-600 text-white' : 'bg-slate-700 text-slate-300 hover:bg-slate-600'}`,\n              children: [/*#__PURE__*/_jsxDEV(Copy, {\n                className: \"h-4 w-4\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 237,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                children: copied ? 'Copied!' : 'Copy'\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 238,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 229,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 222,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 220,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"space-y-4\",\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            className: \"block text-sm font-medium text-slate-300\",\n            children: \"Share to\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 244,\n            columnNumber: 13\n          }, this), navigator.share && /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: handleNativeShare,\n            className: \"w-full flex items-center space-x-3 p-3 bg-slate-700/50 hover:bg-slate-700/70 rounded-lg transition-colors text-white\",\n            children: [/*#__PURE__*/_jsxDEV(Share2, {\n              className: \"h-5 w-5\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 251,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              children: \"Share via device\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 252,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 247,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"grid grid-cols-2 gap-3\",\n            children: [/*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: () => handleSocialShare('twitter'),\n              className: \"flex items-center space-x-3 p-3 bg-blue-600/20 hover:bg-blue-600/30 rounded-lg transition-colors text-blue-400 border border-blue-600/30\",\n              children: [/*#__PURE__*/_jsxDEV(Twitter, {\n                className: \"h-5 w-5\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 261,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                children: \"Twitter\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 262,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 257,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: () => handleSocialShare('facebook'),\n              className: \"flex items-center space-x-3 p-3 bg-blue-700/20 hover:bg-blue-700/30 rounded-lg transition-colors text-blue-300 border border-blue-700/30\",\n              children: [/*#__PURE__*/_jsxDEV(Facebook, {\n                className: \"h-5 w-5\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 269,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                children: \"Facebook\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 270,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 265,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: () => handleSocialShare('linkedin'),\n              className: \"flex items-center space-x-3 p-3 bg-blue-800/20 hover:bg-blue-800/30 rounded-lg transition-colors text-blue-200 border border-blue-800/30\",\n              children: [/*#__PURE__*/_jsxDEV(Linkedin, {\n                className: \"h-5 w-5\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 277,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                children: \"LinkedIn\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 278,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 273,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: () => handleSocialShare('email'),\n              className: \"flex items-center space-x-3 p-3 bg-slate-700/20 hover:bg-slate-700/30 rounded-lg transition-colors text-slate-300 border border-slate-700/30\",\n              children: [/*#__PURE__*/_jsxDEV(ExternalLink, {\n                className: \"h-5 w-5\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 285,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                children: \"Email\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 286,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 281,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 256,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"pt-4 border-t border-slate-600/30\",\n            children: /*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: () => handleSocialShare('reddit'),\n              className: \"w-full flex items-center space-x-3 p-3 bg-orange-600/20 hover:bg-orange-600/30 rounded-lg transition-colors text-orange-400 border border-orange-600/30\",\n              children: [/*#__PURE__*/_jsxDEV(ExternalLink, {\n                className: \"h-5 w-5\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 295,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                children: \"Share to Reddit\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 296,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 291,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 290,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 243,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 209,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 198,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 197,\n    columnNumber: 5\n  }, this);\n}, \"NE86rL3vg4NVcTTWDavsT0hUBJs=\")), \"NE86rL3vg4NVcTTWDavsT0hUBJs=\");\n\n// Enhanced Video Player Component\n_c2 = ShareModal;\nconst EnhancedVideoPlayer = /*#__PURE__*/_s2(/*#__PURE__*/React.memo(_c3 = _s2(({\n  file\n}) => {\n  _s2();\n  const [isLoading, setIsLoading] = useState(true);\n  const [hasError, setHasError] = useState(false);\n  const [isPlaying, setIsPlaying] = useState(false);\n  const videoRef = useRef(null);\n  const handleLoadedData = () => {\n    setIsLoading(false);\n    setHasError(false);\n  };\n  const handleError = () => {\n    setIsLoading(false);\n    setHasError(true);\n  };\n  const handlePlay = () => {\n    setIsPlaying(true);\n  };\n  const handlePause = () => {\n    setIsPlaying(false);\n  };\n  const handleClick = e => {\n    e.stopPropagation();\n    if (videoRef.current) {\n      if (isPlaying) {\n        videoRef.current.pause();\n      } else {\n        videoRef.current.play();\n      }\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"relative w-full bg-black rounded-xl overflow-hidden\",\n    children: [isLoading && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"absolute inset-0 flex items-center justify-center bg-slate-800/50 z-10\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"animate-spin rounded-full h-8 w-8 border-b-2 border-white\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 346,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n        className: \"ml-2 text-white text-sm\",\n        children: \"Loading video...\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 347,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 345,\n      columnNumber: 9\n    }, this), hasError ? /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"p-8 text-center bg-slate-800/50\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"text-red-400 mb-2\",\n        children: [/*#__PURE__*/_jsxDEV(Video, {\n          className: \"h-8 w-8 mx-auto mb-2\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 354,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: \"Unable to load video\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 355,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 353,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"text-slate-400 text-sm\",\n        children: file.filename\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 357,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"a\", {\n        href: file.url,\n        target: \"_blank\",\n        rel: \"noopener noreferrer\",\n        className: \"mt-2 inline-block text-blue-400 hover:text-blue-300 text-sm underline\",\n        onClick: e => e.stopPropagation(),\n        children: \"Download video\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 358,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 352,\n      columnNumber: 9\n    }, this) : /*#__PURE__*/_jsxDEV(\"video\", {\n      ref: videoRef,\n      className: \"w-full h-auto max-h-96 cursor-pointer\",\n      onLoadedData: handleLoadedData,\n      onError: handleError,\n      onPlay: handlePlay,\n      onPause: handlePause,\n      onClick: handleClick,\n      preload: \"metadata\",\n      playsInline: true,\n      children: [/*#__PURE__*/_jsxDEV(\"source\", {\n        src: file.url,\n        type: file.mimeType || file.type\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 380,\n        columnNumber: 11\n      }, this), \"Your browser does not support video playback.\"]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 369,\n      columnNumber: 9\n    }, this), !isLoading && !hasError && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"absolute bottom-2 left-2 bg-black/60 rounded px-2 py-1 text-white text-xs\",\n      children: file.filename\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 386,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 343,\n    columnNumber: 5\n  }, this);\n}, \"jXsPi7DfeiiHlrLMsZaOWhKryDk=\")), \"jXsPi7DfeiiHlrLMsZaOWhKryDk=\");\n\n// URL Router simulation\n_c4 = EnhancedVideoPlayer;\nconst useSimpleRouter = () => {\n  _s3();\n  const [currentPath, setCurrentPath] = useState(window.location.pathname);\n  useEffect(() => {\n    const handlePopState = () => {\n      setCurrentPath(window.location.pathname);\n    };\n    window.addEventListener('popstate', handlePopState);\n    return () => window.removeEventListener('popstate', handlePopState);\n  }, []);\n  const navigate = path => {\n    window.history.pushState({}, '', path);\n    setCurrentPath(path);\n  };\n  return {\n    currentPath,\n    navigate\n  };\n};\n\n// Landing Page Component\n_s3(useSimpleRouter, \"cTW2cqj/hmHGzdDpGoEziN+i5CA=\");\nconst LandingPage = /*#__PURE__*/React.memo(_c5 = ({\n  loginForm,\n  setLoginForm,\n  registerForm,\n  setRegisterForm,\n  showRegister,\n  setShowRegister,\n  handleLogin,\n  handleRegister,\n  loading,\n  error,\n  onBrowsePublic\n}) => /*#__PURE__*/_jsxDEV(\"div\", {\n  className: \"min-h-screen relative overflow-hidden border-4 border-orange-600/80\",\n  children: [/*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"absolute inset-0 bg-gradient-to-br from-gray-900 via-slate-900 to-zinc-900\",\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"absolute inset-0 opacity-10\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"absolute top-10 left-10 w-32 h-32 bg-gradient-to-r from-purple-800 to-indigo-700 rounded-full blur-xl animate-pulse\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 432,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"absolute top-40 right-20 w-24 h-24 bg-gradient-to-r from-slate-700 to-gray-600 rounded-full blur-lg animate-pulse delay-1000\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 433,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"absolute bottom-20 left-1/3 w-40 h-40 bg-gradient-to-r from-zinc-800 to-slate-700 rounded-full blur-2xl animate-pulse delay-2000\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 434,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 431,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 430,\n    columnNumber: 5\n  }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"relative z-10 flex flex-col items-center justify-center min-h-screen p-8 text-center\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"mb-8 relative\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"text-6xl md:text-8xl font-bold bg-gradient-to-r from-slate-300 via-purple-400 to-indigo-400 bg-clip-text text-transparent\",\n        children: \"SickoScoop\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 440,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 439,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"h1\", {\n      className: \"text-4xl md:text-6xl font-bold text-white mb-10 drop-shadow-2xl leading-none\",\n      children: [/*#__PURE__*/_jsxDEV(\"span\", {\n        className: \"whitespace-nowrap\",\n        children: \"STOP STALKERS\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 446,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 447,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n        className: \"text-2xl md:text-4xl block my-2\",\n        children: \"ON\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 448,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n        className: \"bg-gradient-to-r from-orange-300 via-red-400 via-blue-400 to-indigo-400 bg-clip-text text-transparent block animate-pulse relative\",\n        children: [/*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"absolute inset-0 bg-gradient-to-r from-orange-200 via-red-300 via-cyan-300 to-blue-300 bg-clip-text text-transparent blur-sm opacity-80\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 450,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"absolute inset-0 bg-gradient-to-r from-amber-300 via-rose-300 via-sky-300 to-violet-300 bg-clip-text text-transparent blur-xs opacity-40\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 451,\n          columnNumber: 11\n        }, this), \"SICKOSCOOP\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 449,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 445,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"mb-8 flex flex-col items-center\",\n      children: [/*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: onBrowsePublic,\n        className: \"px-8 py-3 bg-gradient-to-r from-gray-900 via-slate-800 to-black text-white text-lg font-semibold rounded-lg hover:scale-105 transform transition-all duration-300 shadow-2xl hover:shadow-amber-500/50 border-2 border-amber-500/80 hover:border-amber-400 hover:from-gray-800 hover:via-slate-700 hover:to-gray-900 backdrop-blur-md flex items-center space-x-3\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"relative w-6 h-6\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"absolute inset-0 bg-gradient-to-br from-purple-400 via-indigo-500 to-violet-600 rounded-full opacity-80 blur-sm animate-pulse\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 462,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"absolute inset-1 bg-gradient-to-tr from-orange-400 via-amber-500 to-red-500 rounded-full opacity-90\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 463,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"absolute inset-0 bg-gradient-to-br from-cyan-400 via-blue-500 to-indigo-600 transform rotate-45 opacity-70 blur-sm\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 464,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"absolute inset-1 bg-gradient-to-tr from-amber-300 via-orange-400 to-red-400 transform rotate-45 opacity-80\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 465,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"absolute inset-0 bg-gradient-to-bl from-violet-400 via-purple-500 to-indigo-600 opacity-60\",\n            style: {\n              clipPath: 'polygon(50% 10%, 10% 90%, 90% 90%)'\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 466,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"absolute inset-1 bg-gradient-to-tl from-orange-300 via-amber-400 to-yellow-400 opacity-70 animate-pulse\",\n            style: {\n              clipPath: 'polygon(50% 15%, 15% 85%, 85% 85%)'\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 467,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 461,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n          children: \"Browse Public Feed\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 469,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 457,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"text-slate-400 text-sm mt-2\",\n        children: \"See what people are sharing \\u2022 No account required\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 471,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 456,\n      columnNumber: 7\n    }, this), error && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"mb-4 p-3 bg-blue-500/20 border border-red-500/50 rounded-lg text-red-300 max-w-md\",\n      children: error\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 475,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"mb-8 w-full max-w-md\",\n      children: [!showRegister ? /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"space-y-4\",\n        children: [/*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"email\",\n          placeholder: \"Email\",\n          value: loginForm.email,\n          onChange: e => setLoginForm(prev => ({\n            ...prev,\n            email: e.target.value\n          })),\n          onKeyDown: e => e.key === 'Enter' && handleLogin(),\n          autoComplete: \"email\",\n          className: \"w-full p-3 bg-black/40 border border-slate-600/50 rounded-lg text-white placeholder-slate-300 focus:outline-none focus:ring-2 focus:ring-slate-400\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 483,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"password\",\n          placeholder: \"Password\",\n          value: loginForm.password,\n          onChange: e => setLoginForm(prev => ({\n            ...prev,\n            password: e.target.value\n          })),\n          onKeyDown: e => e.key === 'Enter' && handleLogin(),\n          autoComplete: \"current-password\",\n          className: \"w-full p-3 bg-black/40 border border-slate-600/50 rounded-lg text-white placeholder-slate-300 focus:outline-none focus:ring-2 focus:ring-slate-400\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 492,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: handleLogin,\n          disabled: loading,\n          className: \"w-full px-12 py-4 bg-gradient-to-r from-gray-900 via-slate-800 to-black text-white text-xl font-semibold rounded-lg hover:scale-105 transform transition-all duration-300 shadow-2xl hover:shadow-amber-500/50 border-2 border-amber-500/80 hover:border-amber-400 hover:from-gray-800 hover:via-slate-700 hover:to-gray-900 disabled:opacity-50\",\n          children: loading ? 'Entering...' : 'Enter Sicko'\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 501,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 482,\n        columnNumber: 11\n      }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"space-y-4\",\n        children: [/*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"text\",\n          placeholder: \"Username\",\n          value: registerForm.username,\n          onChange: e => setRegisterForm(prev => ({\n            ...prev,\n            username: e.target.value\n          })),\n          onKeyDown: e => e.key === 'Enter' && handleRegister(),\n          autoComplete: \"username\",\n          className: \"w-full p-3 bg-black/40 border border-slate-600/50 rounded-lg text-white placeholder-slate-300 focus:outline-none focus:ring-2 focus:ring-slate-400\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 511,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"email\",\n          placeholder: \"Email\",\n          value: registerForm.email,\n          onChange: e => setRegisterForm(prev => ({\n            ...prev,\n            email: e.target.value\n          })),\n          onKeyDown: e => e.key === 'Enter' && handleRegister(),\n          autoComplete: \"email\",\n          className: \"w-full p-3 bg-black/40 border border-slate-600/50 rounded-lg text-white placeholder-slate-300 focus:outline-none focus:ring-2 focus:ring-slate-400\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 520,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"password\",\n          placeholder: \"Password\",\n          value: registerForm.password,\n          onChange: e => setRegisterForm(prev => ({\n            ...prev,\n            password: e.target.value\n          })),\n          onKeyDown: e => e.key === 'Enter' && handleRegister(),\n          autoComplete: \"new-password\",\n          className: \"w-full p-3 bg-black/40 border border-slate-600/50 rounded-lg text-white placeholder-slate-300 focus:outline-none focus:ring-2 focus:ring-slate-400\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 529,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: handleRegister,\n          disabled: loading,\n          className: \"w-full px-12 py-4 bg-gradient-to-r from-gray-900 via-slate-800 to-black text-white text-xl font-semibold rounded-lg hover:scale-105 transform transition-all duration-300 shadow-2xl hover:shadow-amber-500/50 border-2 border-amber-500/80 hover:border-amber-400 hover:from-gray-800 hover:via-slate-700 hover:to-gray-900 disabled:opacity-50\",\n          children: loading ? 'Creating Account...' : 'Join Sicko'\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 538,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 510,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: () => setShowRegister(!showRegister),\n        className: \"mt-4 text-slate-300 hover:text-white transition-colors\",\n        children: showRegister ? 'Already have an account? Sign in' : 'Need an account? Register'\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 548,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 480,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"mt-16 grid grid-cols-1 md:grid-cols-3 gap-8 max-w-4xl\",\n      children: [{\n        icon: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"relative w-12 h-12\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"absolute inset-0 bg-gradient-to-br from-purple-300 via-indigo-400 to-violet-500 rounded-full opacity-80 blur-sm\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 561,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"absolute inset-1 bg-gradient-to-tr from-orange-300 via-orange-400 to-blue-500 rounded-full opacity-90 animate-pulse\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 562,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"absolute inset-2 bg-gradient-to-bl from-blue-300 via-purple-400 to-indigo-500 rounded-full opacity-70\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 563,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"absolute inset-3 bg-gradient-to-tl from-orange-300 via-purple-300 to-blue-400 rounded-full animate-pulse\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 564,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 560,\n          columnNumber: 15\n        }, this),\n        title: 'Anti-Stalker Protection',\n        desc: 'Advanced privacy controls'\n      }, {\n        icon: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"relative w-12 h-12\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"absolute inset-0 bg-gradient-to-br from-purple-300 via-indigo-400 to-violet-500 transform rotate-45 opacity-80 blur-sm\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 573,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"absolute inset-1 bg-gradient-to-tr from-orange-300 via-orange-400 to-blue-500 transform rotate-45 opacity-90 animate-pulse\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 574,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"absolute inset-2 bg-gradient-to-bl from-blue-300 via-purple-400 to-indigo-500 transform rotate-45 opacity-70\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 575,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"absolute inset-3 bg-gradient-to-tl from-orange-300 via-purple-300 to-blue-400 transform rotate-45 animate-pulse\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 576,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 572,\n          columnNumber: 15\n        }, this),\n        title: 'Decency',\n        desc: 'No anonymous trolls'\n      }, {\n        icon: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"relative w-12 h-12\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"absolute inset-0 bg-gradient-to-br from-violet-400 via-purple-500 to-indigo-600 opacity-80 blur-sm\",\n            style: {\n              clipPath: 'polygon(50% 0%, 0% 100%, 100% 100%)'\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 585,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"absolute inset-1 bg-gradient-to-tr from-orange-400 via-blue-700 to-amber-500 opacity-90 animate-pulse\",\n            style: {\n              clipPath: 'polygon(50% 0%, 0% 100%, 100% 100%)'\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 586,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"absolute inset-2 bg-gradient-to-bl from-teal-400 via-cyan-500 to-blue-600 opacity-70\",\n            style: {\n              clipPath: 'polygon(50% 0%, 0% 100%, 100% 100%)'\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 587,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"absolute inset-3 bg-gradient-to-tl from-blue-900 via-indigo-800 to-slate-800 animate-pulse\",\n            style: {\n              clipPath: 'polygon(50% 0%, 0% 100%, 100% 100%)'\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 588,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 584,\n          columnNumber: 15\n        }, this),\n        title: 'Genuine Community',\n        desc: 'Keeping everyone safe'\n      }].map((feature, idx) => /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"bg-black/20 backdrop-blur-md rounded-2xl p-6 border border-slate-600/30 hover:bg-black/30 transition-all duration-300\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"inline-block border-2 border-amber-500/80 rounded-lg p-3 mb-4 bg-black/30\",\n          children: feature.icon\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 596,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"h3\", {\n          className: \"text-xl font-semibold text-white mb-2\",\n          children: feature.title\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 599,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"text-slate-300\",\n          children: feature.desc\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 600,\n          columnNumber: 13\n        }, this)]\n      }, idx, true, {\n        fileName: _jsxFileName,\n        lineNumber: 595,\n        columnNumber: 11\n      }, this))\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 556,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 438,\n    columnNumber: 5\n  }, this)]\n}, void 0, true, {\n  fileName: _jsxFileName,\n  lineNumber: 429,\n  columnNumber: 3\n}, this));\n\n// Header component\n_c6 = LandingPage;\nconst Header = /*#__PURE__*/_s4(/*#__PURE__*/React.memo(_c7 = _s4(({\n  currentView,\n  setCurrentView,\n  apiStatus,\n  handleLogout,\n  user,\n  selectedPost,\n  onBackToFeed,\n  navigate\n}) => {\n  var _selectedPost$userId, _user$username;\n  _s4();\n  const [isMobileMenuOpen, setIsMobileMenuOpen] = useState(false);\n  const [isSearchOpen, setIsSearchOpen] = useState(false);\n  return /*#__PURE__*/_jsxDEV(\"header\", {\n    className: \"bg-gradient-to-r from-gray-900 via-slate-900 to-zinc-900 shadow-2xl border-b border-amber-500/30 backdrop-blur-md relative z-50\",\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"container mx-auto px-4 py-3\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex items-center justify-between\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex items-center space-x-3 flex-shrink-0\",\n          children: [currentView === 'post' && /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: onBackToFeed,\n            className: \"p-2 text-slate-300 hover:text-white transition-colors rounded-lg hover:bg-slate-800/50 mr-2\",\n            title: \"Back to Feed\",\n            children: /*#__PURE__*/_jsxDEV(ArrowLeft, {\n              className: \"h-5 w-5\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 633,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 628,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: () => {\n              navigate('/');\n              setCurrentView('feed');\n            },\n            className: \"text-xl md:text-2xl lg:text-3xl font-bold bg-gradient-to-r from-slate-300 to-purple-400 bg-clip-text text-transparent hover:scale-105 transition-transform\",\n            children: \"SickoScoop\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 637,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: () => setIsMobileMenuOpen(!isMobileMenuOpen),\n            className: \"md:hidden p-2 text-slate-300 hover:text-white transition-colors rounded-lg hover:bg-slate-800/50\",\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"w-5 h-5 flex flex-col justify-center space-y-1\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: `h-0.5 bg-current transition-all duration-300 ${isMobileMenuOpen ? 'rotate-45 translate-y-1.5' : ''}`\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 652,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: `h-0.5 bg-current transition-all duration-300 ${isMobileMenuOpen ? 'opacity-0' : ''}`\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 653,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: `h-0.5 bg-current transition-all duration-300 ${isMobileMenuOpen ? '-rotate-45 -translate-y-1.5' : ''}`\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 654,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 651,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 647,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 626,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"hidden md:flex items-center space-x-3 flex-1 justify-center max-w-2xl\",\n          children: currentView === 'post' ? /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"text-center text-slate-300\",\n            children: /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"text-lg font-medium\",\n              children: [\"Post by \", (selectedPost === null || selectedPost === void 0 ? void 0 : (_selectedPost$userId = selectedPost.userId) === null || _selectedPost$userId === void 0 ? void 0 : _selectedPost$userId.username) || 'Unknown User']\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 662,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 661,\n            columnNumber: 15\n          }, this) : /*#__PURE__*/_jsxDEV(_Fragment, {\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"flex space-x-3\",\n              children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                onClick: () => {\n                  navigate('/');\n                  setCurrentView('feed');\n                },\n                className: `px-4 py-2 rounded-lg border-2 transition-all duration-200 font-medium text-sm lg:text-base ${currentView === 'feed' ? 'bg-slate-700 text-white border-amber-500 shadow-lg shadow-amber-500/20' : 'text-slate-300 hover:text-white border-amber-600/50 hover:border-amber-500 hover:bg-slate-800/50'}`,\n                children: \"Feed\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 667,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                onClick: () => {\n                  navigate('/profile');\n                  setCurrentView('profile');\n                },\n                className: `px-4 py-2 rounded-lg border-2 transition-all duration-200 font-medium text-sm lg:text-base ${currentView === 'profile' ? 'bg-slate-700 text-white border-amber-500 shadow-lg shadow-amber-500/20' : 'text-slate-300 hover:text-white border-amber-600/50 hover:border-amber-500 hover:bg-slate-800/50'}`,\n                children: \"Profile\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 680,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                onClick: () => {\n                  navigate('/chat');\n                  setCurrentView('chat');\n                },\n                className: `px-4 py-2 rounded-lg border-2 transition-all duration-200 font-medium text-sm lg:text-base ${currentView === 'chat' ? 'bg-slate-700 text-white border-amber-500 shadow-lg shadow-amber-500/20' : 'text-slate-300 hover:text-white border-amber-600/50 hover:border-amber-500 hover:bg-slate-800/50'}`,\n                children: \"Chat\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 693,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 666,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"hidden lg:block relative ml-4\",\n              children: [/*#__PURE__*/_jsxDEV(Search, {\n                className: \"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-slate-500\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 709,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"text\",\n                placeholder: \"Search sicko...\",\n                className: \"w-64 xl:w-72 pl-10 pr-4 py-2 bg-black/40 border border-slate-600/60 rounded-full text-white placeholder-slate-400 focus:outline-none focus:ring-2 focus:ring-amber-500/50 focus:border-amber-500/70 transition-all duration-200 text-sm\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 710,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 708,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 659,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex items-center flex-shrink-0 mr-2\",\n          children: [currentView !== 'post' && /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: () => setIsSearchOpen(!isSearchOpen),\n            className: \"lg:hidden p-2 text-slate-300 hover:text-white transition-colors rounded-lg hover:bg-slate-800/50 mr-3\",\n            children: /*#__PURE__*/_jsxDEV(Search, {\n              className: \"h-5 w-5\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 726,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 722,\n            columnNumber: 15\n          }, this), user && /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"w-10 h-10 rounded-full flex items-center justify-center font-bold shadow-lg transition-all duration-200 cursor-pointer hover:scale-110 hover:shadow-xl text-sm bg-gradient-to-r from-amber-500 to-orange-600 border-2 border-amber-500/80 text-white mr-3\",\n            onClick: () => setIsMobileMenuOpen(!isMobileMenuOpen),\n            children: safeString(user === null || user === void 0 ? void 0 : (_user$username = user.username) === null || _user$username === void 0 ? void 0 : _user$username.slice(0, 2).toUpperCase()) || 'YU'\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 731,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"p-2 text-slate-300 hover:text-white transition-colors duration-200 hover:bg-slate-800/50 rounded-lg mr-3\",\n            children: /*#__PURE__*/_jsxDEV(Settings, {\n              className: \"h-5 w-5\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 740,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 739,\n            columnNumber: 13\n          }, this), user && /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: handleLogout,\n            className: \"hidden sm:flex px-3 py-2 text-sm rounded-lg transition-all duration-200 hover:scale-105 bg-slate-700/40 text-slate-300 border-2 border-amber-600/40 hover:border-amber-500 hover:bg-slate-700/60 hover:text-white font-semibold\",\n            children: \"Logout\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 744,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 720,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 625,\n        columnNumber: 9\n      }, this), isSearchOpen && currentView !== 'post' && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"mt-3 lg:hidden\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"relative\",\n          children: [/*#__PURE__*/_jsxDEV(Search, {\n            className: \"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-slate-500\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 757,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"text\",\n            placeholder: \"Search sicko...\",\n            className: \"w-full pl-10 pr-4 py-3 bg-black/40 border border-slate-600/60 rounded-full text-white placeholder-slate-400 focus:outline-none focus:ring-2 focus:ring-amber-500/50 focus:border-amber-500/70 transition-all duration-200\",\n            autoFocus: true\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 758,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 756,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 755,\n        columnNumber: 11\n      }, this), isMobileMenuOpen && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"md:hidden mt-4 pb-2 bg-black/20 rounded-xl p-4 border border-slate-600/30\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex flex-col space-y-3\",\n          children: [currentView === 'post' && /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: () => {\n              onBackToFeed();\n              setIsMobileMenuOpen(false);\n            },\n            className: \"px-4 py-3 rounded-lg border-2 border-amber-600/50 bg-slate-700/40 text-slate-300 hover:text-white hover:border-amber-500 hover:bg-slate-700/60 transition-all duration-200 font-medium text-left flex items-center space-x-3\",\n            children: [/*#__PURE__*/_jsxDEV(ArrowLeft, {\n              className: \"h-5 w-5\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 779,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              children: \"Back to Feed\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 780,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 772,\n            columnNumber: 17\n          }, this), currentView !== 'post' && /*#__PURE__*/_jsxDEV(_Fragment, {\n            children: [/*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: () => {\n                navigate('/');\n                setCurrentView('feed');\n                setIsMobileMenuOpen(false);\n              },\n              className: `px-4 py-3 rounded-lg border-2 transition-all duration-200 font-medium text-left flex items-center space-x-3 ${currentView === 'feed' ? 'bg-slate-700 text-white border-amber-500 shadow-lg shadow-amber-500/20' : 'text-slate-300 hover:text-white border-amber-600/50 hover:border-amber-500 hover:bg-slate-800/50'}`,\n              children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"text-lg\",\n                children: \"\\uD83D\\uDCF1\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 798,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                children: \"Feed\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 799,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 786,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: () => {\n                navigate('/profile');\n                setCurrentView('profile');\n                setIsMobileMenuOpen(false);\n              },\n              className: `px-4 py-3 rounded-lg border-2 transition-all duration-200 font-medium text-left flex items-center space-x-3 ${currentView === 'profile' ? 'bg-slate-700 text-white border-amber-500 shadow-lg shadow-amber-500/20' : 'text-slate-300 hover:text-white border-amber-600/50 hover:border-amber-500 hover:bg-slate-800/50'}`,\n              children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"text-lg\",\n                children: \"\\uD83D\\uDC64\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 814,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                children: \"Profile\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 815,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 802,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: () => {\n                navigate('/chat');\n                setCurrentView('chat');\n                setIsMobileMenuOpen(false);\n              },\n              className: `px-4 py-3 rounded-lg border-2 transition-all duration-200 font-medium text-left flex items-center space-x-3 ${currentView === 'chat' ? 'bg-slate-700 text-white border-amber-500 shadow-lg shadow-amber-500/20' : 'text-slate-300 hover:text-white border-amber-600/50 hover:border-amber-500 hover:bg-slate-800/50'}`,\n              children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"text-lg\",\n                children: \"\\uD83D\\uDCAC\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 830,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                children: \"Chat\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 831,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 818,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"border-t border-slate-600/40 my-2\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 836,\n            columnNumber: 15\n          }, this), user && /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: () => {\n              handleLogout();\n              setIsMobileMenuOpen(false);\n            },\n            className: \"px-4 py-3 rounded-lg border-2 border-amber-600/40 bg-slate-700/40 text-slate-300 hover:text-white hover:border-amber-500 hover:bg-slate-700/60 transition-all duration-200 font-medium text-left flex items-center space-x-3\",\n            children: [/*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"text-lg\",\n              children: \"\\uD83D\\uDEAA\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 846,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              children: \"Logout\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 847,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 839,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 770,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 769,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 624,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 623,\n    columnNumber: 5\n  }, this);\n}, \"D47q/G1/VajhiIVze3uryq7MrfY=\")), \"D47q/G1/VajhiIVze3uryq7MrfY=\");\n\n// Post Creator Component with Enhanced File Upload\n_c8 = Header;\nconst PostCreator = /*#__PURE__*/_s5(/*#__PURE__*/React.memo(_c9 = _s5(({\n  user,\n  newPost,\n  setNewPost,\n  handlePost,\n  loading,\n  fileInputRef,\n  handleFileUpload\n}) => {\n  var _user$username2;\n  _s5();\n  const [uploadedFiles, setUploadedFiles] = useState([]);\n  const [uploadProgress, setUploadProgress] = useState({});\n  const [isUploading, setIsUploading] = useState(false);\n  const [uploadError, setUploadError] = useState('');\n  const pdfInputRef = useRef(null);\n  const audioInputRef = useRef(null);\n  const videoInputRef = useRef(null);\n  const photoInputRef = useRef(null);\n  const FILE_LIMITS = {\n    image: {\n      max: 20 * 1024 * 1024,\n      label: '20MB'\n    },\n    video: {\n      max: 200 * 1024 * 1024,\n      label: '200MB'\n    },\n    audio: {\n      max: 50 * 1024 * 1024,\n      label: '50MB'\n    },\n    pdf: {\n      max: 50 * 1024 * 1024,\n      label: '50MB'\n    }\n  };\n  const validateFile = (file, type) => {\n    const limit = FILE_LIMITS[type];\n    if (!limit) return {\n      valid: false,\n      error: `Unknown file type: ${type}`\n    };\n    if (file.size > limit.max) {\n      return {\n        valid: false,\n        error: `${type.charAt(0).toUpperCase() + type.slice(1)} files must be under ${limit.label}. Your file is ${(file.size / 1024 / 1024).toFixed(1)}MB.`\n      };\n    }\n    return {\n      valid: true\n    };\n  };\n  const handleFileSelect = async (type, files) => {\n    console.log('ðŸ”„ handleFileSelect called:', type, files === null || files === void 0 ? void 0 : files.length);\n    if (!files || files.length === 0) return;\n    const fileArray = Array.from(files);\n    setUploadError('');\n    const allowedTypes = {\n      pdf: ['application/pdf'],\n      audio: ['audio/mpeg', 'audio/wav', 'audio/ogg', 'audio/mp3', 'audio/mp4'],\n      video: ['video/mp4', 'video/webm', 'video/mpeg', 'video/quicktime', 'video/mov'],\n      image: ['image/jpeg', 'image/png', 'image/gif', 'image/webp']\n    };\n    const validFiles = [];\n    const errors = [];\n    for (const file of fileArray) {\n      if (!allowedTypes[type].includes(file.type)) {\n        errors.push(`${file.name}: Invalid file type. Expected ${type.toUpperCase()}.`);\n        continue;\n      }\n      const validation = validateFile(file, type);\n      if (!validation.valid) {\n        errors.push(`${file.name}: ${validation.error}`);\n        continue;\n      }\n      validFiles.push(file);\n    }\n    if (errors.length > 0) {\n      setUploadError(errors.join('\\n'));\n      return;\n    }\n    if (validFiles.length === 0) {\n      setUploadError(`Please select valid ${type} files.`);\n      return;\n    }\n    await uploadFiles(validFiles);\n  };\n  const uploadFiles = async files => {\n    console.log('ðŸš€ uploadFiles called with:', files === null || files === void 0 ? void 0 : files.length, 'files');\n    if (!files || files.length === 0) return;\n    setIsUploading(true);\n    setUploadError('');\n    setUploadProgress({});\n    const formData = new FormData();\n    Array.from(files).forEach(file => {\n      formData.append('files', file);\n    });\n    let progressInterval;\n    try {\n      console.log('ðŸ“¤ Uploading files:', files.length);\n      const totalSize = Array.from(files).reduce((sum, file) => sum + file.size, 0);\n      const totalSizeMB = (totalSize / 1024 / 1024).toFixed(1);\n      const sizeLabel = `${totalSizeMB}MB`;\n      console.log(`ðŸ“Š Total upload size: ${sizeLabel}`);\n      const startTime = Date.now();\n      setUploadProgress({\n        status: 'uploading',\n        progress: 0,\n        totalSize: sizeLabel\n      });\n      progressInterval = setInterval(() => {\n        const elapsed = Date.now() - startTime;\n        const estimatedTotal = Math.max(15000, totalSize / 2000);\n        const progress = Math.min(90, elapsed / estimatedTotal * 100);\n        setUploadProgress(prev => ({\n          ...prev,\n          progress: Math.round(progress),\n          elapsed: Math.round(elapsed / 1000)\n        }));\n      }, 1500);\n\n      // âœ… FIXED: Use the enhanced API request function\n      const result = await apiRequest('/media/upload', {\n        method: 'POST',\n        body: formData\n      });\n      clearInterval(progressInterval);\n      setUploadProgress({\n        status: 'completed',\n        progress: 100\n      });\n      if (result.files && Array.isArray(result.files)) {\n        setUploadedFiles(prev => [...prev, ...result.files]);\n        console.log('ðŸ“ Files added to state:', result.files.length);\n        setTimeout(() => {\n          setUploadProgress({});\n        }, 2000);\n      } else {\n        throw new Error('Invalid response format from server');\n      }\n    } catch (error) {\n      console.error('âŒ Upload error:', error);\n      if (progressInterval) clearInterval(progressInterval);\n      setUploadError(`Upload failed: ${error.message}`);\n      setUploadProgress({});\n    } finally {\n      setIsUploading(false);\n    }\n  };\n  const removeFile = index => {\n    setUploadedFiles(prev => prev.filter((_, i) => i !== index));\n  };\n  const clearError = () => {\n    setUploadError('');\n  };\n  const hasContent = newPost.trim() || uploadedFiles.length > 0;\n  const handleSubmitPost = async () => {\n    if (!hasContent) return;\n    try {\n      await handlePost(uploadedFiles);\n      setUploadedFiles([]);\n      if (pdfInputRef.current) pdfInputRef.current.value = '';\n      if (audioInputRef.current) audioInputRef.current.value = '';\n      if (videoInputRef.current) videoInputRef.current.value = '';\n      if (photoInputRef.current) photoInputRef.current.value = '';\n    } catch (error) {\n      console.error('Post submission error:', error);\n    }\n  };\n  const getFileIcon = file => {\n    const icons = {\n      image: {\n        icon: /*#__PURE__*/_jsxDEV(Image, {\n          className: \"h-4 w-4\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1045,\n          columnNumber: 22\n        }, this),\n        color: 'text-blue-400',\n        bg: 'bg-blue-500/20'\n      },\n      video: {\n        icon: /*#__PURE__*/_jsxDEV(Video, {\n          className: \"h-4 w-4\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1046,\n          columnNumber: 22\n        }, this),\n        color: 'text-red-400',\n        bg: 'bg-red-500/20'\n      },\n      audio: {\n        icon: /*#__PURE__*/_jsxDEV(Mic, {\n          className: \"h-4 w-4\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1047,\n          columnNumber: 22\n        }, this),\n        color: 'text-green-400',\n        bg: 'bg-green-500/20'\n      },\n      document: {\n        icon: /*#__PURE__*/_jsxDEV(FileText, {\n          className: \"h-4 w-4\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1048,\n          columnNumber: 25\n        }, this),\n        color: 'text-blue-400',\n        bg: 'bg-blue-500/20'\n      },\n      pdf: {\n        icon: /*#__PURE__*/_jsxDEV(FileText, {\n          className: \"h-4 w-4\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1049,\n          columnNumber: 20\n        }, this),\n        color: 'text-blue-400',\n        bg: 'bg-blue-500/20'\n      }\n    };\n    if (icons[file.type]) {\n      return icons[file.type];\n    } else if (file.mimeType === 'application/pdf') {\n      return icons.pdf;\n    } else {\n      return icons.document;\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"bg-gradient-to-r from-slate-900/60 to-zinc-900/60 backdrop-blur-md rounded-2xl p-6 border border-slate-600/40 mb-6\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"flex space-x-4\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"w-12 h-12 bg-gradient-to-r from-slate-600 to-zinc-600 rounded-full flex items-center justify-center text-white font-semibold\",\n        children: safeString(user === null || user === void 0 ? void 0 : (_user$username2 = user.username) === null || _user$username2 === void 0 ? void 0 : _user$username2.slice(0, 2).toUpperCase()) || 'YU'\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 1064,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex-1\",\n        children: [/*#__PURE__*/_jsxDEV(\"textarea\", {\n          value: newPost,\n          onChange: e => setNewPost(e.target.value),\n          placeholder: \"Share your thoughts...\",\n          className: \"w-full p-4 bg-black/40 border border-slate-600/50 rounded-xl text-white placeholder-slate-300 resize-none focus:outline-none focus:ring-2 focus:ring-slate-400\",\n          rows: \"3\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1068,\n          columnNumber: 11\n        }, this), uploadError && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"mt-3 p-3 bg-blue-500/20 border border-red-500/50 rounded-lg\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex items-start justify-between\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"flex items-start space-x-2\",\n              children: [/*#__PURE__*/_jsxDEV(AlertCircle, {\n                className: \"h-4 w-4 text-red-400 mt-0.5 flex-shrink-0\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1080,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"text-red-300 text-sm whitespace-pre-line\",\n                children: uploadError\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1081,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1079,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: clearError,\n              className: \"text-red-400 hover:text-red-300 ml-2\",\n              children: /*#__PURE__*/_jsxDEV(X, {\n                className: \"h-4 w-4\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1087,\n                columnNumber: 19\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1083,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1078,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1077,\n          columnNumber: 13\n        }, this), uploadProgress.status && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"mt-3 p-4 bg-blue-500/10 border border-blue-500/30 rounded-lg\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex items-center justify-between mb-2\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"flex items-center space-x-2\",\n              children: [uploadProgress.status === 'completed' ? /*#__PURE__*/_jsxDEV(CheckCircle, {\n                className: \"h-4 w-4 text-green-400\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1098,\n                columnNumber: 21\n              }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"animate-spin rounded-full h-4 w-4 border-b-2 border-blue-400\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1100,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"text-blue-400 text-sm font-medium\",\n                children: uploadProgress.status === 'completed' ? 'Upload Complete!' : 'Uploading files...'\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1102,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1096,\n              columnNumber: 17\n            }, this), uploadProgress.totalSize && /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"text-blue-300 text-xs\",\n              children: uploadProgress.totalSize\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1107,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1095,\n            columnNumber: 15\n          }, this), uploadProgress.progress !== undefined && /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"mb-2\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"w-full bg-slate-800/50 rounded-full h-2\",\n              children: /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"bg-blue-400 h-2 rounded-full transition-all duration-500\",\n                style: {\n                  width: `${uploadProgress.progress}%`\n                }\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1116,\n                columnNumber: 21\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1115,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"flex justify-between text-xs text-blue-300 mt-1\",\n              children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                children: [uploadProgress.progress, \"% complete\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 1122,\n                columnNumber: 21\n              }, this), uploadProgress.elapsed && /*#__PURE__*/_jsxDEV(\"span\", {\n                children: [Math.floor(uploadProgress.elapsed / 60), \":\", String(uploadProgress.elapsed % 60).padStart(2, '0'), \" elapsed\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 1124,\n                columnNumber: 23\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1121,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1114,\n            columnNumber: 17\n          }, this), uploadProgress.status === 'uploading' && /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"text-blue-300 text-xs\",\n            children: \"Large files may take several minutes to upload. Please be patient.\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1131,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 1094,\n          columnNumber: 13\n        }, this), uploadedFiles.length > 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"mt-4 space-y-3\",\n          children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n            className: \"text-sm font-medium text-slate-300 flex items-center space-x-2\",\n            children: [/*#__PURE__*/_jsxDEV(CheckCircle, {\n              className: \"h-4 w-4 text-green-400\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1141,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              children: [\"Uploaded Files (\", uploadedFiles.length, \")\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1142,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1140,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"grid gap-3\",\n            children: uploadedFiles.map((file, index) => {\n              const fileStyle = getFileIcon(file);\n              return /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"flex items-center justify-between p-3 bg-black/30 rounded-lg border border-slate-600/30\",\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"flex items-center space-x-3\",\n                  children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                    className: `p-2 ${fileStyle.bg} rounded-lg ${fileStyle.color}`,\n                    children: fileStyle.icon\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1150,\n                    columnNumber: 25\n                  }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                    children: [/*#__PURE__*/_jsxDEV(\"p\", {\n                      className: \"text-white font-medium text-sm\",\n                      children: file.filename\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 1154,\n                      columnNumber: 27\n                    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                      className: \"flex items-center space-x-2\",\n                      children: [/*#__PURE__*/_jsxDEV(\"p\", {\n                        className: \"text-slate-400 text-xs\",\n                        children: [file.type.toUpperCase(), \" \\u2022 \", (file.size / 1024 / 1024).toFixed(1), \" MB\"]\n                      }, void 0, true, {\n                        fileName: _jsxFileName,\n                        lineNumber: 1156,\n                        columnNumber: 29\n                      }, this), file.trackingId && /*#__PURE__*/_jsxDEV(\"span\", {\n                        className: \"inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-blue-500/20 text-blue-400 border border-blue-500/30\",\n                        children: \"\\uD83D\\uDD0F Tracked\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 1160,\n                        columnNumber: 31\n                      }, this)]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 1155,\n                      columnNumber: 27\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1153,\n                    columnNumber: 25\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1149,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                  onClick: () => removeFile(index),\n                  className: \"p-1 text-slate-400 hover:text-blue-400 hover:bg-blue-500/10 rounded transition-colors\",\n                  title: \"Remove file\",\n                  children: /*#__PURE__*/_jsxDEV(X, {\n                    className: \"h-4 w-4\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1172,\n                    columnNumber: 25\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1167,\n                  columnNumber: 23\n                }, this)]\n              }, index, true, {\n                fileName: _jsxFileName,\n                lineNumber: 1148,\n                columnNumber: 21\n              }, this);\n            })\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1144,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 1139,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"mt-2 flex justify-end\",\n          children: /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: handleSubmitPost,\n            disabled: !hasContent || loading || isUploading,\n            className: `flex items-center justify-center space-x-2 px-6 py-3 rounded-lg transition-colors border-2 text-base font-semibold ${hasContent && !loading && !isUploading ? 'bg-slate-700/60 text-slate-300 hover:bg-slate-700 border-amber-600/50 hover:border-amber-500 cursor-pointer' : 'bg-slate-700/30 text-slate-500 border-amber-600/30 cursor-not-allowed opacity-50'}`,\n            children: /*#__PURE__*/_jsxDEV(\"span\", {\n              children: loading ? 'Posting...' : isUploading ? 'Uploading...' : 'Post'\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1191,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1182,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1181,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"mt-2 pt-2 border-t border-slate-600/30\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex flex-wrap gap-2 justify-end\",\n            children: [/*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: () => {\n                var _pdfInputRef$current;\n                return (_pdfInputRef$current = pdfInputRef.current) === null || _pdfInputRef$current === void 0 ? void 0 : _pdfInputRef$current.click();\n              },\n              disabled: isUploading,\n              className: `flex items-center space-x-2 px-3 py-2 rounded-lg transition-colors border-2 text-sm ${isUploading ? 'bg-slate-700/20 text-slate-600 border-amber-600/20 cursor-not-allowed' : 'bg-slate-700/30 text-slate-500 border-amber-600/30 opacity-50 hover:opacity-70 hover:bg-slate-700/40 hover:text-slate-400'}`,\n              title: `PDF files up to ${FILE_LIMITS.pdf.label} (with watermarking)`,\n              children: [/*#__PURE__*/_jsxDEV(FileText, {\n                className: \"h-4 w-4\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1207,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                children: \"PDF\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1208,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"text-xs opacity-70\",\n                children: [\"(\", FILE_LIMITS.pdf.label, \")\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 1209,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"text-xs text-blue-400\",\n                children: \"\\uD83D\\uDD0F\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1210,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1197,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: () => {\n                var _audioInputRef$curren;\n                return (_audioInputRef$curren = audioInputRef.current) === null || _audioInputRef$curren === void 0 ? void 0 : _audioInputRef$curren.click();\n              },\n              disabled: isUploading,\n              className: `flex items-center space-x-2 px-3 py-2 rounded-lg transition-colors border-2 text-sm ${isUploading ? 'bg-slate-700/20 text-slate-600 border-amber-600/20 cursor-not-allowed' : 'bg-slate-700/30 text-slate-500 border-amber-600/30 opacity-50 hover:opacity-70 hover:bg-slate-700/40 hover:text-slate-400'}`,\n              title: `Audio files up to ${FILE_LIMITS.audio.label}`,\n              children: [/*#__PURE__*/_jsxDEV(Mic, {\n                className: \"h-4 w-4\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1223,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                children: \"Audio\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1224,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"text-xs opacity-70\",\n                children: [\"(\", FILE_LIMITS.audio.label, \")\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 1225,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1213,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: () => {\n                var _videoInputRef$curren;\n                return (_videoInputRef$curren = videoInputRef.current) === null || _videoInputRef$curren === void 0 ? void 0 : _videoInputRef$curren.click();\n              },\n              disabled: isUploading,\n              className: `flex items-center space-x-2 px-3 py-2 rounded-lg transition-colors border-2 text-sm ${isUploading ? 'bg-slate-700/20 text-slate-600 border-amber-600/20 cursor-not-allowed' : 'bg-slate-700/30 text-slate-500 border-amber-600/30 opacity-50 hover:opacity-70 hover:bg-slate-700/40 hover:text-slate-400'}`,\n              title: `Video files up to ${FILE_LIMITS.video.label}`,\n              children: [/*#__PURE__*/_jsxDEV(Video, {\n                className: \"h-4 w-4\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1238,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                children: \"Video\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1239,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"text-xs opacity-70\",\n                children: [\"(\", FILE_LIMITS.video.label, \")\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 1240,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1228,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: () => {\n                var _photoInputRef$curren;\n                return (_photoInputRef$curren = photoInputRef.current) === null || _photoInputRef$curren === void 0 ? void 0 : _photoInputRef$curren.click();\n              },\n              disabled: isUploading,\n              className: `flex items-center space-x-2 px-3 py-2 rounded-lg transition-colors border-2 text-sm ${isUploading ? 'bg-slate-700/20 text-slate-600 border-amber-600/20 cursor-not-allowed' : 'bg-slate-700/30 text-slate-500 border-amber-600/30 opacity-50 hover:opacity-70 hover:bg-slate-700/40 hover:text-slate-400'}`,\n              title: `Image files up to ${FILE_LIMITS.image.label}`,\n              children: [/*#__PURE__*/_jsxDEV(Image, {\n                className: \"h-4 w-4\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1253,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                children: \"Photo\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1254,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"text-xs opacity-70\",\n                children: [\"(\", FILE_LIMITS.image.label, \")\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 1255,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1243,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1196,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1195,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 1067,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 1063,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n      ref: pdfInputRef,\n      type: \"file\",\n      accept: \".pdf\",\n      multiple: true,\n      onChange: e => {\n        console.log('ðŸ“ PDF files selected:', e.target.files.length);\n        handleFileSelect('pdf', e.target.files);\n      },\n      className: \"hidden\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 1262,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n      ref: audioInputRef,\n      type: \"file\",\n      accept: \"audio/*\",\n      multiple: true,\n      onChange: e => {\n        console.log('ðŸŽµ Audio files selected:', e.target.files.length);\n        handleFileSelect('audio', e.target.files);\n      },\n      className: \"hidden\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 1273,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n      ref: videoInputRef,\n      type: \"file\",\n      accept: \"video/*\",\n      multiple: true,\n      onChange: e => {\n        console.log('ðŸ“¹ Video files selected:', e.target.files.length);\n        handleFileSelect('video', e.target.files);\n      },\n      className: \"hidden\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 1284,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n      ref: photoInputRef,\n      type: \"file\",\n      accept: \"image/*\",\n      multiple: true,\n      onChange: e => {\n        console.log('ðŸ“¸ Photo files selected:', e.target.files.length);\n        handleFileSelect('image', e.target.files);\n      },\n      className: \"hidden\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 1295,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n      ref: fileInputRef,\n      type: \"file\",\n      multiple: true,\n      accept: \"image/*,video/*,audio/*,.pdf\",\n      onChange: e => uploadFiles(e.target.files),\n      className: \"hidden\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 1307,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 1062,\n    columnNumber: 5\n  }, this);\n}, \"WEB3/tvNSiosuZ6OhkYpXm/4l4Y=\")), \"WEB3/tvNSiosuZ6OhkYpXm/4l4Y=\");\n\n// Enhanced Post Component\n_c0 = PostCreator;\nconst Post = /*#__PURE__*/_s6(/*#__PURE__*/React.memo(_c1 = _s6(({\n  post,\n  user,\n  handleLike,\n  handleComment,\n  handleShare,\n  isPublicView = false,\n  onLoginPrompt,\n  onPostClick,\n  isDetailView = false,\n  navigate\n}) => {\n  var _post$likes, _post$likes2, _post$comments, _post$userId4, _post$userId4$usernam, _post$userId5, _post$userId6, _post$userId7, _user$username3;\n  _s6();\n  const [showComments, setShowComments] = useState(isDetailView);\n  const [commentText, setCommentText] = useState('');\n  const [showShareModal, setShowShareModal] = useState(false);\n  const [showMoreMenu, setShowMoreMenu] = useState(false);\n  const [showWhoLiked, setShowWhoLiked] = useState(false);\n  const [isLiking, setIsLiking] = useState(false);\n  const commentInputRef = useRef(null);\n  const timestamp = getDetailedTimestamp(post.createdAt);\n  useEffect(() => {\n    if (post.mediaFiles && post.mediaFiles.length > 0) {\n      console.log('ðŸ” POST DEBUGGING - Post has media files:', post.mediaFiles);\n      post.mediaFiles.forEach((file, index) => {\n        console.log(`ðŸ“„ File ${index} details:`, {\n          type: file.type,\n          mimeType: file.mimeType,\n          filename: file.filename,\n          originalName: file.originalName,\n          url: file.url,\n          size: file.size,\n          trackingId: file.trackingId,\n          trackingUrl: file.trackingUrl,\n          fullFile: file\n        });\n      });\n    }\n  }, [post.mediaFiles]);\n  const detectFileType = file => {\n    console.log('ðŸŽ¯ Detecting file type for:', file);\n    const isPDF = file.type === 'document' || file.type === 'pdf' || file.mimeType === 'application/pdf' || file.filename && file.filename.toLowerCase().endsWith('.pdf') || file.originalName && file.originalName.toLowerCase().endsWith('.pdf');\n    console.log('ðŸ“„ PDF detection result:', {\n      isPDF,\n      reasons: {\n        typeIsDocument: file.type === 'document',\n        typeIsPdf: file.type === 'pdf',\n        mimeTypeIsPdf: file.mimeType === 'application/pdf',\n        filenameEndsPdf: file.filename && file.filename.toLowerCase().endsWith('.pdf'),\n        originalNameEndsPdf: file.originalName && file.originalName.toLowerCase().endsWith('.pdf')\n      },\n      trackingId: file.trackingId,\n      trackingUrl: file.trackingUrl\n    });\n    if (isPDF) {\n      return {\n        category: 'pdf',\n        displayName: 'PDF Document',\n        icon: 'ðŸ“„',\n        bgColor: 'bg-blue-500/20',\n        textColor: 'text-blue-400',\n        borderColor: 'border-blue-500/40',\n        hoverBgColor: 'hover:bg-blue-500/30',\n        hoverTextColor: 'hover:text-blue-300',\n        hoverBorderColor: 'hover:border-blue-500/60',\n        isTracked: !!file.trackingId\n      };\n    }\n    if (file.type === 'image' || file.mimeType && file.mimeType.startsWith('image/')) {\n      return {\n        category: 'image',\n        displayName: 'Image',\n        icon: 'ðŸ–¼ï¸',\n        bgColor: 'bg-blue-500/20',\n        textColor: 'text-blue-400',\n        borderColor: 'border-blue-500/40'\n      };\n    }\n    if (file.type === 'video' || file.mimeType && file.mimeType.startsWith('video/')) {\n      return {\n        category: 'video',\n        displayName: 'Video',\n        icon: 'ðŸŽ¬',\n        bgColor: 'bg-purple-500/20',\n        textColor: 'text-purple-400',\n        borderColor: 'border-purple-500/40'\n      };\n    }\n    if (file.type === 'audio' || file.mimeType && file.mimeType.startsWith('audio/')) {\n      return {\n        category: 'audio',\n        displayName: 'Audio',\n        icon: 'ðŸŽµ',\n        bgColor: 'bg-green-500/20',\n        textColor: 'text-green-400',\n        borderColor: 'border-green-500/40'\n      };\n    }\n    console.warn('âš ï¸ Unknown file type, using default:', file);\n    return {\n      category: 'document',\n      displayName: 'Document',\n      icon: 'ðŸ“Ž',\n      bgColor: 'bg-orange-500/20',\n      textColor: 'text-orange-400',\n      borderColor: 'border-orange-500/40'\n    };\n  };\n  const handleLikeClick = async () => {\n    if (isPublicView) {\n      onLoginPrompt === null || onLoginPrompt === void 0 ? void 0 : onLoginPrompt();\n      return;\n    }\n    setIsLiking(true);\n    try {\n      await handleLike(post._id);\n    } finally {\n      setTimeout(() => setIsLiking(false), 300);\n    }\n  };\n  const handleCommentSubmit = () => {\n    if (!commentText.trim()) return;\n    if (isPublicView) {\n      onLoginPrompt === null || onLoginPrompt === void 0 ? void 0 : onLoginPrompt();\n      return;\n    }\n    handleComment === null || handleComment === void 0 ? void 0 : handleComment(post._id, commentText);\n    setCommentText('');\n  };\n  const handleShareClick = () => {\n    if (isPublicView) {\n      onLoginPrompt === null || onLoginPrompt === void 0 ? void 0 : onLoginPrompt();\n      return;\n    }\n    setShowShareModal(true);\n  };\n  const handleWhoLikedClick = () => {\n    if (isPublicView) {\n      onLoginPrompt === null || onLoginPrompt === void 0 ? void 0 : onLoginPrompt();\n      return;\n    }\n    setShowWhoLiked(true);\n  };\n  const handlePostContentClick = e => {\n    if (e.target.closest('button') || e.target.closest('input') || e.target.closest('a') || e.target.closest('.post-action-button') || showShareModal || showMoreMenu || showWhoLiked || isDetailView) {\n      return;\n    }\n    if (isPublicView) {\n      onLoginPrompt === null || onLoginPrompt === void 0 ? void 0 : onLoginPrompt();\n      return;\n    }\n    if (navigate) {\n      navigate(`/post/${post._id}`);\n    }\n    onPostClick === null || onPostClick === void 0 ? void 0 : onPostClick(post);\n  };\n  const isLiked = !isPublicView && ((_post$likes = post.likes) === null || _post$likes === void 0 ? void 0 : _post$likes.some(like => (typeof like === 'string' ? like : like.user || like._id) === ((user === null || user === void 0 ? void 0 : user._id) || (user === null || user === void 0 ? void 0 : user.id))));\n  const likeCount = ((_post$likes2 = post.likes) === null || _post$likes2 === void 0 ? void 0 : _post$likes2.length) || 0;\n  const commentCount = ((_post$comments = post.comments) === null || _post$comments === void 0 ? void 0 : _post$comments.length) || 0;\n  const usersWhoLiked = React.useMemo(() => {\n    if (!post.likes || post.likes.length === 0) return [];\n    return post.likes.map((like, index) => {\n      if (typeof like === 'string') {\n        return {\n          _id: like,\n          username: `User ${index + 1}`,\n          avatar: 'ðŸ‘¤',\n          verified: false\n        };\n      } else if (like.user) {\n        return {\n          _id: like.user._id || like.user,\n          username: like.user.username || `User ${index + 1}`,\n          avatar: like.user.avatar || 'ðŸ‘¤',\n          verified: like.user.verified || false\n        };\n      } else {\n        return {\n          _id: like._id || `user-${index}`,\n          username: like.username || `User ${index + 1}`,\n          avatar: like.avatar || 'ðŸ‘¤',\n          verified: like.verified || false\n        };\n      }\n    });\n  }, [post.likes]);\n  const handlePDFClick = async file => {\n    if (file.trackingId) {\n      try {\n        const trackingUrl = file.trackingUrl || `${API_BASE}/track/${file.trackingId}`;\n        await apiRequest(`/track/${file.trackingId}`, {\n          method: 'GET'\n        });\n        console.log('ðŸ“Š PDF access tracked:', file.trackingId);\n      } catch (error) {\n        console.error('Failed to track PDF access:', error);\n      }\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: `bg-gradient-to-r from-slate-900/40 to-zinc-900/40 backdrop-blur-md rounded-2xl p-6 border border-slate-600/30 mb-6 transition-all duration-300 group ${!isDetailView && !isPublicView ? 'hover:border-slate-500/50 cursor-pointer hover:bg-slate-800/30' : ''}`,\n      onClick: handlePostContentClick,\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex items-start justify-between mb-4\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex items-start space-x-4\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"w-12 h-12 bg-gradient-to-r from-slate-600 to-zinc-600 rounded-full flex items-center justify-center text-white font-semibold text-sm shadow-lg\",\n            children: ((_post$userId4 = post.userId) === null || _post$userId4 === void 0 ? void 0 : (_post$userId4$usernam = _post$userId4.username) === null || _post$userId4$usernam === void 0 ? void 0 : _post$userId4$usernam.slice(0, 2).toUpperCase()) || 'UN'\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1568,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex-1\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"flex items-center space-x-2 mb-1\",\n              children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"font-semibold text-white hover:text-slate-200 cursor-pointer\",\n                children: ((_post$userId5 = post.userId) === null || _post$userId5 === void 0 ? void 0 : _post$userId5.username) || 'Unknown User'\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1574,\n                columnNumber: 17\n              }, this), ((_post$userId6 = post.userId) === null || _post$userId6 === void 0 ? void 0 : _post$userId6.verified) && /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"w-5 h-5 bg-gradient-to-r from-blue-500 to-indigo-600 rounded-full flex items-center justify-center\",\n                children: /*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"text-white text-xs\",\n                  children: \"\\u2713\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1579,\n                  columnNumber: 21\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1578,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"text-slate-400 text-sm\",\n                children: \"\\u2022\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1582,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"text-slate-400 text-sm hover:text-slate-300 cursor-pointer flex items-center space-x-1 group/timestamp\",\n                title: timestamp.absolute,\n                children: [/*#__PURE__*/_jsxDEV(Clock, {\n                  className: \"h-3 w-3\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1587,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"group-hover/timestamp:hidden\",\n                  children: timestamp.relative\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1588,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"hidden group-hover/timestamp:inline text-xs\",\n                  children: timestamp.absolute\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1589,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 1583,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1573,\n              columnNumber: 15\n            }, this), ((_post$userId7 = post.userId) === null || _post$userId7 === void 0 ? void 0 : _post$userId7.transparencyScore) && /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"flex items-center space-x-1\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"w-2 h-2 bg-green-500 rounded-full\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1595,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"text-xs text-slate-500\",\n                children: [post.userId.transparencyScore, \"% transparency\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 1596,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1594,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1572,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 1567,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"relative\",\n          children: [/*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: e => {\n              e.stopPropagation();\n              setShowMoreMenu(!showMoreMenu);\n            },\n            className: \"p-2 text-slate-400 hover:text-white hover:bg-slate-700/50 rounded-lg transition-colors opacity-0 group-hover:opacity-100 post-action-button\",\n            children: /*#__PURE__*/_jsxDEV(MoreHorizontal, {\n              className: \"h-5 w-5\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1612,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1605,\n            columnNumber: 13\n          }, this), showMoreMenu && /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"absolute right-0 top-10 bg-slate-800/90 backdrop-blur-md rounded-xl border border-slate-600/50 shadow-xl z-10 min-w-48\",\n            children: [/*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: e => {\n                e.stopPropagation();\n                navigator.clipboard.writeText(generatePostUrl(post._id));\n                setShowMoreMenu(false);\n              },\n              className: \"w-full px-4 py-3 text-left text-slate-300 hover:text-white hover:bg-slate-700/50 rounded-t-xl transition-colors flex items-center space-x-2\",\n              children: [/*#__PURE__*/_jsxDEV(Copy, {\n                className: \"h-4 w-4\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1625,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                children: \"Copy Link\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1626,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1617,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: e => e.stopPropagation(),\n              className: \"w-full px-4 py-3 text-left text-slate-300 hover:text-white hover:bg-slate-700/50 transition-colors flex items-center space-x-2\",\n              children: [/*#__PURE__*/_jsxDEV(Bookmark, {\n                className: \"h-4 w-4\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1632,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                children: \"Save Post\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1633,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1628,\n              columnNumber: 17\n            }, this), !isDetailView && /*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: e => {\n                e.stopPropagation();\n                if (navigate) navigate(`/post/${post._id}`);\n                onPostClick === null || onPostClick === void 0 ? void 0 : onPostClick(post);\n                setShowMoreMenu(false);\n              },\n              className: \"w-full px-4 py-3 text-left text-slate-300 hover:text-white hover:bg-slate-700/50 transition-colors flex items-center space-x-2\",\n              children: [/*#__PURE__*/_jsxDEV(Eye, {\n                className: \"h-4 w-4\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1645,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                children: \"View Post\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1646,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1636,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: e => e.stopPropagation(),\n              className: \"w-full px-4 py-3 text-left text-slate-300 hover:text-white hover:bg-slate-700/50 rounded-b-xl transition-colors flex items-center space-x-2\",\n              children: [/*#__PURE__*/_jsxDEV(Flag, {\n                className: \"h-4 w-4\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1653,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                children: \"Report\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1654,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1649,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1616,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 1604,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 1566,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"mb-4\",\n        children: /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"text-slate-200 leading-relaxed whitespace-pre-wrap\",\n          children: post.content\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1662,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 1661,\n        columnNumber: 9\n      }, this), post.mediaFiles && post.mediaFiles.length > 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"mb-4 space-y-4\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"text-sm text-slate-300 mb-3 flex items-center space-x-2\",\n          children: [/*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"text-xl\",\n            children: \"\\uD83D\\uDCCE\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1670,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"font-medium\",\n            children: [post.mediaFiles.length, \" attachment\", post.mediaFiles.length !== 1 ? 's' : '']\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1671,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"text-slate-500\",\n            children: \"\\u2022 Click to download or view\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1674,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 1669,\n          columnNumber: 13\n        }, this), post.mediaFiles.map((file, idx) => {\n          const fileType = detectFileType(file);\n          console.log(`ðŸŽ¨ Rendering file ${idx}:`, {\n            file,\n            fileType\n          });\n          return /*#__PURE__*/_jsxDEV(\"div\", {\n            className: `rounded-xl overflow-hidden border-2 ${fileType.borderColor} ${fileType.bgColor} p-1`,\n            children: [fileType.category === 'image' && /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"p-3\",\n              children: /*#__PURE__*/_jsxDEV(\"img\", {\n                src: file.url,\n                alt: \"Post media\",\n                className: \"w-full h-auto max-h-96 object-cover hover:scale-105 transition-transform duration-300 cursor-pointer rounded-lg\",\n                onClick: e => e.stopPropagation(),\n                onError: e => {\n                  console.error('âŒ Image failed to load:', file.url);\n                  e.target.style.display = 'none';\n                }\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1686,\n                columnNumber: 23\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1685,\n              columnNumber: 21\n            }, this), fileType.category === 'video' && /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"p-3\",\n              children: /*#__PURE__*/_jsxDEV(EnhancedVideoPlayer, {\n                file: file\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1701,\n                columnNumber: 23\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1700,\n              columnNumber: 21\n            }, this), fileType.category === 'audio' && /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"p-4\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"flex items-center space-x-3 mb-3\",\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  className: `w-12 h-12 ${fileType.bgColor} rounded-lg flex items-center justify-center text-2xl border ${fileType.borderColor}`,\n                  children: fileType.icon\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1708,\n                  columnNumber: 25\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  children: [/*#__PURE__*/_jsxDEV(\"p\", {\n                    className: \"text-white font-medium\",\n                    children: file.filename || file.originalName || 'Audio File'\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1712,\n                    columnNumber: 27\n                  }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                    className: \"text-slate-400 text-sm\",\n                    children: [fileType.displayName, \" \\u2022 \", (file.size / 1024 / 1024).toFixed(1), \" MB\"]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1713,\n                    columnNumber: 27\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1711,\n                  columnNumber: 25\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 1707,\n                columnNumber: 23\n              }, this), /*#__PURE__*/_jsxDEV(\"audio\", {\n                controls: true,\n                className: \"w-full\",\n                onClick: e => e.stopPropagation(),\n                children: [/*#__PURE__*/_jsxDEV(\"source\", {\n                  src: file.url\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1719,\n                  columnNumber: 25\n                }, this), \"Your browser does not support audio playback.\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 1718,\n                columnNumber: 23\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1706,\n              columnNumber: 21\n            }, this), fileType.category === 'pdf' && /*#__PURE__*/_jsxDEV(\"div\", {\n              className: `p-5 ${fileType.bgColor} rounded-xl`,\n              onClick: e => e.stopPropagation(),\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"flex items-center space-x-4\",\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  className: `w-16 h-16 ${fileType.bgColor} rounded-xl flex items-center justify-center border-2 ${fileType.borderColor} shadow-lg relative`,\n                  children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                    className: \"text-3xl\",\n                    children: fileType.icon\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1729,\n                    columnNumber: 27\n                  }, this), fileType.isTracked && /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"absolute -top-1 -right-1 w-4 h-4 bg-red-500 rounded-full flex items-center justify-center\",\n                    children: /*#__PURE__*/_jsxDEV(\"span\", {\n                      className: \"text-white text-xs\",\n                      children: \"\\uD83D\\uDD0F\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 1732,\n                      columnNumber: 31\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1731,\n                    columnNumber: 29\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1728,\n                  columnNumber: 25\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"flex-1\",\n                  children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n                    className: \"text-white font-bold text-lg mb-1\",\n                    children: file.filename || file.originalName || 'PDF Document'\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1738,\n                    columnNumber: 27\n                  }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                    className: `${fileType.textColor} text-sm font-medium mb-1 flex items-center space-x-2`,\n                    children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                      children: [\"\\uD83D\\uDCC4 \", fileType.displayName]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 1742,\n                      columnNumber: 29\n                    }, this), fileType.isTracked && /*#__PURE__*/_jsxDEV(\"span\", {\n                      className: \"inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-blue-500/20 text-blue-400 border border-blue-500/30\",\n                      children: \"\\uD83D\\uDD0F Watermarked & Tracked\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 1744,\n                      columnNumber: 31\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1741,\n                    columnNumber: 27\n                  }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                    className: \"text-slate-400 text-sm\",\n                    children: [(file.size / 1024 / 1024).toFixed(1), \" MB\", file.mimeType && ` â€¢ ${file.mimeType}`, file.trackingId && /*#__PURE__*/_jsxDEV(\"span\", {\n                      className: \"block text-xs mt-1 text-blue-400\",\n                      children: [\"Tracking ID: \", file.trackingId.substring(0, 8), \"...\"]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 1753,\n                      columnNumber: 31\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1749,\n                    columnNumber: 27\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1737,\n                  columnNumber: 25\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"flex flex-col space-y-2\",\n                  children: [/*#__PURE__*/_jsxDEV(\"a\", {\n                    href: file.url,\n                    target: \"_blank\",\n                    rel: \"noopener noreferrer\",\n                    className: `px-4 py-2 ${fileType.bgColor} ${fileType.hoverBgColor} ${fileType.textColor} ${fileType.hoverTextColor} rounded-lg transition-all duration-200 text-sm font-medium border-2 ${fileType.borderColor} ${fileType.hoverBorderColor} flex items-center space-x-2 hover:scale-105 transform`,\n                    onClick: e => {\n                      e.stopPropagation();\n                      handlePDFClick(file);\n                      console.log('ðŸ”— Opening PDF:', file.url);\n                    },\n                    children: [/*#__PURE__*/_jsxDEV(ExternalLink, {\n                      className: \"h-4 w-4\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 1772,\n                      columnNumber: 29\n                    }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                      children: \"View PDF\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 1773,\n                      columnNumber: 29\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1761,\n                    columnNumber: 27\n                  }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                    onClick: e => {\n                      e.stopPropagation();\n                      navigator.clipboard.writeText(file.url);\n                      console.log('ðŸ“‹ PDF URL copied:', file.url);\n                    },\n                    className: \"px-3 py-1 bg-slate-700/50 hover:bg-slate-700 text-slate-300 hover:text-white rounded-md transition-colors text-xs flex items-center space-x-1\",\n                    children: [/*#__PURE__*/_jsxDEV(Copy, {\n                      className: \"h-3 w-3\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 1784,\n                      columnNumber: 29\n                    }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                      children: \"Copy Link\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 1785,\n                      columnNumber: 29\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1776,\n                    columnNumber: 27\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1760,\n                  columnNumber: 25\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 1727,\n                columnNumber: 23\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"mt-3 pt-3 border-t border-red-500/20\",\n                children: /*#__PURE__*/_jsxDEV(\"p\", {\n                  className: \"text-slate-400 text-xs\",\n                  children: [\"\\uD83D\\uDCE5 Uploaded \", new Date(post.createdAt).toLocaleDateString(), \" \\u2022 Click \\\"View PDF\\\" to open in new tab\", fileType.isTracked && /*#__PURE__*/_jsxDEV(\"span\", {\n                    className: \"block mt-1 text-blue-400\",\n                    children: \"\\uD83D\\uDD0F This PDF is watermarked and tracked for security purposes\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1794,\n                    columnNumber: 29\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1791,\n                  columnNumber: 25\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1790,\n                columnNumber: 23\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1726,\n              columnNumber: 21\n            }, this), fileType.category === 'document' && /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"p-4\",\n              children: /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"flex items-center space-x-3\",\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  className: `w-12 h-12 ${fileType.bgColor} rounded-lg flex items-center justify-center text-xl border ${fileType.borderColor}`,\n                  children: fileType.icon\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1806,\n                  columnNumber: 25\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"flex-1\",\n                  children: [/*#__PURE__*/_jsxDEV(\"p\", {\n                    className: \"text-white font-medium\",\n                    children: file.filename || file.originalName || 'Document'\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1810,\n                    columnNumber: 27\n                  }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                    className: \"text-slate-400 text-sm\",\n                    children: [fileType.displayName, \" \\u2022 \", (file.size / 1024 / 1024).toFixed(1), \" MB\"]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1811,\n                    columnNumber: 27\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1809,\n                  columnNumber: 25\n                }, this), /*#__PURE__*/_jsxDEV(\"a\", {\n                  href: file.url,\n                  target: \"_blank\",\n                  rel: \"noopener noreferrer\",\n                  className: `px-3 py-2 ${fileType.bgColor} hover:bg-orange-500/30 ${fileType.textColor} hover:text-orange-300 rounded-lg transition-colors text-sm font-medium border ${fileType.borderColor} hover:border-orange-500/50`,\n                  onClick: e => e.stopPropagation(),\n                  children: \"View File\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1815,\n                  columnNumber: 25\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 1805,\n                columnNumber: 23\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1804,\n              columnNumber: 21\n            }, this)]\n          }, idx, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1682,\n            columnNumber: 17\n          }, this);\n        })]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 1668,\n        columnNumber: 11\n      }, this), (likeCount > 0 || commentCount > 0) && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex items-center justify-between text-slate-400 text-sm mb-3 pb-3 border-b border-slate-600/30\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex items-center space-x-4\",\n          children: [likeCount > 0 && /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: e => {\n              e.stopPropagation();\n              handleWhoLikedClick();\n            },\n            className: \"flex items-center space-x-1 hover:text-slate-300 transition-colors cursor-pointer group post-action-button\",\n            title: isPublicView ? \"Sign up to see who liked this\" : \"See who liked this post\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"flex -space-x-1\",\n              children: /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"w-5 h-5 bg-gradient-to-r from-red-500 to-pink-500 rounded-full flex items-center justify-center border border-slate-800 group-hover:scale-110 transition-transform\",\n                children: /*#__PURE__*/_jsxDEV(Heart, {\n                  className: \"h-3 w-3 text-white\",\n                  fill: \"white\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1847,\n                  columnNumber: 23\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1846,\n                columnNumber: 21\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1845,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"hover:underline\",\n              children: [likeCount, \" \", likeCount === 1 ? 'like' : 'likes']\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1850,\n              columnNumber: 19\n            }, this), isPublicView && /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"text-xs text-slate-500 ml-1\",\n              children: \"\\uD83D\\uDD12\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1852,\n              columnNumber: 21\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1837,\n            columnNumber: 17\n          }, this), commentCount > 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex items-center space-x-1\",\n            children: [/*#__PURE__*/_jsxDEV(Users, {\n              className: \"h-4 w-4\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1858,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              children: [commentCount, \" \", commentCount === 1 ? 'comment' : 'comments']\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1859,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1857,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 1835,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex items-center space-x-1\",\n          children: [/*#__PURE__*/_jsxDEV(Eye, {\n            className: \"h-4 w-4\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1864,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            children: [Math.floor(Math.random() * 50) + 20, \" views\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1865,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 1863,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 1834,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex items-center justify-between\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex items-center space-x-1\",\n          children: [/*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: e => {\n              e.stopPropagation();\n              handleLikeClick();\n            },\n            className: `flex items-center space-x-2 px-3 py-2 rounded-lg transition-all duration-200 post-action-button ${isLiked ? 'text-red-400 bg-red-500/10 hover:bg-blue-500/20' : 'text-slate-400 hover:text-red-400 hover:bg-red-500/10'} ${isLiking ? 'scale-110' : ''}`,\n            title: isPublicView ? \"Sign up to like posts\" : \"Like this post\",\n            children: [/*#__PURE__*/_jsxDEV(Heart, {\n              className: `h-5 w-5 transition-all duration-200 ${isLiking ? 'scale-125' : ''}`,\n              fill: isLiked ? 'currentColor' : 'none'\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1884,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"font-medium\",\n              children: likeCount || 'Like'\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1888,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1872,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: e => {\n              e.stopPropagation();\n              if (isPublicView) {\n                onLoginPrompt === null || onLoginPrompt === void 0 ? void 0 : onLoginPrompt();\n              } else {\n                setShowComments(!showComments);\n                setTimeout(() => {\n                  var _commentInputRef$curr;\n                  return (_commentInputRef$curr = commentInputRef.current) === null || _commentInputRef$curr === void 0 ? void 0 : _commentInputRef$curr.focus();\n                }, 100);\n              }\n            },\n            className: \"flex items-center space-x-2 px-3 py-2 rounded-lg text-slate-400 hover:text-indigo-400 hover:bg-indigo-500/10 transition-all duration-200 post-action-button\",\n            title: isPublicView ? \"Sign up to comment\" : \"Comment on this post\",\n            children: [/*#__PURE__*/_jsxDEV(MessageCircle, {\n              className: \"h-5 w-5\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1904,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"font-medium\",\n              children: commentCount || 'Comment'\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1905,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1891,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"relative\",\n            children: /*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: e => {\n                e.stopPropagation();\n                handleShareClick();\n              },\n              className: \"flex items-center space-x-2 px-3 py-2 rounded-lg text-slate-400 hover:text-green-400 hover:bg-green-500/10 transition-all duration-200 post-action-button\",\n              title: isPublicView ? \"Sign up to share\" : \"Share this post\",\n              children: [/*#__PURE__*/_jsxDEV(Share2, {\n                className: \"h-5 w-5\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1917,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"font-medium\",\n                children: \"Share\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1918,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1909,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1908,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 1871,\n          columnNumber: 11\n        }, this), !isDetailView && !isPublicView && /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: e => {\n            e.stopPropagation();\n            if (navigate) navigate(`/post/${post._id}`);\n            onPostClick === null || onPostClick === void 0 ? void 0 : onPostClick(post);\n          },\n          className: \"text-xs text-slate-500 hover:text-slate-400 transition-colors post-action-button flex items-center space-x-1\",\n          children: [/*#__PURE__*/_jsxDEV(Eye, {\n            className: \"h-3 w-3\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1932,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            children: \"View Post\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1933,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 1924,\n          columnNumber: 13\n        }, this), isPublicView && /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: e => {\n            e.stopPropagation();\n            onLoginPrompt();\n          },\n          className: \"text-xs text-slate-500 hover:text-slate-400 transition-colors post-action-button\",\n          children: \"Join to interact \\u2192\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1938,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 1870,\n        columnNumber: 9\n      }, this), showComments && !isPublicView && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"mt-4 pt-4 border-t border-slate-600/30 space-y-4\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex space-x-3\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"w-8 h-8 bg-gradient-to-r from-slate-600 to-zinc-600 rounded-full flex items-center justify-center text-white font-semibold text-xs\",\n            children: safeString(user === null || user === void 0 ? void 0 : (_user$username3 = user.username) === null || _user$username3 === void 0 ? void 0 : _user$username3.slice(0, 2).toUpperCase()) || 'YU'\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1953,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex-1\",\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"flex space-x-2\",\n              children: [/*#__PURE__*/_jsxDEV(\"input\", {\n                ref: commentInputRef,\n                type: \"text\",\n                value: commentText,\n                onChange: e => setCommentText(e.target.value),\n                onKeyPress: e => e.key === 'Enter' && handleCommentSubmit(),\n                onClick: e => e.stopPropagation(),\n                placeholder: \"Write a comment...\",\n                className: \"flex-1 px-4 py-2 bg-black/40 border border-slate-600/50 rounded-full text-white placeholder-slate-400 focus:outline-none focus:ring-2 focus:ring-slate-400 focus:border-slate-400\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1958,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                onClick: e => {\n                  e.stopPropagation();\n                  handleCommentSubmit();\n                },\n                disabled: !commentText.trim(),\n                className: \"px-4 py-2 bg-gradient-to-r from-slate-700 to-zinc-700 text-white rounded-full hover:scale-105 transition-all duration-200 disabled:opacity-50 disabled:cursor-not-allowed post-action-button\",\n                children: /*#__PURE__*/_jsxDEV(Send, {\n                  className: \"h-4 w-4\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1976,\n                  columnNumber: 21\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1968,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1957,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1956,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 1952,\n          columnNumber: 13\n        }, this), post.comments && post.comments.length > 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"space-y-3\",\n          children: post.comments.map((comment, idx) => {\n            var _user$username4, _comment$author;\n            return /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"flex space-x-3\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"w-8 h-8 bg-gradient-to-r from-slate-600 to-zinc-600 rounded-full flex items-center justify-center text-white font-semibold text-xs\",\n                children: safeString(user === null || user === void 0 ? void 0 : (_user$username4 = user.username) === null || _user$username4 === void 0 ? void 0 : _user$username4.slice(0, 2).toUpperCase()) || ((_comment$author = comment.author) === null || _comment$author === void 0 ? void 0 : _comment$author.slice(0, 2).toUpperCase()) || 'UN'\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1986,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"flex-1\",\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"bg-slate-800/50 rounded-2xl px-4 py-2\",\n                  children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"flex items-center space-x-2 mb-1\",\n                    children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                      className: \"font-medium text-white text-sm\",\n                      children: safeString(user === null || user === void 0 ? void 0 : user.username)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 1992,\n                      columnNumber: 27\n                    }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                      className: \"text-slate-500 text-xs\",\n                      children: getDetailedTimestamp(comment.createdAt || new Date()).relative\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 1995,\n                      columnNumber: 27\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1991,\n                    columnNumber: 25\n                  }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                    className: \"text-slate-200 text-sm\",\n                    children: comment.content\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1999,\n                    columnNumber: 25\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1990,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"flex items-center space-x-4 mt-1 px-4\",\n                  children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                    onClick: e => e.stopPropagation(),\n                    className: \"text-xs text-slate-500 hover:text-slate-400 transition-colors post-action-button\",\n                    children: \"Like\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 2002,\n                    columnNumber: 25\n                  }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                    onClick: e => e.stopPropagation(),\n                    className: \"text-xs text-slate-500 hover:text-slate-400 transition-colors post-action-button\",\n                    children: \"Reply\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 2008,\n                    columnNumber: 25\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 2001,\n                  columnNumber: 23\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 1989,\n                columnNumber: 21\n              }, this)]\n            }, idx, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1985,\n              columnNumber: 19\n            }, this);\n          })\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1983,\n          columnNumber: 15\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 1951,\n        columnNumber: 11\n      }, this), showMoreMenu && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"fixed inset-0 z-0\",\n        onClick: e => {\n          e.stopPropagation();\n          setShowMoreMenu(false);\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 2024,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 1560,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(ShareModal, {\n      post: post,\n      isOpen: showShareModal,\n      onClose: () => setShowShareModal(false)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 2034,\n      columnNumber: 7\n    }, this), showWhoLiked && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50\",\n      onClick: () => setShowWhoLiked(false),\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"bg-gradient-to-r from-slate-900/95 to-zinc-900/95 backdrop-blur-md rounded-2xl border border-slate-600/50 shadow-2xl max-w-md w-full mx-4 max-h-96 overflow-hidden\",\n        onClick: e => e.stopPropagation(),\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex items-center justify-between p-6 border-b border-slate-600/30\",\n          children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n            className: \"text-xl font-semibold text-white\",\n            children: \"Liked by\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 2044,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: () => setShowWhoLiked(false),\n            className: \"p-2 text-slate-400 hover:text-white hover:bg-slate-700/50 rounded-lg transition-colors\",\n            children: /*#__PURE__*/_jsxDEV(X, {\n              className: \"h-5 w-5\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 2049,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 2045,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 2043,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"p-4 overflow-y-auto max-h-80\",\n          children: usersWhoLiked.length === 0 ? /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"text-center text-slate-400 py-8\",\n            children: [/*#__PURE__*/_jsxDEV(Heart, {\n              className: \"h-12 w-12 mx-auto mb-3 opacity-50\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 2056,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              children: \"No likes yet\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 2057,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 2055,\n            columnNumber: 17\n          }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"space-y-3\",\n            children: usersWhoLiked.map((likeUser, index) => {\n              var _likeUser$username;\n              return /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"flex items-center space-x-3 p-3 rounded-xl hover:bg-slate-800/30 transition-colors cursor-pointer\",\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"w-10 h-10 bg-gradient-to-r from-slate-600 to-zinc-600 rounded-full flex items-center justify-center text-white font-semibold text-sm shadow-lg\",\n                  children: ((_likeUser$username = likeUser.username) === null || _likeUser$username === void 0 ? void 0 : _likeUser$username.slice(0, 2).toUpperCase()) || likeUser.avatar || 'ðŸ‘¤'\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 2063,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"flex-1\",\n                  children: /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"flex items-center space-x-2\",\n                    children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                      className: \"font-medium text-white\",\n                      children: likeUser.username\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 2069,\n                      columnNumber: 27\n                    }, this), likeUser.verified && /*#__PURE__*/_jsxDEV(\"div\", {\n                      className: \"w-4 h-4 bg-gradient-to-r from-blue-500 to-indigo-600 rounded-full flex items-center justify-center\",\n                      children: /*#__PURE__*/_jsxDEV(\"span\", {\n                        className: \"text-white text-xs\",\n                        children: \"\\u2713\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 2072,\n                        columnNumber: 31\n                      }, this)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 2071,\n                      columnNumber: 29\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 2068,\n                    columnNumber: 25\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 2067,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"text-red-400\",\n                  children: /*#__PURE__*/_jsxDEV(Heart, {\n                    className: \"h-5 w-5\",\n                    fill: \"currentColor\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 2079,\n                    columnNumber: 25\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 2078,\n                  columnNumber: 23\n                }, this)]\n              }, index, true, {\n                fileName: _jsxFileName,\n                lineNumber: 2062,\n                columnNumber: 21\n              }, this);\n            })\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 2060,\n            columnNumber: 17\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 2053,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 2042,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 2041,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true);\n}, \"AdjvCJ/CwwVg5SDepaRkPvhOBFs=\")), \"AdjvCJ/CwwVg5SDepaRkPvhOBFs=\");\n\n// âœ… MAIN APP COMPONENT - Enhanced with Better State Management  \n_c10 = Post;\nexport default function App() {\n  _s7();\n  const {\n    currentPath,\n    navigate\n  } = useSimpleRouter();\n  const [user, setUser] = useState(null);\n  const [posts, setPosts] = useState([]);\n  const [publicPosts, setPublicPosts] = useState([]);\n  const [currentView, setCurrentView] = useState('landing');\n  const [isLoggedIn, setIsLoggedIn] = useState(false);\n  const [newPost, setNewPost] = useState('');\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState('');\n  const [selectedPost, setSelectedPost] = useState(null);\n  const [apiStatus, setApiStatus] = useState('checking');\n\n  // Login/Register forms\n  const [loginForm, setLoginForm] = useState({\n    email: '',\n    password: ''\n  });\n  const [registerForm, setRegisterForm] = useState({\n    username: '',\n    email: '',\n    password: ''\n  });\n  const [showRegister, setShowRegister] = useState(false);\n  const fileInputRef = useRef(null);\n\n  // Check authentication on mount\n  useEffect(() => {\n    const token = localStorage.getItem('authToken');\n    const userData = localStorage.getItem('userData');\n    if (token && userData) {\n      try {\n        const parsedUser = JSON.parse(userData);\n        setUser(parsedUser);\n        setIsLoggedIn(true);\n        setCurrentView('feed');\n        checkApiStatus();\n        fetchPosts();\n      } catch (error) {\n        console.error('Error parsing user data:', error);\n        localStorage.removeItem('authToken');\n        localStorage.removeItem('userData');\n      }\n    } else {\n      setCurrentView('landing');\n    }\n  }, []);\n  const checkApiStatus = async () => {\n    try {\n      const data = await apiRequest('/health');\n      setApiStatus(data.status === 'OK' ? 'online' : 'offline');\n    } catch (error) {\n      console.error('API health check failed:', error);\n      setApiStatus('offline');\n    }\n  };\n\n  // âœ… ENHANCED: Authenticated posts fetch\n  const fetchPosts = async () => {\n    try {\n      const data = await apiRequest('/posts');\n      setPosts(Array.isArray(data) ? data : []);\n    } catch (error) {\n      console.error('Error fetching posts:', error);\n      setPosts([]);\n    }\n  };\n\n  // âœ… ENHANCED: Public posts fetch function\n  const fetchPublicPosts = async () => {\n    try {\n      console.log('ðŸ”„ Fetching public posts from:', `${API_BASE}/posts/public`);\n      const data = await apiRequest('/posts/public');\n      console.log('âœ… Public posts fetched successfully:', data.length, 'posts');\n      setPublicPosts(Array.isArray(data) ? data : []);\n    } catch (error) {\n      console.error('âŒ Error fetching public posts:', error);\n      setPublicPosts([]);\n    }\n  };\n  const handleLogin = async () => {\n    if (!loginForm.email || !loginForm.password) {\n      setError('Please fill in all fields');\n      return;\n    }\n    setLoading(true);\n    setError('');\n    try {\n      const data = await apiRequest('/auth/login', {\n        method: 'POST',\n        body: JSON.stringify(loginForm)\n      });\n      localStorage.setItem('authToken', data.token);\n      localStorage.setItem('userData', JSON.stringify(data.user));\n      setUser(data.user);\n      setIsLoggedIn(true);\n      setCurrentView('feed');\n      setLoginForm({\n        email: '',\n        password: ''\n      });\n      await fetchPosts();\n    } catch (error) {\n      console.error('Login error:', error);\n      setError(error.message || 'Login failed');\n    } finally {\n      setLoading(false);\n    }\n  };\n  const handleRegister = async () => {\n    if (!registerForm.username || !registerForm.email || !registerForm.password) {\n      setError('Please fill in all fields');\n      return;\n    }\n    setLoading(true);\n    setError('');\n    try {\n      const data = await apiRequest('/auth/register', {\n        method: 'POST',\n        body: JSON.stringify(registerForm)\n      });\n      localStorage.setItem('authToken', data.token);\n      localStorage.setItem('userData', JSON.stringify(data.user));\n      setUser(data.user);\n      setIsLoggedIn(true);\n      setCurrentView('feed');\n      setRegisterForm({\n        username: '',\n        email: '',\n        password: ''\n      });\n      await fetchPosts();\n    } catch (error) {\n      console.error('Registration error:', error);\n      setError(error.message || 'Registration failed');\n    } finally {\n      setLoading(false);\n    }\n  };\n  const handleLogout = () => {\n    localStorage.removeItem('authToken');\n    localStorage.removeItem('userData');\n    setUser(null);\n    setIsLoggedIn(false);\n    setCurrentView('landing');\n    setPosts([]);\n    setPublicPosts([]);\n    navigate('/');\n  };\n  const handlePost = async (uploadedFiles = []) => {\n    if (!newPost.trim() && uploadedFiles.length === 0) return;\n    setLoading(true);\n    try {\n      await apiRequest('/posts', {\n        method: 'POST',\n        body: JSON.stringify({\n          content: newPost,\n          mediaFiles: uploadedFiles\n        })\n      });\n      setNewPost('');\n      await fetchPosts();\n    } catch (error) {\n      console.error('Error creating post:', error);\n      setError('Failed to create post. Please try again.');\n    } finally {\n      setLoading(false);\n    }\n  };\n  const handleLike = async postId => {\n    try {\n      await apiRequest(`/posts/${postId}/like`, {\n        method: 'POST'\n      });\n      await fetchPosts();\n    } catch (error) {\n      console.error('Error liking post:', error);\n    }\n  };\n  const handleComment = async (postId, content) => {\n    try {\n      await apiRequest(`/posts/${postId}/comment`, {\n        method: 'POST',\n        body: JSON.stringify({\n          content\n        })\n      });\n      await fetchPosts();\n    } catch (error) {\n      console.error('Error commenting:', error);\n    }\n  };\n  const handleBrowsePublic = () => {\n    console.log('ðŸ”„ handleBrowsePublic called - switching to public view');\n    setCurrentView('public');\n    fetchPublicPosts();\n  };\n  const handleLoginPrompt = () => {\n    setCurrentView('landing');\n  };\n  const handlePostClick = post => {\n    setSelectedPost(post);\n    setCurrentView('post');\n  };\n  const handleBackToFeed = () => {\n    setSelectedPost(null);\n    setCurrentView('feed');\n    navigate('/');\n  };\n\n  // Router handling\n  useEffect(() => {\n    if (currentPath.startsWith('/post/') && isLoggedIn) {\n      const postId = currentPath.split('/')[2];\n      const post = posts.find(p => p._id === postId);\n      if (post) {\n        setSelectedPost(post);\n        setCurrentView('post');\n      }\n    }\n  }, [currentPath, posts, isLoggedIn]);\n  const handleFileUpload = async files => {\n    console.log('File upload triggered:', files === null || files === void 0 ? void 0 : files.length);\n  };\n\n  // âœ… RENDER: Main app with enhanced error boundaries and loading states\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"min-h-screen bg-gradient-to-br from-gray-900 via-slate-900 to-zinc-900\",\n    children: [currentView === 'landing' && /*#__PURE__*/_jsxDEV(LandingPage, {\n      loginForm: loginForm,\n      setLoginForm: setLoginForm,\n      registerForm: registerForm,\n      setRegisterForm: setRegisterForm,\n      showRegister: showRegister,\n      setShowRegister: setShowRegister,\n      handleLogin: handleLogin,\n      handleRegister: handleRegister,\n      loading: loading,\n      error: error,\n      onBrowsePublic: handleBrowsePublic\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 2329,\n      columnNumber: 9\n    }, this), (currentView === 'feed' || currentView === 'profile' || currentView === 'chat' || currentView === 'post' || currentView === 'public') && /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: [/*#__PURE__*/_jsxDEV(Header, {\n        currentView: currentView,\n        setCurrentView: setCurrentView,\n        apiStatus: apiStatus,\n        handleLogout: handleLogout,\n        user: user,\n        selectedPost: selectedPost,\n        onBackToFeed: handleBackToFeed,\n        navigate: navigate\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 2346,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"main\", {\n        className: \"container mx-auto px-4 py-6 max-w-2xl\",\n        children: currentView === 'post' && selectedPost ? /*#__PURE__*/_jsxDEV(Post, {\n          post: selectedPost,\n          user: user,\n          handleLike: handleLike,\n          handleComment: handleComment,\n          handleShare: () => {},\n          onPostClick: handlePostClick,\n          isDetailView: true,\n          navigate: navigate\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 2359,\n          columnNumber: 15\n        }, this) : currentView === 'public' ? /*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"text-center mb-6\",\n            children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n              className: \"text-2xl font-bold text-white mb-2\",\n              children: \"Public Feed\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 2372,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"text-slate-400\",\n              children: \"Browse posts from the SickoScoop community\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 2373,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: () => setCurrentView('landing'),\n              className: \"mt-3 text-sm text-slate-500 hover:text-slate-400 underline\",\n              children: \"\\u2190 Back to login\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 2374,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 2371,\n            columnNumber: 17\n          }, this), publicPosts.length === 0 ? /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"text-center py-12\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"animate-spin rounded-full h-8 w-8 border-b-2 border-white mx-auto mb-4\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 2384,\n              columnNumber: 21\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"text-slate-400 mb-4\",\n              children: \"Loading public posts...\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 2385,\n              columnNumber: 21\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: fetchPublicPosts,\n              className: \"text-sm text-blue-400 hover:text-blue-300 underline\",\n              children: \"Retry loading posts\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 2386,\n              columnNumber: 21\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 2383,\n            columnNumber: 19\n          }, this) : publicPosts.map(post => /*#__PURE__*/_jsxDEV(Post, {\n            post: post,\n            user: null,\n            handleLike: () => {},\n            handleComment: () => {},\n            handleShare: () => {},\n            isPublicView: true,\n            onLoginPrompt: handleLoginPrompt,\n            onPostClick: handlePostClick,\n            navigate: navigate\n          }, post._id, false, {\n            fileName: _jsxFileName,\n            lineNumber: 2395,\n            columnNumber: 21\n          }, this))]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 2370,\n          columnNumber: 15\n        }, this) : currentView === 'profile' ? /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"text-center py-12\",\n          children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n            className: \"text-2xl font-bold text-white mb-4\",\n            children: \"Profile\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 2412,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"text-slate-400\",\n            children: \"Profile features coming soon!\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 2413,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 2411,\n          columnNumber: 15\n        }, this) : currentView === 'chat' ? /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"text-center py-12\",\n          children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n            className: \"text-2xl font-bold text-white mb-4\",\n            children: \"Chat\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 2417,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"text-slate-400\",\n            children: \"Chat features coming soon!\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 2418,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 2416,\n          columnNumber: 15\n        }, this) : /*#__PURE__*/_jsxDEV(_Fragment, {\n          children: [isLoggedIn && /*#__PURE__*/_jsxDEV(PostCreator, {\n            user: user,\n            newPost: newPost,\n            setNewPost: setNewPost,\n            handlePost: handlePost,\n            loading: loading,\n            fileInputRef: fileInputRef,\n            handleFileUpload: handleFileUpload\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 2423,\n            columnNumber: 19\n          }, this), posts.length === 0 ? /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"text-center py-12\",\n            children: [/*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"text-slate-400 mb-4\",\n              children: \"No posts yet\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 2436,\n              columnNumber: 21\n            }, this), isLoggedIn && /*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"text-slate-500 text-sm\",\n              children: \"Be the first to share something!\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 2438,\n              columnNumber: 23\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 2435,\n            columnNumber: 19\n          }, this) : posts.map(post => /*#__PURE__*/_jsxDEV(Post, {\n            post: post,\n            user: user,\n            handleLike: handleLike,\n            handleComment: handleComment,\n            handleShare: () => {},\n            onPostClick: handlePostClick,\n            navigate: navigate\n          }, post._id, false, {\n            fileName: _jsxFileName,\n            lineNumber: 2443,\n            columnNumber: 21\n          }, this))]\n        }, void 0, true)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 2357,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 2327,\n    columnNumber: 5\n  }, this);\n}\n_s7(App, \"pSDJpRIL42DmAznONnHF0SxMrlk=\", false, function () {\n  return [useSimpleRouter];\n});\n_c11 = App;\nvar _c, _c2, _c3, _c4, _c5, _c6, _c7, _c8, _c9, _c0, _c1, _c10, _c11;\n$RefreshReg$(_c, \"ShareModal$React.memo\");\n$RefreshReg$(_c2, \"ShareModal\");\n$RefreshReg$(_c3, \"EnhancedVideoPlayer$React.memo\");\n$RefreshReg$(_c4, \"EnhancedVideoPlayer\");\n$RefreshReg$(_c5, \"LandingPage$React.memo\");\n$RefreshReg$(_c6, \"LandingPage\");\n$RefreshReg$(_c7, \"Header$React.memo\");\n$RefreshReg$(_c8, \"Header\");\n$RefreshReg$(_c9, \"PostCreator$React.memo\");\n$RefreshReg$(_c0, \"PostCreator\");\n$RefreshReg$(_c1, \"Post$React.memo\");\n$RefreshReg$(_c10, \"Post\");\n$RefreshReg$(_c11, \"App\");","map":{"version":3,"names":["React","useState","useRef","useEffect","useCallback","Heart","MessageCircle","Share2","Send","Image","Video","FileText","Mic","Search","Settings","X","MoreHorizontal","Flag","Bookmark","Eye","ArrowLeft","Clock","Users","Copy","ExternalLink","Twitter","Facebook","Linkedin","CheckCircle","AlertCircle","jsxDEV","_jsxDEV","Fragment","_Fragment","safeString","value","String","safeNumber","Number","getApiBase","hostname","window","location","port","includes","API_BASE","console","log","apiBase","environment","generatePostUrl","postId","baseUrl","getDetailedTimestamp","date","now","Date","postDate","diffInMinutes","Math","floor","relative","absolute","toLocaleTimeString","toLocaleString","diffInHours","diffInDays","toLocaleDateString","diffInWeeks","apiRequest","endpoint","options","url","token","localStorage","getItem","defaultOptions","headers","body","FormData","method","hasToken","hasBody","response","fetch","status","statusText","ok","errorData","json","catch","Error","message","error","stack","ShareModal","_s","memo","_c","post","isOpen","onClose","_post$userId","_post$userId2","_post$userId2$usernam","_post$userId3","copied","setCopied","postUrl","_id","shareText","userId","username","content","substring","length","handleCopyLink","navigator","clipboard","writeText","setTimeout","textArea","document","createElement","appendChild","select","execCommand","removeChild","handleSocialShare","platform","encodedText","encodeURIComponent","encodedUrl","shareUrls","twitter","facebook","linkedin","reddit","email","open","handleNativeShare","share","title","text","className","onClick","children","e","stopPropagation","fileName","_jsxFileName","lineNumber","columnNumber","slice","toUpperCase","type","readOnly","_c2","EnhancedVideoPlayer","_s2","_c3","file","isLoading","setIsLoading","hasError","setHasError","isPlaying","setIsPlaying","videoRef","handleLoadedData","handleError","handlePlay","handlePause","handleClick","current","pause","play","filename","href","target","rel","ref","onLoadedData","onError","onPlay","onPause","preload","playsInline","src","mimeType","_c4","useSimpleRouter","_s3","currentPath","setCurrentPath","pathname","handlePopState","addEventListener","removeEventListener","navigate","path","history","pushState","LandingPage","_c5","loginForm","setLoginForm","registerForm","setRegisterForm","showRegister","setShowRegister","handleLogin","handleRegister","loading","onBrowsePublic","style","clipPath","placeholder","onChange","prev","onKeyDown","key","autoComplete","password","disabled","icon","desc","map","feature","idx","_c6","Header","_s4","_c7","currentView","setCurrentView","apiStatus","handleLogout","user","selectedPost","onBackToFeed","_selectedPost$userId","_user$username","isMobileMenuOpen","setIsMobileMenuOpen","isSearchOpen","setIsSearchOpen","autoFocus","_c8","PostCreator","_s5","_c9","newPost","setNewPost","handlePost","fileInputRef","handleFileUpload","_user$username2","uploadedFiles","setUploadedFiles","uploadProgress","setUploadProgress","isUploading","setIsUploading","uploadError","setUploadError","pdfInputRef","audioInputRef","videoInputRef","photoInputRef","FILE_LIMITS","image","max","label","video","audio","pdf","validateFile","limit","valid","size","charAt","toFixed","handleFileSelect","files","fileArray","Array","from","allowedTypes","validFiles","errors","push","name","validation","join","uploadFiles","formData","forEach","append","progressInterval","totalSize","reduce","sum","totalSizeMB","sizeLabel","startTime","progress","setInterval","elapsed","estimatedTotal","min","round","result","clearInterval","isArray","removeFile","index","filter","_","i","clearError","hasContent","trim","handleSubmitPost","getFileIcon","icons","color","bg","rows","undefined","width","padStart","fileStyle","trackingId","_pdfInputRef$current","click","_audioInputRef$curren","_videoInputRef$curren","_photoInputRef$curren","accept","multiple","_c0","Post","_s6","_c1","handleLike","handleComment","handleShare","isPublicView","onLoginPrompt","onPostClick","isDetailView","_post$likes","_post$likes2","_post$comments","_post$userId4","_post$userId4$usernam","_post$userId5","_post$userId6","_post$userId7","_user$username3","showComments","setShowComments","commentText","setCommentText","showShareModal","setShowShareModal","showMoreMenu","setShowMoreMenu","showWhoLiked","setShowWhoLiked","isLiking","setIsLiking","commentInputRef","timestamp","createdAt","mediaFiles","originalName","trackingUrl","fullFile","detectFileType","isPDF","toLowerCase","endsWith","reasons","typeIsDocument","typeIsPdf","mimeTypeIsPdf","filenameEndsPdf","originalNameEndsPdf","category","displayName","bgColor","textColor","borderColor","hoverBgColor","hoverTextColor","hoverBorderColor","isTracked","startsWith","warn","handleLikeClick","handleCommentSubmit","handleShareClick","handleWhoLikedClick","handlePostContentClick","closest","isLiked","likes","some","like","id","likeCount","commentCount","comments","usersWhoLiked","useMemo","avatar","verified","handlePDFClick","transparencyScore","fileType","alt","display","controls","fill","random","_commentInputRef$curr","focus","onKeyPress","comment","_user$username4","_comment$author","author","likeUser","_likeUser$username","_c10","App","_s7","setUser","posts","setPosts","publicPosts","setPublicPosts","isLoggedIn","setIsLoggedIn","setLoading","setError","setSelectedPost","setApiStatus","userData","parsedUser","JSON","parse","checkApiStatus","fetchPosts","removeItem","data","fetchPublicPosts","stringify","setItem","handleBrowsePublic","handleLoginPrompt","handlePostClick","handleBackToFeed","split","find","p","_c11","$RefreshReg$"],"sources":["/Users/te/Desktop/sickoscoop/frontend/src/App.js"],"sourcesContent":["// App.js - FIXED VERSION with Dynamic Environment Detection\nimport React, { useState, useRef, useEffect, useCallback } from 'react';\nimport { Heart, MessageCircle, Share2, Send, Image, Video, FileText, Mic, Search, Settings, X, MoreHorizontal, Flag, Bookmark, Eye, ArrowLeft, Clock, Users, Copy, ExternalLink, Twitter, Facebook, Linkedin, CheckCircle, AlertCircle } from 'lucide-react';\n\nconst safeString = (value) => value ? String(value) : '';\nconst safeNumber = (value) => Number(value) || 0;\n\n// âœ… FIXED: Dynamic API Base URL Detection\nconst getApiBase = () => {\n  const hostname = window.location.hostname;\n  const port = window.location.port;\n  \n  // Production detection\n  if (hostname.includes('sickoscoop') || hostname.includes('netlify.app') || hostname.includes('digitalocean')) {\n    return 'https://sickoscoop-backend-deo45.ondigitalocean.app/api';\n  }\n  \n  // Development detection\n  if (hostname === 'localhost' || hostname === '127.0.0.1') {\n    // If frontend is on 3000, backend is on 3001\n    if (port === '3000') {\n      return 'http://localhost:3001/api';\n    }\n    // If frontend is on 3001 (same port as backend), use relative URLs\n    if (port === '3001') {\n      return '/api';\n    }\n  }\n  \n  // Fallback to production\n  return 'https://sickoscoop-backend-deo45.ondigitalocean.app/api';\n};\n\nconst API_BASE = getApiBase();\n\nconsole.log('ðŸŒ Environment Detection:', {\n  hostname: window.location.hostname,\n  port: window.location.port,\n  apiBase: API_BASE,\n  environment: API_BASE.includes('localhost') ? 'development' : 'production'\n});\n\n// Enhanced URL generation for posts\nconst generatePostUrl = (postId) => {\n  const baseUrl = window.location.hostname === 'localhost' \n    ? 'http://localhost:3000'\n    : 'https://sickoscoop.netlify.app';\n  return `${baseUrl}/post/${postId}`;\n};\n\n// Enhanced timestamp function with more details\nconst getDetailedTimestamp = (date) => {\n  const now = new Date();\n  const postDate = new Date(date);\n  const diffInMinutes = Math.floor((now - postDate) / (1000 * 60));\n  \n  if (diffInMinutes < 1) return { relative: 'Just now', absolute: postDate.toLocaleTimeString() };\n  if (diffInMinutes < 60) return { \n    relative: `${diffInMinutes}m ago`, \n    absolute: postDate.toLocaleString() \n  };\n  \n  const diffInHours = Math.floor(diffInMinutes / 60);\n  if (diffInHours < 24) return { \n    relative: `${diffInHours}h ago`, \n    absolute: postDate.toLocaleString() \n  };\n  \n  const diffInDays = Math.floor(diffInHours / 24);\n  if (diffInDays < 7) return { \n    relative: `${diffInDays}d ago`, \n    absolute: postDate.toLocaleDateString() \n  };\n  \n  const diffInWeeks = Math.floor(diffInDays / 7);\n  if (diffInWeeks < 4) return { \n    relative: `${diffInWeeks}w ago`, \n    absolute: postDate.toLocaleDateString() \n  };\n  \n  return { \n    relative: postDate.toLocaleDateString(), \n    absolute: postDate.toLocaleString() \n  };\n};\n\n// Enhanced API helper with better error handling\nconst apiRequest = async (endpoint, options = {}) => {\n  const url = `${API_BASE}${endpoint}`;\n  const token = localStorage.getItem('authToken');\n  \n  const defaultOptions = {\n    headers: {\n      'Content-Type': 'application/json',\n      ...(token && { 'Authorization': `Bearer ${token}` }),\n      ...options.headers\n    },\n    ...options\n  };\n\n  // Remove Content-Type for FormData\n  if (options.body instanceof FormData) {\n    delete defaultOptions.headers['Content-Type'];\n  }\n\n  console.log('ðŸŒ API Request:', {\n    url,\n    method: options.method || 'GET',\n    hasToken: !!token,\n    hasBody: !!options.body\n  });\n\n  try {\n    const response = await fetch(url, defaultOptions);\n    \n    console.log('ðŸ“¡ API Response:', {\n      url,\n      status: response.status,\n      statusText: response.statusText,\n      ok: response.ok\n    });\n\n    if (!response.ok) {\n      const errorData = await response.json().catch(() => ({}));\n      throw new Error(errorData.message || `HTTP ${response.status}: ${response.statusText}`);\n    }\n\n    return await response.json();\n  } catch (error) {\n    console.error('âŒ API Request Failed:', {\n      url,\n      error: error.message,\n      stack: error.stack\n    });\n    throw error;\n  }\n};\n\n// Enhanced Share Modal Component\nconst ShareModal = React.memo(({ post, isOpen, onClose }) => {\n  const [copied, setCopied] = useState(false);\n  const postUrl = generatePostUrl(post._id);\n  const shareText = `Check out this post by ${post.userId?.username || 'someone'} on SickoScoop: \"${post.content.substring(0, 100)}${post.content.length > 100 ? '...' : ''}\"`;\n\n  const handleCopyLink = async () => {\n    try {\n      await navigator.clipboard.writeText(postUrl);\n      setCopied(true);\n      setTimeout(() => setCopied(false), 2000);\n    } catch (error) {\n      console.error('Failed to copy:', error);\n      const textArea = document.createElement('textarea');\n      textArea.value = postUrl;\n      document.body.appendChild(textArea);\n      textArea.select();\n      document.execCommand('copy');\n      document.body.removeChild(textArea);\n      setCopied(true);\n      setTimeout(() => setCopied(false), 2000);\n    }\n  };\n\n  const handleSocialShare = (platform) => {\n    const encodedText = encodeURIComponent(shareText);\n    const encodedUrl = encodeURIComponent(postUrl);\n    \n    const shareUrls = {\n      twitter: `https://twitter.com/intent/tweet?text=${encodedText}&url=${encodedUrl}`,\n      facebook: `https://www.facebook.com/sharer/sharer.php?u=${encodedUrl}`,\n      linkedin: `https://www.linkedin.com/sharing/share-offsite/?url=${encodedUrl}`,\n      reddit: `https://reddit.com/submit?url=${encodedUrl}&title=${encodedText}`,\n      email: `mailto:?subject=${encodeURIComponent('Check out this SickoScoop post')}&body=${encodedText}%0A%0A${encodedUrl}`\n    };\n\n    if (shareUrls[platform]) {\n      window.open(shareUrls[platform], '_blank', 'width=600,height=400');\n    }\n  };\n\n  const handleNativeShare = async () => {\n    if (navigator.share) {\n      try {\n        await navigator.share({\n          title: 'SickoScoop Post',\n          text: shareText,\n          url: postUrl,\n        });\n      } catch (error) {\n        console.error('Error sharing:', error);\n      }\n    }\n  };\n\n  if (!isOpen) return null;\n\n  return (\n    <div className=\"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50\" onClick={onClose}>\n      <div className=\"bg-gradient-to-r from-slate-900/95 to-zinc-900/95 backdrop-blur-md rounded-2xl border border-slate-600/50 shadow-2xl max-w-md w-full mx-4\" onClick={e => e.stopPropagation()}>\n        <div className=\"flex items-center justify-between p-6 border-b border-slate-600/30\">\n          <h3 className=\"text-xl font-semibold text-white\">Share Post</h3>\n          <button \n            onClick={onClose}\n            className=\"p-2 text-slate-400 hover:text-white hover:bg-slate-700/50 rounded-lg transition-colors\"\n          >\n            <X className=\"h-5 w-5\" />\n          </button>\n        </div>\n        \n        <div className=\"p-6\">\n          <div className=\"bg-slate-800/50 rounded-lg p-4 mb-6\">\n            <div className=\"flex items-center space-x-3 mb-3\">\n              <div className=\"w-8 h-8 bg-gradient-to-r from-slate-600 to-zinc-600 rounded-full flex items-center justify-center text-white font-semibold text-xs\">\n                {post.userId?.username?.slice(0, 2).toUpperCase() || 'UN'}\n              </div>\n              <span className=\"text-white font-medium\">{post.userId?.username || 'Unknown User'}</span>\n            </div>\n            <p className=\"text-slate-300 text-sm line-clamp-3\">{post.content}</p>\n          </div>\n\n          <div className=\"mb-6\">\n            <label className=\"block text-sm font-medium text-slate-300 mb-2\">Post Link</label>\n            <div className=\"flex space-x-2\">\n              <input\n                type=\"text\"\n                value={postUrl}\n                readOnly\n                className=\"flex-1 px-3 py-2 bg-black/40 border border-slate-600/50 rounded-lg text-white text-sm focus:outline-none focus:ring-2 focus:ring-amber-500/50\"\n              />\n              <button\n                onClick={handleCopyLink}\n                className={`px-4 py-2 rounded-lg transition-all duration-200 flex items-center space-x-2 ${\n                  copied \n                    ? 'bg-green-600 text-white' \n                    : 'bg-slate-700 text-slate-300 hover:bg-slate-600'\n                }`}\n              >\n                <Copy className=\"h-4 w-4\" />\n                <span>{copied ? 'Copied!' : 'Copy'}</span>\n              </button>\n            </div>\n          </div>\n\n          <div className=\"space-y-4\">\n            <label className=\"block text-sm font-medium text-slate-300\">Share to</label>\n            \n            {navigator.share && (\n              <button\n                onClick={handleNativeShare}\n                className=\"w-full flex items-center space-x-3 p-3 bg-slate-700/50 hover:bg-slate-700/70 rounded-lg transition-colors text-white\"\n              >\n                <Share2 className=\"h-5 w-5\" />\n                <span>Share via device</span>\n              </button>\n            )}\n\n            <div className=\"grid grid-cols-2 gap-3\">\n              <button\n                onClick={() => handleSocialShare('twitter')}\n                className=\"flex items-center space-x-3 p-3 bg-blue-600/20 hover:bg-blue-600/30 rounded-lg transition-colors text-blue-400 border border-blue-600/30\"\n              >\n                <Twitter className=\"h-5 w-5\" />\n                <span>Twitter</span>\n              </button>\n              \n              <button\n                onClick={() => handleSocialShare('facebook')}\n                className=\"flex items-center space-x-3 p-3 bg-blue-700/20 hover:bg-blue-700/30 rounded-lg transition-colors text-blue-300 border border-blue-700/30\"\n              >\n                <Facebook className=\"h-5 w-5\" />\n                <span>Facebook</span>\n              </button>\n              \n              <button\n                onClick={() => handleSocialShare('linkedin')}\n                className=\"flex items-center space-x-3 p-3 bg-blue-800/20 hover:bg-blue-800/30 rounded-lg transition-colors text-blue-200 border border-blue-800/30\"\n              >\n                <Linkedin className=\"h-5 w-5\" />\n                <span>LinkedIn</span>\n              </button>\n              \n              <button\n                onClick={() => handleSocialShare('email')}\n                className=\"flex items-center space-x-3 p-3 bg-slate-700/20 hover:bg-slate-700/30 rounded-lg transition-colors text-slate-300 border border-slate-700/30\"\n              >\n                <ExternalLink className=\"h-5 w-5\" />\n                <span>Email</span>\n              </button>\n            </div>\n\n            <div className=\"pt-4 border-t border-slate-600/30\">\n              <button\n                onClick={() => handleSocialShare('reddit')}\n                className=\"w-full flex items-center space-x-3 p-3 bg-orange-600/20 hover:bg-orange-600/30 rounded-lg transition-colors text-orange-400 border border-orange-600/30\"\n              >\n                <ExternalLink className=\"h-5 w-5\" />\n                <span>Share to Reddit</span>\n              </button>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n});\n\n// Enhanced Video Player Component\nconst EnhancedVideoPlayer = React.memo(({ file }) => {\n  const [isLoading, setIsLoading] = useState(true);\n  const [hasError, setHasError] = useState(false);\n  const [isPlaying, setIsPlaying] = useState(false);\n  const videoRef = useRef(null);\n\n  const handleLoadedData = () => {\n    setIsLoading(false);\n    setHasError(false);\n  };\n\n  const handleError = () => {\n    setIsLoading(false);\n    setHasError(true);\n  };\n\n  const handlePlay = () => {\n    setIsPlaying(true);\n  };\n\n  const handlePause = () => {\n    setIsPlaying(false);\n  };\n\n  const handleClick = (e) => {\n    e.stopPropagation();\n    if (videoRef.current) {\n      if (isPlaying) {\n        videoRef.current.pause();\n      } else {\n        videoRef.current.play();\n      }\n    }\n  };\n\n  return (\n    <div className=\"relative w-full bg-black rounded-xl overflow-hidden\">\n      {isLoading && (\n        <div className=\"absolute inset-0 flex items-center justify-center bg-slate-800/50 z-10\">\n          <div className=\"animate-spin rounded-full h-8 w-8 border-b-2 border-white\"></div>\n          <span className=\"ml-2 text-white text-sm\">Loading video...</span>\n        </div>\n      )}\n      \n      {hasError ? (\n        <div className=\"p-8 text-center bg-slate-800/50\">\n          <div className=\"text-red-400 mb-2\">\n            <Video className=\"h-8 w-8 mx-auto mb-2\" />\n            <p>Unable to load video</p>\n          </div>\n          <p className=\"text-slate-400 text-sm\">{file.filename}</p>\n          <a \n            href={file.url} \n            target=\"_blank\" \n            rel=\"noopener noreferrer\"\n            className=\"mt-2 inline-block text-blue-400 hover:text-blue-300 text-sm underline\"\n            onClick={(e) => e.stopPropagation()}\n          >\n            Download video\n          </a>\n        </div>\n      ) : (\n        <video\n          ref={videoRef}\n          className=\"w-full h-auto max-h-96 cursor-pointer\"\n          onLoadedData={handleLoadedData}\n          onError={handleError}\n          onPlay={handlePlay}\n          onPause={handlePause}\n          onClick={handleClick}\n          preload=\"metadata\"\n          playsInline\n        >\n          <source src={file.url} type={file.mimeType || file.type} />\n          Your browser does not support video playback.\n        </video>\n      )}\n      \n      {!isLoading && !hasError && (\n        <div className=\"absolute bottom-2 left-2 bg-black/60 rounded px-2 py-1 text-white text-xs\">\n          {file.filename}\n        </div>\n      )}\n    </div>\n  );\n});\n\n// URL Router simulation\nconst useSimpleRouter = () => {\n  const [currentPath, setCurrentPath] = useState(window.location.pathname);\n  \n  useEffect(() => {\n    const handlePopState = () => {\n      setCurrentPath(window.location.pathname);\n    };\n    \n    window.addEventListener('popstate', handlePopState);\n    return () => window.removeEventListener('popstate', handlePopState);\n  }, []);\n  \n  const navigate = (path) => {\n    window.history.pushState({}, '', path);\n    setCurrentPath(path);\n  };\n  \n  return { currentPath, navigate };\n};\n\n// Landing Page Component\nconst LandingPage = React.memo(({ \n  loginForm, \n  setLoginForm, \n  registerForm, \n  setRegisterForm, \n  showRegister, \n  setShowRegister, \n  handleLogin, \n  handleRegister, \n  loading, \n  error,\n  onBrowsePublic\n}) => (\n  <div className=\"min-h-screen relative overflow-hidden border-4 border-orange-600/80\">\n    <div className=\"absolute inset-0 bg-gradient-to-br from-gray-900 via-slate-900 to-zinc-900\">\n      <div className=\"absolute inset-0 opacity-10\">\n        <div className=\"absolute top-10 left-10 w-32 h-32 bg-gradient-to-r from-purple-800 to-indigo-700 rounded-full blur-xl animate-pulse\"></div>\n        <div className=\"absolute top-40 right-20 w-24 h-24 bg-gradient-to-r from-slate-700 to-gray-600 rounded-full blur-lg animate-pulse delay-1000\"></div>\n        <div className=\"absolute bottom-20 left-1/3 w-40 h-40 bg-gradient-to-r from-zinc-800 to-slate-700 rounded-full blur-2xl animate-pulse delay-2000\"></div>\n      </div>\n    </div>\n\n    <div className=\"relative z-10 flex flex-col items-center justify-center min-h-screen p-8 text-center\">\n      <div className=\"mb-8 relative\">\n        <div className=\"text-6xl md:text-8xl font-bold bg-gradient-to-r from-slate-300 via-purple-400 to-indigo-400 bg-clip-text text-transparent\">\n          SickoScoop\n        </div>\n      </div>\n\n      <h1 className=\"text-4xl md:text-6xl font-bold text-white mb-10 drop-shadow-2xl leading-none\">\n        <span className=\"whitespace-nowrap\">STOP STALKERS</span>\n        <br />\n        <span className=\"text-2xl md:text-4xl block my-2\">ON</span>\n        <span className=\"bg-gradient-to-r from-orange-300 via-red-400 via-blue-400 to-indigo-400 bg-clip-text text-transparent block animate-pulse relative\">\n          <span className=\"absolute inset-0 bg-gradient-to-r from-orange-200 via-red-300 via-cyan-300 to-blue-300 bg-clip-text text-transparent blur-sm opacity-80\"></span>\n          <span className=\"absolute inset-0 bg-gradient-to-r from-amber-300 via-rose-300 via-sky-300 to-violet-300 bg-clip-text text-transparent blur-xs opacity-40\"></span>\n          SICKOSCOOP\n        </span>\n      </h1>\n\n      <div className=\"mb-8 flex flex-col items-center\">\n        <button\n          onClick={onBrowsePublic}\n          className=\"px-8 py-3 bg-gradient-to-r from-gray-900 via-slate-800 to-black text-white text-lg font-semibold rounded-lg hover:scale-105 transform transition-all duration-300 shadow-2xl hover:shadow-amber-500/50 border-2 border-amber-500/80 hover:border-amber-400 hover:from-gray-800 hover:via-slate-700 hover:to-gray-900 backdrop-blur-md flex items-center space-x-3\"\n        >\n          <div className=\"relative w-6 h-6\">\n            <div className=\"absolute inset-0 bg-gradient-to-br from-purple-400 via-indigo-500 to-violet-600 rounded-full opacity-80 blur-sm animate-pulse\"></div>\n            <div className=\"absolute inset-1 bg-gradient-to-tr from-orange-400 via-amber-500 to-red-500 rounded-full opacity-90\"></div>\n            <div className=\"absolute inset-0 bg-gradient-to-br from-cyan-400 via-blue-500 to-indigo-600 transform rotate-45 opacity-70 blur-sm\"></div>\n            <div className=\"absolute inset-1 bg-gradient-to-tr from-amber-300 via-orange-400 to-red-400 transform rotate-45 opacity-80\"></div>\n            <div className=\"absolute inset-0 bg-gradient-to-bl from-violet-400 via-purple-500 to-indigo-600 opacity-60\" style={{clipPath: 'polygon(50% 10%, 10% 90%, 90% 90%)'}}></div>\n            <div className=\"absolute inset-1 bg-gradient-to-tl from-orange-300 via-amber-400 to-yellow-400 opacity-70 animate-pulse\" style={{clipPath: 'polygon(50% 15%, 15% 85%, 85% 85%)'}}></div>\n          </div>\n          <span>Browse Public Feed</span>\n        </button>\n        <p className=\"text-slate-400 text-sm mt-2\">See what people are sharing â€¢ No account required</p>\n      </div>\n\n      {error && (\n        <div className=\"mb-4 p-3 bg-blue-500/20 border border-red-500/50 rounded-lg text-red-300 max-w-md\">\n          {error}\n        </div>\n      )}\n\n      <div className=\"mb-8 w-full max-w-md\">\n        {!showRegister ? (\n          <div className=\"space-y-4\">\n            <input\n              type=\"email\"\n              placeholder=\"Email\"\n              value={loginForm.email}\n              onChange={(e) => setLoginForm(prev => ({ ...prev, email: e.target.value }))}\n              onKeyDown={(e) => e.key === 'Enter' && handleLogin()}\n              autoComplete=\"email\"\n              className=\"w-full p-3 bg-black/40 border border-slate-600/50 rounded-lg text-white placeholder-slate-300 focus:outline-none focus:ring-2 focus:ring-slate-400\"\n            />\n            <input\n              type=\"password\"\n              placeholder=\"Password\"\n              value={loginForm.password}\n              onChange={(e) => setLoginForm(prev => ({ ...prev, password: e.target.value }))}\n              onKeyDown={(e) => e.key === 'Enter' && handleLogin()}\n              autoComplete=\"current-password\"\n              className=\"w-full p-3 bg-black/40 border border-slate-600/50 rounded-lg text-white placeholder-slate-300 focus:outline-none focus:ring-2 focus:ring-slate-400\"\n            />\n            <button\n              onClick={handleLogin}\n              disabled={loading}\n              className=\"w-full px-12 py-4 bg-gradient-to-r from-gray-900 via-slate-800 to-black text-white text-xl font-semibold rounded-lg hover:scale-105 transform transition-all duration-300 shadow-2xl hover:shadow-amber-500/50 border-2 border-amber-500/80 hover:border-amber-400 hover:from-gray-800 hover:via-slate-700 hover:to-gray-900 disabled:opacity-50\"\n            >\n              {loading ? 'Entering...' : 'Enter Sicko'}\n            </button>\n          </div>\n        ) : (\n          <div className=\"space-y-4\">\n            <input\n              type=\"text\"\n              placeholder=\"Username\"\n              value={registerForm.username}\n              onChange={(e) => setRegisterForm(prev => ({ ...prev, username: e.target.value }))}\n              onKeyDown={(e) => e.key === 'Enter' && handleRegister()}\n              autoComplete=\"username\"\n              className=\"w-full p-3 bg-black/40 border border-slate-600/50 rounded-lg text-white placeholder-slate-300 focus:outline-none focus:ring-2 focus:ring-slate-400\"\n            />\n            <input\n              type=\"email\"\n              placeholder=\"Email\"\n              value={registerForm.email}\n              onChange={(e) => setRegisterForm(prev => ({ ...prev, email: e.target.value }))}\n              onKeyDown={(e) => e.key === 'Enter' && handleRegister()}\n              autoComplete=\"email\"\n              className=\"w-full p-3 bg-black/40 border border-slate-600/50 rounded-lg text-white placeholder-slate-300 focus:outline-none focus:ring-2 focus:ring-slate-400\"\n            />\n            <input\n              type=\"password\"\n              placeholder=\"Password\"\n              value={registerForm.password}\n              onChange={(e) => setRegisterForm(prev => ({ ...prev, password: e.target.value }))}\n              onKeyDown={(e) => e.key === 'Enter' && handleRegister()}\n              autoComplete=\"new-password\"\n              className=\"w-full p-3 bg-black/40 border border-slate-600/50 rounded-lg text-white placeholder-slate-300 focus:outline-none focus:ring-2 focus:ring-slate-400\"\n            />\n            <button\n              onClick={handleRegister}\n              disabled={loading}\n              className=\"w-full px-12 py-4 bg-gradient-to-r from-gray-900 via-slate-800 to-black text-white text-xl font-semibold rounded-lg hover:scale-105 transform transition-all duration-300 shadow-2xl hover:shadow-amber-500/50 border-2 border-amber-500/80 hover:border-amber-400 hover:from-gray-800 hover:via-slate-700 hover:to-gray-900 disabled:opacity-50\"\n            >\n              {loading ? 'Creating Account...' : 'Join Sicko'}\n            </button>\n          </div>\n        )}\n        \n        <button\n          onClick={() => setShowRegister(!showRegister)}\n          className=\"mt-4 text-slate-300 hover:text-white transition-colors\"\n        >\n          {showRegister ? 'Already have an account? Sign in' : 'Need an account? Register'}\n        </button>\n      </div>\n\n      <div className=\"mt-16 grid grid-cols-1 md:grid-cols-3 gap-8 max-w-4xl\">\n        {[\n          { \n            icon: (\n              <div className=\"relative w-12 h-12\">\n                <div className=\"absolute inset-0 bg-gradient-to-br from-purple-300 via-indigo-400 to-violet-500 rounded-full opacity-80 blur-sm\"></div>\n                <div className=\"absolute inset-1 bg-gradient-to-tr from-orange-300 via-orange-400 to-blue-500 rounded-full opacity-90 animate-pulse\"></div>\n                <div className=\"absolute inset-2 bg-gradient-to-bl from-blue-300 via-purple-400 to-indigo-500 rounded-full opacity-70\"></div>\n                <div className=\"absolute inset-3 bg-gradient-to-tl from-orange-300 via-purple-300 to-blue-400 rounded-full animate-pulse\"></div>\n              </div>\n            ), \n            title: 'Anti-Stalker Protection', \n            desc: 'Advanced privacy controls' \n          },\n          { \n            icon: (\n              <div className=\"relative w-12 h-12\">\n                <div className=\"absolute inset-0 bg-gradient-to-br from-purple-300 via-indigo-400 to-violet-500 transform rotate-45 opacity-80 blur-sm\"></div>\n                <div className=\"absolute inset-1 bg-gradient-to-tr from-orange-300 via-orange-400 to-blue-500 transform rotate-45 opacity-90 animate-pulse\"></div>\n                <div className=\"absolute inset-2 bg-gradient-to-bl from-blue-300 via-purple-400 to-indigo-500 transform rotate-45 opacity-70\"></div>\n                <div className=\"absolute inset-3 bg-gradient-to-tl from-orange-300 via-purple-300 to-blue-400 transform rotate-45 animate-pulse\"></div>\n              </div>\n            ), \n            title: 'Decency', \n            desc: 'No anonymous trolls' \n          },\n          { \n            icon: (\n              <div className=\"relative w-12 h-12\">\n                <div className=\"absolute inset-0 bg-gradient-to-br from-violet-400 via-purple-500 to-indigo-600 opacity-80 blur-sm\" style={{clipPath: 'polygon(50% 0%, 0% 100%, 100% 100%)'}}></div>\n                <div className=\"absolute inset-1 bg-gradient-to-tr from-orange-400 via-blue-700 to-amber-500 opacity-90 animate-pulse\" style={{clipPath: 'polygon(50% 0%, 0% 100%, 100% 100%)'}}></div>\n                <div className=\"absolute inset-2 bg-gradient-to-bl from-teal-400 via-cyan-500 to-blue-600 opacity-70\" style={{clipPath: 'polygon(50% 0%, 0% 100%, 100% 100%)'}}></div>\n                <div className=\"absolute inset-3 bg-gradient-to-tl from-blue-900 via-indigo-800 to-slate-800 animate-pulse\" style={{clipPath: 'polygon(50% 0%, 0% 100%, 100% 100%)'}}></div>\n              </div>\n            ), \n            title: 'Genuine Community', \n            desc: 'Keeping everyone safe' \n          }\n        ].map((feature, idx) => (\n          <div key={idx} className=\"bg-black/20 backdrop-blur-md rounded-2xl p-6 border border-slate-600/30 hover:bg-black/30 transition-all duration-300\">\n            <div className=\"inline-block border-2 border-amber-500/80 rounded-lg p-3 mb-4 bg-black/30\">\n              {feature.icon}\n            </div>\n            <h3 className=\"text-xl font-semibold text-white mb-2\">{feature.title}</h3>\n            <p className=\"text-slate-300\">{feature.desc}</p>\n          </div>\n        ))}\n      </div>\n    </div>\n  </div>\n));\n\n// Header component\nconst Header = React.memo(({ \n  currentView, \n  setCurrentView, \n  apiStatus, \n  handleLogout, \n  user,\n  selectedPost,\n  onBackToFeed,\n  navigate\n}) => {\n  const [isMobileMenuOpen, setIsMobileMenuOpen] = useState(false);\n  const [isSearchOpen, setIsSearchOpen] = useState(false);\n\n  return (\n    <header className=\"bg-gradient-to-r from-gray-900 via-slate-900 to-zinc-900 shadow-2xl border-b border-amber-500/30 backdrop-blur-md relative z-50\">\n      <div className=\"container mx-auto px-4 py-3\">\n        <div className=\"flex items-center justify-between\">\n          <div className=\"flex items-center space-x-3 flex-shrink-0\">\n            {currentView === 'post' && (\n              <button\n                onClick={onBackToFeed}\n                className=\"p-2 text-slate-300 hover:text-white transition-colors rounded-lg hover:bg-slate-800/50 mr-2\"\n                title=\"Back to Feed\"\n              >\n                <ArrowLeft className=\"h-5 w-5\" />\n              </button>\n            )}\n            \n            <button\n              onClick={() => {\n                navigate('/');\n                setCurrentView('feed');\n              }}\n              className=\"text-xl md:text-2xl lg:text-3xl font-bold bg-gradient-to-r from-slate-300 to-purple-400 bg-clip-text text-transparent hover:scale-105 transition-transform\"\n            >\n              SickoScoop\n            </button>\n            \n            <button\n              onClick={() => setIsMobileMenuOpen(!isMobileMenuOpen)}\n              className=\"md:hidden p-2 text-slate-300 hover:text-white transition-colors rounded-lg hover:bg-slate-800/50\"\n            >\n              <div className=\"w-5 h-5 flex flex-col justify-center space-y-1\">\n                <div className={`h-0.5 bg-current transition-all duration-300 ${isMobileMenuOpen ? 'rotate-45 translate-y-1.5' : ''}`}></div>\n                <div className={`h-0.5 bg-current transition-all duration-300 ${isMobileMenuOpen ? 'opacity-0' : ''}`}></div>\n                <div className={`h-0.5 bg-current transition-all duration-300 ${isMobileMenuOpen ? '-rotate-45 -translate-y-1.5' : ''}`}></div>\n              </div>\n            </button>\n          </div>\n\n          <div className=\"hidden md:flex items-center space-x-3 flex-1 justify-center max-w-2xl\">\n            {currentView === 'post' ? (\n              <div className=\"text-center text-slate-300\">\n                <span className=\"text-lg font-medium\">Post by {selectedPost?.userId?.username || 'Unknown User'}</span>\n              </div>\n            ) : (\n              <>\n                <div className=\"flex space-x-3\">\n                  <button\n                    onClick={() => {\n                      navigate('/');\n                      setCurrentView('feed');\n                    }}\n                    className={`px-4 py-2 rounded-lg border-2 transition-all duration-200 font-medium text-sm lg:text-base ${\n                      currentView === 'feed' \n                        ? 'bg-slate-700 text-white border-amber-500 shadow-lg shadow-amber-500/20' \n                        : 'text-slate-300 hover:text-white border-amber-600/50 hover:border-amber-500 hover:bg-slate-800/50'\n                    }`}\n                  >\n                    Feed\n                  </button>\n                  <button\n                    onClick={() => {\n                      navigate('/profile');\n                      setCurrentView('profile');\n                    }}\n                    className={`px-4 py-2 rounded-lg border-2 transition-all duration-200 font-medium text-sm lg:text-base ${\n                      currentView === 'profile' \n                        ? 'bg-slate-700 text-white border-amber-500 shadow-lg shadow-amber-500/20' \n                        : 'text-slate-300 hover:text-white border-amber-600/50 hover:border-amber-500 hover:bg-slate-800/50'\n                    }`}\n                  >\n                    Profile\n                  </button>\n                  <button\n                    onClick={() => {\n                      navigate('/chat');\n                      setCurrentView('chat');\n                    }}\n                    className={`px-4 py-2 rounded-lg border-2 transition-all duration-200 font-medium text-sm lg:text-base ${\n                      currentView === 'chat' \n                        ? 'bg-slate-700 text-white border-amber-500 shadow-lg shadow-amber-500/20' \n                        : 'text-slate-300 hover:text-white border-amber-600/50 hover:border-amber-500 hover:bg-slate-800/50'\n                    }`}\n                  >\n                    Chat\n                  </button>\n                </div>\n\n                <div className=\"hidden lg:block relative ml-4\">\n                  <Search className=\"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-slate-500\" />\n                  <input\n                    type=\"text\"\n                    placeholder=\"Search sicko...\"\n                    className=\"w-64 xl:w-72 pl-10 pr-4 py-2 bg-black/40 border border-slate-600/60 rounded-full text-white placeholder-slate-400 focus:outline-none focus:ring-2 focus:ring-amber-500/50 focus:border-amber-500/70 transition-all duration-200 text-sm\"  \n                  />\n                </div>\n              </>\n            )}\n          </div>\n\n          <div className=\"flex items-center flex-shrink-0 mr-2\">\n            {currentView !== 'post' && (\n              <button\n                onClick={() => setIsSearchOpen(!isSearchOpen)}\n                className=\"lg:hidden p-2 text-slate-300 hover:text-white transition-colors rounded-lg hover:bg-slate-800/50 mr-3\"\n              >\n                <Search className=\"h-5 w-5\" />\n              </button>\n            )}\n\n            {user && (\n              <div \n                className=\"w-10 h-10 rounded-full flex items-center justify-center font-bold shadow-lg transition-all duration-200 cursor-pointer hover:scale-110 hover:shadow-xl text-sm bg-gradient-to-r from-amber-500 to-orange-600 border-2 border-amber-500/80 text-white mr-3\"\n                onClick={() => setIsMobileMenuOpen(!isMobileMenuOpen)}\n              >\n                {safeString(user?.username?.slice(0, 2).toUpperCase()) || 'YU'}\n              </div>\n            )}\n\n            <button className=\"p-2 text-slate-300 hover:text-white transition-colors duration-200 hover:bg-slate-800/50 rounded-lg mr-3\">\n              <Settings className=\"h-5 w-5\" />\n            </button>\n            \n            {user && (\n              <button\n                onClick={handleLogout}\n                className=\"hidden sm:flex px-3 py-2 text-sm rounded-lg transition-all duration-200 hover:scale-105 bg-slate-700/40 text-slate-300 border-2 border-amber-600/40 hover:border-amber-500 hover:bg-slate-700/60 hover:text-white font-semibold\"\n              >\n                Logout\n              </button>\n            )}\n          </div>\n        </div>\n\n        {isSearchOpen && currentView !== 'post' && (\n          <div className=\"mt-3 lg:hidden\">\n            <div className=\"relative\">\n              <Search className=\"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-slate-500\" />\n              <input\n                type=\"text\"\n                placeholder=\"Search sicko...\"\n                className=\"w-full pl-10 pr-4 py-3 bg-black/40 border border-slate-600/60 rounded-full text-white placeholder-slate-400 focus:outline-none focus:ring-2 focus:ring-amber-500/50 focus:border-amber-500/70 transition-all duration-200\"\n                autoFocus\n              />\n            </div>\n          </div>\n        )}\n\n        {isMobileMenuOpen && (\n          <div className=\"md:hidden mt-4 pb-2 bg-black/20 rounded-xl p-4 border border-slate-600/30\">\n            <div className=\"flex flex-col space-y-3\">\n              {currentView === 'post' && (\n                <button\n                  onClick={() => {\n                    onBackToFeed();\n                    setIsMobileMenuOpen(false);\n                  }}\n                  className=\"px-4 py-3 rounded-lg border-2 border-amber-600/50 bg-slate-700/40 text-slate-300 hover:text-white hover:border-amber-500 hover:bg-slate-700/60 transition-all duration-200 font-medium text-left flex items-center space-x-3\"\n                >\n                  <ArrowLeft className=\"h-5 w-5\" />\n                  <span>Back to Feed</span>\n                </button>\n              )}\n              \n              {currentView !== 'post' && (\n                <>\n                  <button\n                    onClick={() => {\n                      navigate('/');\n                      setCurrentView('feed');\n                      setIsMobileMenuOpen(false);\n                    }}\n                    className={`px-4 py-3 rounded-lg border-2 transition-all duration-200 font-medium text-left flex items-center space-x-3 ${\n                      currentView === 'feed' \n                        ? 'bg-slate-700 text-white border-amber-500 shadow-lg shadow-amber-500/20' \n                        : 'text-slate-300 hover:text-white border-amber-600/50 hover:border-amber-500 hover:bg-slate-800/50'\n                    }`}\n                  >\n                    <span className=\"text-lg\">ðŸ“±</span>\n                    <span>Feed</span>\n                  </button>\n                  \n                  <button\n                    onClick={() => {\n                      navigate('/profile');\n                      setCurrentView('profile');\n                      setIsMobileMenuOpen(false);\n                    }}\n                    className={`px-4 py-3 rounded-lg border-2 transition-all duration-200 font-medium text-left flex items-center space-x-3 ${\n                      currentView === 'profile' \n                        ? 'bg-slate-700 text-white border-amber-500 shadow-lg shadow-amber-500/20' \n                        : 'text-slate-300 hover:text-white border-amber-600/50 hover:border-amber-500 hover:bg-slate-800/50'\n                    }`}\n                  >\n                    <span className=\"text-lg\">ðŸ‘¤</span>\n                    <span>Profile</span>\n                  </button>\n                  \n                  <button\n                    onClick={() => {\n                      navigate('/chat');\n                      setCurrentView('chat');\n                      setIsMobileMenuOpen(false);\n                    }}\n                    className={`px-4 py-3 rounded-lg border-2 transition-all duration-200 font-medium text-left flex items-center space-x-3 ${\n                      currentView === 'chat' \n                        ? 'bg-slate-700 text-white border-amber-500 shadow-lg shadow-amber-500/20' \n                        : 'text-slate-300 hover:text-white border-amber-600/50 hover:border-amber-500 hover:bg-slate-800/50'\n                    }`}\n                  >\n                    <span className=\"text-lg\">ðŸ’¬</span>\n                    <span>Chat</span>\n                  </button>\n                </>\n              )}\n              \n              <div className=\"border-t border-slate-600/40 my-2\"></div>\n              \n              {user && (\n                <button\n                  onClick={() => {\n                    handleLogout();\n                    setIsMobileMenuOpen(false);\n                  }}\n                  className=\"px-4 py-3 rounded-lg border-2 border-amber-600/40 bg-slate-700/40 text-slate-300 hover:text-white hover:border-amber-500 hover:bg-slate-700/60 transition-all duration-200 font-medium text-left flex items-center space-x-3\"  \n                >\n                  <span className=\"text-lg\">ðŸšª</span>\n                  <span>Logout</span>\n                </button>\n              )}\n            </div>\n          </div>\n        )}\n      </div>\n    </header>\n  );\n});\n\n// Post Creator Component with Enhanced File Upload\nconst PostCreator = React.memo(({ \n  user, \n  newPost, \n  setNewPost, \n  handlePost, \n  loading, \n  fileInputRef, \n  handleFileUpload \n}) => {\n  const [uploadedFiles, setUploadedFiles] = useState([]);\n  const [uploadProgress, setUploadProgress] = useState({});\n  const [isUploading, setIsUploading] = useState(false);\n  const [uploadError, setUploadError] = useState('');\n\n  const pdfInputRef = useRef(null);\n  const audioInputRef = useRef(null);\n  const videoInputRef = useRef(null);\n  const photoInputRef = useRef(null);\n\n  const FILE_LIMITS = {\n    image: { max: 20 * 1024 * 1024, label: '20MB' },\n    video: { max: 200 * 1024 * 1024, label: '200MB' },\n    audio: { max: 50 * 1024 * 1024, label: '50MB' },\n    pdf: { max: 50 * 1024 * 1024, label: '50MB' }\n  };\n\n  const validateFile = (file, type) => {\n    const limit = FILE_LIMITS[type];\n    if (!limit) return { valid: false, error: `Unknown file type: ${type}` };\n    \n    if (file.size > limit.max) {\n      return { \n        valid: false, \n        error: `${type.charAt(0).toUpperCase() + type.slice(1)} files must be under ${limit.label}. Your file is ${(file.size / 1024 / 1024).toFixed(1)}MB.` \n      };\n    }\n    \n    return { valid: true };\n  };\n\n  const handleFileSelect = async (type, files) => {\n    console.log('ðŸ”„ handleFileSelect called:', type, files?.length);\n    if (!files || files.length === 0) return;\n\n    const fileArray = Array.from(files);\n    setUploadError('');\n    \n    const allowedTypes = {\n      pdf: ['application/pdf'],\n      audio: ['audio/mpeg', 'audio/wav', 'audio/ogg', 'audio/mp3', 'audio/mp4'],\n      video: ['video/mp4', 'video/webm', 'video/mpeg', 'video/quicktime', 'video/mov'],\n      image: ['image/jpeg', 'image/png', 'image/gif', 'image/webp']\n    };\n\n    const validFiles = [];\n    const errors = [];\n\n    for (const file of fileArray) {\n      if (!allowedTypes[type].includes(file.type)) {\n        errors.push(`${file.name}: Invalid file type. Expected ${type.toUpperCase()}.`);\n        continue;\n      }\n\n      const validation = validateFile(file, type);\n      if (!validation.valid) {\n        errors.push(`${file.name}: ${validation.error}`);\n        continue;\n      }\n\n      validFiles.push(file);\n    }\n\n    if (errors.length > 0) {\n      setUploadError(errors.join('\\n'));\n      return;\n    }\n\n    if (validFiles.length === 0) {\n      setUploadError(`Please select valid ${type} files.`);\n      return;\n    }\n\n    await uploadFiles(validFiles);\n  };\n\n  const uploadFiles = async (files) => {\n    console.log('ðŸš€ uploadFiles called with:', files?.length, 'files');\n    if (!files || files.length === 0) return;\n\n    setIsUploading(true);\n    setUploadError('');\n    setUploadProgress({});\n\n    const formData = new FormData();\n    Array.from(files).forEach(file => {\n      formData.append('files', file);\n    });\n\n    let progressInterval;\n\n    try {\n      console.log('ðŸ“¤ Uploading files:', files.length);\n      \n      const totalSize = Array.from(files).reduce((sum, file) => sum + file.size, 0);\n      const totalSizeMB = (totalSize / 1024 / 1024).toFixed(1);\n      const sizeLabel = `${totalSizeMB}MB`;\n      \n      console.log(`ðŸ“Š Total upload size: ${sizeLabel}`);\n\n      const startTime = Date.now();\n      setUploadProgress({ status: 'uploading', progress: 0, totalSize: sizeLabel });\n\n      progressInterval = setInterval(() => {\n        const elapsed = Date.now() - startTime;\n        const estimatedTotal = Math.max(15000, totalSize / 2000);\n        const progress = Math.min(90, (elapsed / estimatedTotal) * 100);\n        \n        setUploadProgress(prev => ({ \n          ...prev, \n          progress: Math.round(progress),\n          elapsed: Math.round(elapsed / 1000)\n        }));\n      }, 1500);\n\n      // âœ… FIXED: Use the enhanced API request function\n      const result = await apiRequest('/media/upload', {\n        method: 'POST',\n        body: formData\n      });\n\n      clearInterval(progressInterval);\n\n      setUploadProgress({ status: 'completed', progress: 100 });\n\n      if (result.files && Array.isArray(result.files)) {\n        setUploadedFiles(prev => [...prev, ...result.files]);\n        console.log('ðŸ“ Files added to state:', result.files.length);\n        \n        setTimeout(() => {\n          setUploadProgress({});\n        }, 2000);\n      } else {\n        throw new Error('Invalid response format from server');\n      }\n\n    } catch (error) {\n      console.error('âŒ Upload error:', error);\n      if (progressInterval) clearInterval(progressInterval);\n      \n      setUploadError(`Upload failed: ${error.message}`);\n      setUploadProgress({});\n    } finally {\n      setIsUploading(false);\n    }\n  };\n\n  const removeFile = (index) => {\n    setUploadedFiles(prev => prev.filter((_, i) => i !== index));\n  };\n\n  const clearError = () => {\n    setUploadError('');\n  };\n\n  const hasContent = newPost.trim() || uploadedFiles.length > 0;\n\n  const handleSubmitPost = async () => {\n    if (!hasContent) return;\n\n    try {\n      await handlePost(uploadedFiles);\n      \n      setUploadedFiles([]);\n      \n      if (pdfInputRef.current) pdfInputRef.current.value = '';\n      if (audioInputRef.current) audioInputRef.current.value = '';\n      if (videoInputRef.current) videoInputRef.current.value = '';\n      if (photoInputRef.current) photoInputRef.current.value = '';\n      \n    } catch (error) {\n      console.error('Post submission error:', error);\n    }\n  };\n\n  const getFileIcon = (file) => {\n    const icons = {\n      image: { icon: <Image className=\"h-4 w-4\" />, color: 'text-blue-400', bg: 'bg-blue-500/20' },\n      video: { icon: <Video className=\"h-4 w-4\" />, color: 'text-red-400', bg: 'bg-red-500/20' },\n      audio: { icon: <Mic className=\"h-4 w-4\" />, color: 'text-green-400', bg: 'bg-green-500/20' },\n      document: { icon: <FileText className=\"h-4 w-4\" />, color: 'text-blue-400', bg: 'bg-blue-500/20' },\n      pdf: { icon: <FileText className=\"h-4 w-4\" />, color: 'text-blue-400', bg: 'bg-blue-500/20' }\n    };\n    \n    if (icons[file.type]) {\n      return icons[file.type];\n    } else if (file.mimeType === 'application/pdf') {\n      return icons.pdf;\n    } else {\n      return icons.document;\n    }\n  };\n\n  return (\n    <div className=\"bg-gradient-to-r from-slate-900/60 to-zinc-900/60 backdrop-blur-md rounded-2xl p-6 border border-slate-600/40 mb-6\">\n      <div className=\"flex space-x-4\">\n        <div className=\"w-12 h-12 bg-gradient-to-r from-slate-600 to-zinc-600 rounded-full flex items-center justify-center text-white font-semibold\">\n          {safeString(user?.username?.slice(0, 2).toUpperCase()) || 'YU'}\n        </div>\n        <div className=\"flex-1\">\n          <textarea\n            value={newPost}\n            onChange={(e) => setNewPost(e.target.value)}\n            placeholder=\"Share your thoughts...\"\n            className=\"w-full p-4 bg-black/40 border border-slate-600/50 rounded-xl text-white placeholder-slate-300 resize-none focus:outline-none focus:ring-2 focus:ring-slate-400\"\n            rows=\"3\"\n          />\n          \n          {uploadError && (\n            <div className=\"mt-3 p-3 bg-blue-500/20 border border-red-500/50 rounded-lg\">\n              <div className=\"flex items-start justify-between\">\n                <div className=\"flex items-start space-x-2\">\n                  <AlertCircle className=\"h-4 w-4 text-red-400 mt-0.5 flex-shrink-0\" />\n                  <div className=\"text-red-300 text-sm whitespace-pre-line\">{uploadError}</div>\n                </div>\n                <button\n                  onClick={clearError}\n                  className=\"text-red-400 hover:text-red-300 ml-2\"\n                >\n                  <X className=\"h-4 w-4\" />\n                </button>\n              </div>\n            </div>\n          )}\n          \n          {uploadProgress.status && (\n            <div className=\"mt-3 p-4 bg-blue-500/10 border border-blue-500/30 rounded-lg\">\n              <div className=\"flex items-center justify-between mb-2\">\n                <div className=\"flex items-center space-x-2\">\n                  {uploadProgress.status === 'completed' ? (\n                    <CheckCircle className=\"h-4 w-4 text-green-400\" />\n                  ) : (\n                    <div className=\"animate-spin rounded-full h-4 w-4 border-b-2 border-blue-400\"></div>\n                  )}\n                  <span className=\"text-blue-400 text-sm font-medium\">\n                    {uploadProgress.status === 'completed' ? 'Upload Complete!' : 'Uploading files...'}\n                  </span>\n                </div>\n                {uploadProgress.totalSize && (\n                  <span className=\"text-blue-300 text-xs\">\n                    {uploadProgress.totalSize}\n                  </span>\n                )}\n              </div>\n              \n              {uploadProgress.progress !== undefined && (\n                <div className=\"mb-2\">\n                  <div className=\"w-full bg-slate-800/50 rounded-full h-2\">\n                    <div \n                      className=\"bg-blue-400 h-2 rounded-full transition-all duration-500\"\n                      style={{ width: `${uploadProgress.progress}%` }}\n                    ></div>\n                  </div>\n                  <div className=\"flex justify-between text-xs text-blue-300 mt-1\">\n                    <span>{uploadProgress.progress}% complete</span>\n                    {uploadProgress.elapsed && (\n                      <span>{Math.floor(uploadProgress.elapsed / 60)}:{String(uploadProgress.elapsed % 60).padStart(2, '0')} elapsed</span>\n                    )}\n                  </div>\n                </div>\n              )}\n              \n              {uploadProgress.status === 'uploading' && (\n                <p className=\"text-blue-300 text-xs\">\n                  Large files may take several minutes to upload. Please be patient.\n                </p>\n              )}\n            </div>\n          )}\n          \n          {uploadedFiles.length > 0 && (\n            <div className=\"mt-4 space-y-3\">\n              <h4 className=\"text-sm font-medium text-slate-300 flex items-center space-x-2\">\n                <CheckCircle className=\"h-4 w-4 text-green-400\" />\n                <span>Uploaded Files ({uploadedFiles.length})</span>\n              </h4>\n              <div className=\"grid gap-3\">\n                {uploadedFiles.map((file, index) => {\n                  const fileStyle = getFileIcon(file);\n                  return (\n                    <div key={index} className=\"flex items-center justify-between p-3 bg-black/30 rounded-lg border border-slate-600/30\">\n                      <div className=\"flex items-center space-x-3\">\n                        <div className={`p-2 ${fileStyle.bg} rounded-lg ${fileStyle.color}`}>\n                          {fileStyle.icon}\n                        </div>\n                        <div>\n                          <p className=\"text-white font-medium text-sm\">{file.filename}</p>\n                          <div className=\"flex items-center space-x-2\">\n                            <p className=\"text-slate-400 text-xs\">\n                              {file.type.toUpperCase()} â€¢ {(file.size / 1024 / 1024).toFixed(1)} MB\n                            </p>\n                            {file.trackingId && (\n                              <span className=\"inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-blue-500/20 text-blue-400 border border-blue-500/30\">\n                                ðŸ” Tracked\n                              </span>\n                            )}\n                          </div>\n                        </div>\n                      </div>\n                      <button\n                        onClick={() => removeFile(index)}\n                        className=\"p-1 text-slate-400 hover:text-blue-400 hover:bg-blue-500/10 rounded transition-colors\"\n                        title=\"Remove file\"\n                      >\n                        <X className=\"h-4 w-4\" />\n                      </button>\n                    </div>\n                  );\n                })}\n              </div>\n            </div>\n          )}\n\n          <div className=\"mt-2 flex justify-end\">\n            <button\n              onClick={handleSubmitPost}\n              disabled={!hasContent || loading || isUploading}\n              className={`flex items-center justify-center space-x-2 px-6 py-3 rounded-lg transition-colors border-2 text-base font-semibold ${\n                hasContent && !loading && !isUploading\n                  ? 'bg-slate-700/60 text-slate-300 hover:bg-slate-700 border-amber-600/50 hover:border-amber-500 cursor-pointer'\n                  : 'bg-slate-700/30 text-slate-500 border-amber-600/30 cursor-not-allowed opacity-50'\n              }`}\n            >\n              <span>{loading ? 'Posting...' : isUploading ? 'Uploading...' : 'Post'}</span>\n            </button>\n          </div>\n          \n          <div className=\"mt-2 pt-2 border-t border-slate-600/30\">\n            <div className=\"flex flex-wrap gap-2 justify-end\">\n              <button \n                onClick={() => pdfInputRef.current?.click()}\n                disabled={isUploading}\n                className={`flex items-center space-x-2 px-3 py-2 rounded-lg transition-colors border-2 text-sm ${\n                  isUploading\n                    ? 'bg-slate-700/20 text-slate-600 border-amber-600/20 cursor-not-allowed'\n                    : 'bg-slate-700/30 text-slate-500 border-amber-600/30 opacity-50 hover:opacity-70 hover:bg-slate-700/40 hover:text-slate-400'\n                }`}\n                title={`PDF files up to ${FILE_LIMITS.pdf.label} (with watermarking)`}\n              >\n                <FileText className=\"h-4 w-4\" />\n                <span>PDF</span>\n                <span className=\"text-xs opacity-70\">({FILE_LIMITS.pdf.label})</span>\n                <span className=\"text-xs text-blue-400\">ðŸ”</span>\n              </button>\n              \n              <button \n                onClick={() => audioInputRef.current?.click()}\n                disabled={isUploading}\n                className={`flex items-center space-x-2 px-3 py-2 rounded-lg transition-colors border-2 text-sm ${\n                  isUploading\n                    ? 'bg-slate-700/20 text-slate-600 border-amber-600/20 cursor-not-allowed'\n                    : 'bg-slate-700/30 text-slate-500 border-amber-600/30 opacity-50 hover:opacity-70 hover:bg-slate-700/40 hover:text-slate-400'\n                }`}\n                title={`Audio files up to ${FILE_LIMITS.audio.label}`}\n              >\n                <Mic className=\"h-4 w-4\" />\n                <span>Audio</span>\n                <span className=\"text-xs opacity-70\">({FILE_LIMITS.audio.label})</span>\n              </button>\n              \n              <button \n                onClick={() => videoInputRef.current?.click()}\n                disabled={isUploading}\n                className={`flex items-center space-x-2 px-3 py-2 rounded-lg transition-colors border-2 text-sm ${\n                  isUploading\n                    ? 'bg-slate-700/20 text-slate-600 border-amber-600/20 cursor-not-allowed'\n                    : 'bg-slate-700/30 text-slate-500 border-amber-600/30 opacity-50 hover:opacity-70 hover:bg-slate-700/40 hover:text-slate-400'\n                }`}\n                title={`Video files up to ${FILE_LIMITS.video.label}`}\n              >\n                <Video className=\"h-4 w-4\" />\n                <span>Video</span>\n                <span className=\"text-xs opacity-70\">({FILE_LIMITS.video.label})</span>\n              </button>\n              \n              <button\n                onClick={() => photoInputRef.current?.click()}\n                disabled={isUploading}\n                className={`flex items-center space-x-2 px-3 py-2 rounded-lg transition-colors border-2 text-sm ${\n                  isUploading\n                    ? 'bg-slate-700/20 text-slate-600 border-amber-600/20 cursor-not-allowed'\n                    : 'bg-slate-700/30 text-slate-500 border-amber-600/30 opacity-50 hover:opacity-70 hover:bg-slate-700/40 hover:text-slate-400'\n                }`}\n                title={`Image files up to ${FILE_LIMITS.image.label}`}\n              >\n                <Image className=\"h-4 w-4\" />\n                <span>Photo</span>\n                <span className=\"text-xs opacity-70\">({FILE_LIMITS.image.label})</span>\n              </button>\n            </div>\n          </div>\n        </div>\n      </div>\n      \n      <input\n        ref={pdfInputRef}\n        type=\"file\"\n        accept=\".pdf\"\n        multiple\n        onChange={(e) => {\n          console.log('ðŸ“ PDF files selected:', e.target.files.length);\n          handleFileSelect('pdf', e.target.files);\n        }}\n        className=\"hidden\"\n      />\n      <input\n        ref={audioInputRef}\n        type=\"file\"\n        accept=\"audio/*\"\n        multiple\n        onChange={(e) => {\n          console.log('ðŸŽµ Audio files selected:', e.target.files.length);\n          handleFileSelect('audio', e.target.files);\n        }}\n        className=\"hidden\"\n      />\n      <input\n        ref={videoInputRef}\n        type=\"file\"\n        accept=\"video/*\"\n        multiple\n        onChange={(e) => {\n          console.log('ðŸ“¹ Video files selected:', e.target.files.length);\n          handleFileSelect('video', e.target.files);\n        }}\n        className=\"hidden\"\n      />\n      <input\n        ref={photoInputRef}\n        type=\"file\"\n        accept=\"image/*\"\n        multiple\n        onChange={(e) => {\n          console.log('ðŸ“¸ Photo files selected:', e.target.files.length);\n          handleFileSelect('image', e.target.files);\n        }}\n        className=\"hidden\"\n      />\n      \n      <input\n        ref={fileInputRef}\n        type=\"file\"\n        multiple\n        accept=\"image/*,video/*,audio/*,.pdf\"\n        onChange={(e) => uploadFiles(e.target.files)}\n        className=\"hidden\"\n      />\n    </div>\n  );\n});\n\n// Enhanced Post Component\nconst Post = React.memo(({ \n  post, \n  user, \n  handleLike, \n  handleComment, \n  handleShare, \n  isPublicView = false, \n  onLoginPrompt,\n  onPostClick,\n  isDetailView = false,\n  navigate\n}) => {\n  const [showComments, setShowComments] = useState(isDetailView);\n  const [commentText, setCommentText] = useState('');\n  const [showShareModal, setShowShareModal] = useState(false);\n  const [showMoreMenu, setShowMoreMenu] = useState(false);\n  const [showWhoLiked, setShowWhoLiked] = useState(false);\n  const [isLiking, setIsLiking] = useState(false);\n  const commentInputRef = useRef(null);\n\n  const timestamp = getDetailedTimestamp(post.createdAt);\n\n  useEffect(() => {\n    if (post.mediaFiles && post.mediaFiles.length > 0) {\n      console.log('ðŸ” POST DEBUGGING - Post has media files:', post.mediaFiles);\n      post.mediaFiles.forEach((file, index) => {\n        console.log(`ðŸ“„ File ${index} details:`, {\n          type: file.type,\n          mimeType: file.mimeType,\n          filename: file.filename,\n          originalName: file.originalName,\n          url: file.url,\n          size: file.size,\n          trackingId: file.trackingId,\n          trackingUrl: file.trackingUrl,\n          fullFile: file\n        });\n      });\n    }\n  }, [post.mediaFiles]);\n\n  const detectFileType = (file) => {\n    console.log('ðŸŽ¯ Detecting file type for:', file);\n    \n    const isPDF = \n      file.type === 'document' ||\n      file.type === 'pdf' ||\n      file.mimeType === 'application/pdf' ||\n      (file.filename && file.filename.toLowerCase().endsWith('.pdf')) ||\n      (file.originalName && file.originalName.toLowerCase().endsWith('.pdf'));\n    \n    console.log('ðŸ“„ PDF detection result:', {\n      isPDF,\n      reasons: {\n        typeIsDocument: file.type === 'document',\n        typeIsPdf: file.type === 'pdf', \n        mimeTypeIsPdf: file.mimeType === 'application/pdf',\n        filenameEndsPdf: file.filename && file.filename.toLowerCase().endsWith('.pdf'),\n        originalNameEndsPdf: file.originalName && file.originalName.toLowerCase().endsWith('.pdf')\n      },\n      trackingId: file.trackingId,\n      trackingUrl: file.trackingUrl\n    });\n    \n    if (isPDF) {\n      return {\n        category: 'pdf',\n        displayName: 'PDF Document',\n        icon: 'ðŸ“„',\n        bgColor: 'bg-blue-500/20',\n        textColor: 'text-blue-400',\n        borderColor: 'border-blue-500/40',\n        hoverBgColor: 'hover:bg-blue-500/30',\n        hoverTextColor: 'hover:text-blue-300',\n        hoverBorderColor: 'hover:border-blue-500/60',\n        isTracked: !!file.trackingId\n      };\n    }\n    \n    if (file.type === 'image' || (file.mimeType && file.mimeType.startsWith('image/'))) {\n      return {\n        category: 'image',\n        displayName: 'Image',\n        icon: 'ðŸ–¼ï¸',\n        bgColor: 'bg-blue-500/20',\n        textColor: 'text-blue-400',\n        borderColor: 'border-blue-500/40'\n      };\n    }\n    \n    if (file.type === 'video' || (file.mimeType && file.mimeType.startsWith('video/'))) {\n      return {\n        category: 'video',\n        displayName: 'Video',\n        icon: 'ðŸŽ¬',\n        bgColor: 'bg-purple-500/20',\n        textColor: 'text-purple-400',\n        borderColor: 'border-purple-500/40'\n      };\n    }\n    \n    if (file.type === 'audio' || (file.mimeType && file.mimeType.startsWith('audio/'))) {\n      return {\n        category: 'audio',\n        displayName: 'Audio',\n        icon: 'ðŸŽµ',\n        bgColor: 'bg-green-500/20',\n        textColor: 'text-green-400',\n        borderColor: 'border-green-500/40'\n      };\n    }\n    \n    console.warn('âš ï¸ Unknown file type, using default:', file);\n    return {\n      category: 'document',\n      displayName: 'Document',\n      icon: 'ðŸ“Ž',\n      bgColor: 'bg-orange-500/20',\n      textColor: 'text-orange-400',\n      borderColor: 'border-orange-500/40'\n    };\n  };\n\n  const handleLikeClick = async () => {\n    if (isPublicView) {\n      onLoginPrompt?.();\n      return;\n    }\n    \n    setIsLiking(true);\n    try {\n      await handleLike(post._id);\n    } finally {\n      setTimeout(() => setIsLiking(false), 300);\n    }\n  };\n\n  const handleCommentSubmit = () => {\n    if (!commentText.trim()) return;\n    \n    if (isPublicView) {\n      onLoginPrompt?.();\n      return;\n    }\n    \n    handleComment?.(post._id, commentText);\n    setCommentText('');\n  };\n\n  const handleShareClick = () => {\n    if (isPublicView) {\n      onLoginPrompt?.();\n      return;\n    }\n    setShowShareModal(true);\n  };\n\n  const handleWhoLikedClick = () => {\n    if (isPublicView) {\n      onLoginPrompt?.();\n      return;\n    }\n    setShowWhoLiked(true);\n  };\n\n  const handlePostContentClick = (e) => {\n    if (e.target.closest('button') || \n        e.target.closest('input') || \n        e.target.closest('a') ||\n        e.target.closest('.post-action-button') ||\n        showShareModal || \n        showMoreMenu || \n        showWhoLiked ||\n        isDetailView) {\n      return;\n    }\n\n    if (isPublicView) {\n      onLoginPrompt?.();\n      return;\n    }\n\n    if (navigate) {\n      navigate(`/post/${post._id}`);\n    }\n    onPostClick?.(post);\n  };\n\n  const isLiked = !isPublicView && post.likes?.some(like => \n    (typeof like === 'string' ? like : like.user || like._id) === (user?._id || user?.id)\n  );\n\n  const likeCount = post.likes?.length || 0;\n  const commentCount = post.comments?.length || 0;\n\n  const usersWhoLiked = React.useMemo(() => {\n    if (!post.likes || post.likes.length === 0) return [];\n    \n    return post.likes.map((like, index) => {\n      if (typeof like === 'string') {\n        return {\n          _id: like,\n          username: `User ${index + 1}`,\n          avatar: 'ðŸ‘¤',\n          verified: false\n        };\n      } else if (like.user) {\n        return {\n          _id: like.user._id || like.user,\n          username: like.user.username || `User ${index + 1}`,\n          avatar: like.user.avatar || 'ðŸ‘¤',\n          verified: like.user.verified || false\n        };\n      } else {\n        return {\n          _id: like._id || `user-${index}`,\n          username: like.username || `User ${index + 1}`,\n          avatar: like.avatar || 'ðŸ‘¤',\n          verified: like.verified || false\n        };\n      }\n    });\n  }, [post.likes]);\n\n  const handlePDFClick = async (file) => {\n    if (file.trackingId) {\n      try {\n        const trackingUrl = file.trackingUrl || `${API_BASE}/track/${file.trackingId}`;\n        await apiRequest(`/track/${file.trackingId}`, {\n          method: 'GET'\n        });\n        console.log('ðŸ“Š PDF access tracked:', file.trackingId);\n      } catch (error) {\n        console.error('Failed to track PDF access:', error);\n      }\n    }\n  };\n\n  return (\n    <>\n      <div \n        className={`bg-gradient-to-r from-slate-900/40 to-zinc-900/40 backdrop-blur-md rounded-2xl p-6 border border-slate-600/30 mb-6 transition-all duration-300 group ${\n          !isDetailView && !isPublicView ? 'hover:border-slate-500/50 cursor-pointer hover:bg-slate-800/30' : ''\n        }`}\n        onClick={handlePostContentClick}\n      >\n        <div className=\"flex items-start justify-between mb-4\">\n          <div className=\"flex items-start space-x-4\">\n            <div className=\"w-12 h-12 bg-gradient-to-r from-slate-600 to-zinc-600 rounded-full flex items-center justify-center text-white font-semibold text-sm shadow-lg\">\n              {post.userId?.username?.slice(0, 2).toUpperCase() || 'UN'}\n            </div>\n            \n            <div className=\"flex-1\">\n              <div className=\"flex items-center space-x-2 mb-1\">\n                <span className=\"font-semibold text-white hover:text-slate-200 cursor-pointer\">\n                  {post.userId?.username || 'Unknown User'}\n                </span>\n                {post.userId?.verified && (\n                  <div className=\"w-5 h-5 bg-gradient-to-r from-blue-500 to-indigo-600 rounded-full flex items-center justify-center\">\n                    <span className=\"text-white text-xs\">âœ“</span>\n                  </div>\n                )}\n                <span className=\"text-slate-400 text-sm\">â€¢</span>\n                <span \n                  className=\"text-slate-400 text-sm hover:text-slate-300 cursor-pointer flex items-center space-x-1 group/timestamp\" \n                  title={timestamp.absolute}\n                >\n                  <Clock className=\"h-3 w-3\" />\n                  <span className=\"group-hover/timestamp:hidden\">{timestamp.relative}</span>\n                  <span className=\"hidden group-hover/timestamp:inline text-xs\">{timestamp.absolute}</span>\n                </span>\n              </div>\n              \n              {post.userId?.transparencyScore && (\n                <div className=\"flex items-center space-x-1\">\n                  <div className=\"w-2 h-2 bg-green-500 rounded-full\"></div>\n                  <span className=\"text-xs text-slate-500\">\n                    {post.userId.transparencyScore}% transparency\n                  </span>\n                </div>\n              )}\n            </div>\n          </div>\n\n          <div className=\"relative\">\n            <button \n              onClick={(e) => {\n                e.stopPropagation();\n                setShowMoreMenu(!showMoreMenu);\n              }}\n              className=\"p-2 text-slate-400 hover:text-white hover:bg-slate-700/50 rounded-lg transition-colors opacity-0 group-hover:opacity-100 post-action-button\"\n            >\n              <MoreHorizontal className=\"h-5 w-5\" />\n            </button>\n            \n            {showMoreMenu && (\n              <div className=\"absolute right-0 top-10 bg-slate-800/90 backdrop-blur-md rounded-xl border border-slate-600/50 shadow-xl z-10 min-w-48\">\n                <button \n                  onClick={(e) => {\n                    e.stopPropagation();\n                    navigator.clipboard.writeText(generatePostUrl(post._id));\n                    setShowMoreMenu(false);\n                  }}\n                  className=\"w-full px-4 py-3 text-left text-slate-300 hover:text-white hover:bg-slate-700/50 rounded-t-xl transition-colors flex items-center space-x-2\"\n                >\n                  <Copy className=\"h-4 w-4\" />\n                  <span>Copy Link</span>\n                </button>\n                <button \n                  onClick={(e) => e.stopPropagation()}\n                  className=\"w-full px-4 py-3 text-left text-slate-300 hover:text-white hover:bg-slate-700/50 transition-colors flex items-center space-x-2\"\n                >\n                  <Bookmark className=\"h-4 w-4\" />\n                  <span>Save Post</span>\n                </button>\n                {!isDetailView && (\n                  <button \n                    onClick={(e) => {\n                      e.stopPropagation();\n                      if (navigate) navigate(`/post/${post._id}`);\n                      onPostClick?.(post);\n                      setShowMoreMenu(false);\n                    }}\n                    className=\"w-full px-4 py-3 text-left text-slate-300 hover:text-white hover:bg-slate-700/50 transition-colors flex items-center space-x-2\"\n                  >\n                    <Eye className=\"h-4 w-4\" />\n                    <span>View Post</span>\n                  </button>\n                )}\n                <button \n                  onClick={(e) => e.stopPropagation()}\n                  className=\"w-full px-4 py-3 text-left text-slate-300 hover:text-white hover:bg-slate-700/50 rounded-b-xl transition-colors flex items-center space-x-2\"\n                >\n                  <Flag className=\"h-4 w-4\" />\n                  <span>Report</span>\n                </button>\n              </div>\n            )}\n          </div>\n        </div>\n\n        <div className=\"mb-4\">\n          <p className=\"text-slate-200 leading-relaxed whitespace-pre-wrap\">\n            {post.content}\n          </p>\n        </div>\n\n        {post.mediaFiles && post.mediaFiles.length > 0 && (\n          <div className=\"mb-4 space-y-4\">\n            <div className=\"text-sm text-slate-300 mb-3 flex items-center space-x-2\">\n              <span className=\"text-xl\">ðŸ“Ž</span>\n              <span className=\"font-medium\">\n                {post.mediaFiles.length} attachment{post.mediaFiles.length !== 1 ? 's' : ''}\n              </span>\n              <span className=\"text-slate-500\">â€¢ Click to download or view</span>\n            </div>\n            \n            {post.mediaFiles.map((file, idx) => {\n              const fileType = detectFileType(file);\n              console.log(`ðŸŽ¨ Rendering file ${idx}:`, { file, fileType });\n              \n              return (\n                <div key={idx} className={`rounded-xl overflow-hidden border-2 ${fileType.borderColor} ${fileType.bgColor} p-1`}>\n                  \n                  {fileType.category === 'image' && (\n                    <div className=\"p-3\">\n                      <img \n                        src={file.url} \n                        alt=\"Post media\" \n                        className=\"w-full h-auto max-h-96 object-cover hover:scale-105 transition-transform duration-300 cursor-pointer rounded-lg\" \n                        onClick={(e) => e.stopPropagation()}\n                        onError={(e) => {\n                          console.error('âŒ Image failed to load:', file.url);\n                          e.target.style.display = 'none';\n                        }}\n                      />\n                    </div>\n                  )}\n                  \n                  {fileType.category === 'video' && (\n                    <div className=\"p-3\">\n                      <EnhancedVideoPlayer file={file} />\n                    </div>\n                  )}\n                  \n                  {fileType.category === 'audio' && (\n                    <div className=\"p-4\">\n                      <div className=\"flex items-center space-x-3 mb-3\">\n                        <div className={`w-12 h-12 ${fileType.bgColor} rounded-lg flex items-center justify-center text-2xl border ${fileType.borderColor}`}>\n                          {fileType.icon}\n                        </div>\n                        <div>\n                          <p className=\"text-white font-medium\">{file.filename || file.originalName || 'Audio File'}</p>\n                          <p className=\"text-slate-400 text-sm\">\n                            {fileType.displayName} â€¢ {(file.size / 1024 / 1024).toFixed(1)} MB\n                          </p>\n                        </div>\n                      </div>\n                      <audio controls className=\"w-full\" onClick={(e) => e.stopPropagation()}>\n                        <source src={file.url} />\n                        Your browser does not support audio playback.\n                      </audio>\n                    </div>\n                  )}\n                  \n                  {fileType.category === 'pdf' && (\n                    <div className={`p-5 ${fileType.bgColor} rounded-xl`} onClick={(e) => e.stopPropagation()}>\n                      <div className=\"flex items-center space-x-4\">\n                        <div className={`w-16 h-16 ${fileType.bgColor} rounded-xl flex items-center justify-center border-2 ${fileType.borderColor} shadow-lg relative`}>\n                          <span className=\"text-3xl\">{fileType.icon}</span>\n                          {fileType.isTracked && (\n                            <div className=\"absolute -top-1 -right-1 w-4 h-4 bg-red-500 rounded-full flex items-center justify-center\">\n                              <span className=\"text-white text-xs\">ðŸ”</span>\n                            </div>\n                          )}\n                        </div>\n                        \n                        <div className=\"flex-1\">\n                          <h3 className=\"text-white font-bold text-lg mb-1\">\n                            {file.filename || file.originalName || 'PDF Document'}\n                          </h3>\n                          <p className={`${fileType.textColor} text-sm font-medium mb-1 flex items-center space-x-2`}>\n                            <span>ðŸ“„ {fileType.displayName}</span>\n                            {fileType.isTracked && (\n                              <span className=\"inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-blue-500/20 text-blue-400 border border-blue-500/30\">\n                                ðŸ” Watermarked & Tracked\n                              </span>\n                            )}\n                          </p>\n                          <p className=\"text-slate-400 text-sm\">\n                            {(file.size / 1024 / 1024).toFixed(1)} MB\n                            {file.mimeType && ` â€¢ ${file.mimeType}`}\n                            {file.trackingId && (\n                              <span className=\"block text-xs mt-1 text-blue-400\">\n                                Tracking ID: {file.trackingId.substring(0, 8)}...\n                              </span>\n                            )}\n                          </p>\n                        </div>\n                        \n                        <div className=\"flex flex-col space-y-2\">\n                          <a \n                            href={file.url} \n                            target=\"_blank\" \n                            rel=\"noopener noreferrer\"\n                            className={`px-4 py-2 ${fileType.bgColor} ${fileType.hoverBgColor} ${fileType.textColor} ${fileType.hoverTextColor} rounded-lg transition-all duration-200 text-sm font-medium border-2 ${fileType.borderColor} ${fileType.hoverBorderColor} flex items-center space-x-2 hover:scale-105 transform`}\n                            onClick={(e) => {\n                              e.stopPropagation();\n                              handlePDFClick(file);\n                              console.log('ðŸ”— Opening PDF:', file.url);\n                            }}\n                          >\n                            <ExternalLink className=\"h-4 w-4\" />\n                            <span>View PDF</span>\n                          </a>\n                          \n                          <button\n                            onClick={(e) => {\n                              e.stopPropagation();\n                              navigator.clipboard.writeText(file.url);\n                              console.log('ðŸ“‹ PDF URL copied:', file.url);\n                            }}\n                            className=\"px-3 py-1 bg-slate-700/50 hover:bg-slate-700 text-slate-300 hover:text-white rounded-md transition-colors text-xs flex items-center space-x-1\"\n                          >\n                            <Copy className=\"h-3 w-3\" />\n                            <span>Copy Link</span>\n                          </button>\n                        </div>\n                      </div>\n                      \n                      <div className=\"mt-3 pt-3 border-t border-red-500/20\">\n                        <p className=\"text-slate-400 text-xs\">\n                          ðŸ“¥ Uploaded {new Date(post.createdAt).toLocaleDateString()} â€¢ Click \"View PDF\" to open in new tab\n                          {fileType.isTracked && (\n                            <span className=\"block mt-1 text-blue-400\">\n                              ðŸ” This PDF is watermarked and tracked for security purposes\n                            </span>\n                          )}\n                        </p>\n                      </div>\n                    </div>\n                  )}\n                  \n                  {fileType.category === 'document' && (\n                    <div className=\"p-4\">\n                      <div className=\"flex items-center space-x-3\">\n                        <div className={`w-12 h-12 ${fileType.bgColor} rounded-lg flex items-center justify-center text-xl border ${fileType.borderColor}`}>\n                          {fileType.icon}\n                        </div>\n                        <div className=\"flex-1\">\n                          <p className=\"text-white font-medium\">{file.filename || file.originalName || 'Document'}</p>\n                          <p className=\"text-slate-400 text-sm\">\n                            {fileType.displayName} â€¢ {(file.size / 1024 / 1024).toFixed(1)} MB\n                          </p>\n                        </div>\n                        <a \n                          href={file.url} \n                          target=\"_blank\" \n                          rel=\"noopener noreferrer\"\n                          className={`px-3 py-2 ${fileType.bgColor} hover:bg-orange-500/30 ${fileType.textColor} hover:text-orange-300 rounded-lg transition-colors text-sm font-medium border ${fileType.borderColor} hover:border-orange-500/50`}\n                          onClick={(e) => e.stopPropagation()}\n                        >\n                          View File\n                        </a>\n                      </div>\n                    </div>\n                  )}\n                </div>\n              );\n            })}\n          </div>\n        )}\n\n        {(likeCount > 0 || commentCount > 0) && (\n          <div className=\"flex items-center justify-between text-slate-400 text-sm mb-3 pb-3 border-b border-slate-600/30\">\n            <div className=\"flex items-center space-x-4\">\n              {likeCount > 0 && (\n                <button \n                  onClick={(e) => {\n                    e.stopPropagation();\n                    handleWhoLikedClick();\n                  }}\n                  className=\"flex items-center space-x-1 hover:text-slate-300 transition-colors cursor-pointer group post-action-button\"\n                  title={isPublicView ? \"Sign up to see who liked this\" : \"See who liked this post\"}\n                >\n                  <div className=\"flex -space-x-1\">\n                    <div className=\"w-5 h-5 bg-gradient-to-r from-red-500 to-pink-500 rounded-full flex items-center justify-center border border-slate-800 group-hover:scale-110 transition-transform\">\n                      <Heart className=\"h-3 w-3 text-white\" fill=\"white\" />\n                    </div>\n                  </div>\n                  <span className=\"hover:underline\">{likeCount} {likeCount === 1 ? 'like' : 'likes'}</span>\n                  {isPublicView && (\n                    <span className=\"text-xs text-slate-500 ml-1\">ðŸ”’</span>\n                  )}\n                </button>\n              )}\n              {commentCount > 0 && (\n                <div className=\"flex items-center space-x-1\">\n                  <Users className=\"h-4 w-4\" />\n                  <span>{commentCount} {commentCount === 1 ? 'comment' : 'comments'}</span>\n                </div>\n              )}\n            </div>\n            <div className=\"flex items-center space-x-1\">\n              <Eye className=\"h-4 w-4\" />\n              <span>{Math.floor(Math.random() * 50) + 20} views</span>\n            </div>\n          </div>\n        )}\n\n        <div className=\"flex items-center justify-between\">\n          <div className=\"flex items-center space-x-1\">\n            <button \n              onClick={(e) => {\n                e.stopPropagation();\n                handleLikeClick();\n              }}\n              className={`flex items-center space-x-2 px-3 py-2 rounded-lg transition-all duration-200 post-action-button ${\n                isLiked \n                  ? 'text-red-400 bg-red-500/10 hover:bg-blue-500/20' \n                  : 'text-slate-400 hover:text-red-400 hover:bg-red-500/10'\n              } ${isLiking ? 'scale-110' : ''}`}\n              title={isPublicView ? \"Sign up to like posts\" : \"Like this post\"}\n            >\n              <Heart \n                className={`h-5 w-5 transition-all duration-200 ${isLiking ? 'scale-125' : ''}`} \n                fill={isLiked ? 'currentColor' : 'none'} \n              />\n              <span className=\"font-medium\">{likeCount || 'Like'}</span>\n            </button>\n\n            <button \n              onClick={(e) => {\n                e.stopPropagation();\n                if (isPublicView) {\n                  onLoginPrompt?.();\n                } else {\n                  setShowComments(!showComments);\n                  setTimeout(() => commentInputRef.current?.focus(), 100);\n                }\n              }}\n              className=\"flex items-center space-x-2 px-3 py-2 rounded-lg text-slate-400 hover:text-indigo-400 hover:bg-indigo-500/10 transition-all duration-200 post-action-button\"\n              title={isPublicView ? \"Sign up to comment\" : \"Comment on this post\"}\n            >\n              <MessageCircle className=\"h-5 w-5\" />\n              <span className=\"font-medium\">{commentCount || 'Comment'}</span>\n            </button>\n\n            <div className=\"relative\">\n              <button \n                onClick={(e) => {\n                  e.stopPropagation();\n                  handleShareClick();\n                }}\n                className=\"flex items-center space-x-2 px-3 py-2 rounded-lg text-slate-400 hover:text-green-400 hover:bg-green-500/10 transition-all duration-200 post-action-button\"\n                title={isPublicView ? \"Sign up to share\" : \"Share this post\"}\n              >\n                <Share2 className=\"h-5 w-5\" />\n                <span className=\"font-medium\">Share</span>\n              </button>\n            </div>\n          </div>\n\n          {!isDetailView && !isPublicView && (\n            <button\n              onClick={(e) => {\n                e.stopPropagation();\n                if (navigate) navigate(`/post/${post._id}`);\n                onPostClick?.(post);\n              }}\n              className=\"text-xs text-slate-500 hover:text-slate-400 transition-colors post-action-button flex items-center space-x-1\"\n            >\n              <Eye className=\"h-3 w-3\" />\n              <span>View Post</span>\n            </button>\n          )}\n\n          {isPublicView && (\n            <button\n              onClick={(e) => {\n                e.stopPropagation();\n                onLoginPrompt();\n              }}\n              className=\"text-xs text-slate-500 hover:text-slate-400 transition-colors post-action-button\"\n            >\n              Join to interact â†’\n            </button>\n          )}\n        </div>\n\n        {showComments && !isPublicView && (\n          <div className=\"mt-4 pt-4 border-t border-slate-600/30 space-y-4\">\n            <div className=\"flex space-x-3\">\n              <div className=\"w-8 h-8 bg-gradient-to-r from-slate-600 to-zinc-600 rounded-full flex items-center justify-center text-white font-semibold text-xs\">\n                {safeString(user?.username?.slice(0, 2).toUpperCase()) || 'YU'}\n              </div>\n              <div className=\"flex-1\">\n                <div className=\"flex space-x-2\">\n                  <input\n                    ref={commentInputRef}\n                    type=\"text\"\n                    value={commentText}\n                    onChange={(e) => setCommentText(e.target.value)}\n                    onKeyPress={(e) => e.key === 'Enter' && handleCommentSubmit()}\n                    onClick={(e) => e.stopPropagation()}\n                    placeholder=\"Write a comment...\"\n                    className=\"flex-1 px-4 py-2 bg-black/40 border border-slate-600/50 rounded-full text-white placeholder-slate-400 focus:outline-none focus:ring-2 focus:ring-slate-400 focus:border-slate-400\"\n                  />\n                  <button\n                    onClick={(e) => {\n                      e.stopPropagation();\n                      handleCommentSubmit();\n                    }}\n                    disabled={!commentText.trim()}\n                    className=\"px-4 py-2 bg-gradient-to-r from-slate-700 to-zinc-700 text-white rounded-full hover:scale-105 transition-all duration-200 disabled:opacity-50 disabled:cursor-not-allowed post-action-button\"\n                  >\n                    <Send className=\"h-4 w-4\" />\n                  </button>\n                </div>\n              </div>\n            </div>\n\n            {post.comments && post.comments.length > 0 && (\n              <div className=\"space-y-3\">\n                {post.comments.map((comment, idx) => (\n                  <div key={idx} className=\"flex space-x-3\">\n                    <div className=\"w-8 h-8 bg-gradient-to-r from-slate-600 to-zinc-600 rounded-full flex items-center justify-center text-white font-semibold text-xs\">\n                      {safeString(user?.username?.slice(0, 2).toUpperCase()) || comment.author?.slice(0, 2).toUpperCase() || 'UN'}\n                    </div>\n                    <div className=\"flex-1\">\n                      <div className=\"bg-slate-800/50 rounded-2xl px-4 py-2\">\n                        <div className=\"flex items-center space-x-2 mb-1\">\n                          <span className=\"font-medium text-white text-sm\">\n                            {safeString(user?.username)}\n                          </span>\n                          <span className=\"text-slate-500 text-xs\">\n                            {getDetailedTimestamp(comment.createdAt || new Date()).relative}\n                          </span>\n                        </div>\n                        <p className=\"text-slate-200 text-sm\">{comment.content}</p>\n                      </div>\n                      <div className=\"flex items-center space-x-4 mt-1 px-4\">\n                        <button \n                          onClick={(e) => e.stopPropagation()}\n                          className=\"text-xs text-slate-500 hover:text-slate-400 transition-colors post-action-button\"\n                        >\n                          Like\n                        </button>\n                        <button \n                          onClick={(e) => e.stopPropagation()}\n                          className=\"text-xs text-slate-500 hover:text-slate-400 transition-colors post-action-button\"\n                        >\n                          Reply\n                        </button>\n                      </div>\n                    </div>\n                  </div>\n                ))}\n              </div>\n            )}\n          </div>\n        )}\n\n        {(showMoreMenu) && (\n          <div \n            className=\"fixed inset-0 z-0\" \n            onClick={(e) => {\n              e.stopPropagation();\n              setShowMoreMenu(false);\n            }}\n          />\n        )}\n      </div>\n\n      <ShareModal \n        post={post}\n        isOpen={showShareModal}\n        onClose={() => setShowShareModal(false)}\n      />\n\n      {showWhoLiked && (\n        <div className=\"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50\" onClick={() => setShowWhoLiked(false)}>\n          <div className=\"bg-gradient-to-r from-slate-900/95 to-zinc-900/95 backdrop-blur-md rounded-2xl border border-slate-600/50 shadow-2xl max-w-md w-full mx-4 max-h-96 overflow-hidden\" onClick={e => e.stopPropagation()}>\n            <div className=\"flex items-center justify-between p-6 border-b border-slate-600/30\">\n              <h3 className=\"text-xl font-semibold text-white\">Liked by</h3>\n              <button \n                onClick={() => setShowWhoLiked(false)}\n                className=\"p-2 text-slate-400 hover:text-white hover:bg-slate-700/50 rounded-lg transition-colors\"\n              >\n                <X className=\"h-5 w-5\" />\n              </button>\n            </div>\n            \n            <div className=\"p-4 overflow-y-auto max-h-80\">\n              {usersWhoLiked.length === 0 ? (\n                <div className=\"text-center text-slate-400 py-8\">\n                  <Heart className=\"h-12 w-12 mx-auto mb-3 opacity-50\" />\n                  <p>No likes yet</p>\n                </div>\n              ) : (\n                <div className=\"space-y-3\">\n                  {usersWhoLiked.map((likeUser, index) => (\n                    <div key={index} className=\"flex items-center space-x-3 p-3 rounded-xl hover:bg-slate-800/30 transition-colors cursor-pointer\">\n                      <div className=\"w-10 h-10 bg-gradient-to-r from-slate-600 to-zinc-600 rounded-full flex items-center justify-center text-white font-semibold text-sm shadow-lg\">\n                        {likeUser.username?.slice(0, 2).toUpperCase() || likeUser.avatar || 'ðŸ‘¤'}\n                      </div>\n                      \n                      <div className=\"flex-1\">\n                        <div className=\"flex items-center space-x-2\">\n                          <span className=\"font-medium text-white\">{likeUser.username}</span>\n                          {likeUser.verified && (\n                            <div className=\"w-4 h-4 bg-gradient-to-r from-blue-500 to-indigo-600 rounded-full flex items-center justify-center\">\n                              <span className=\"text-white text-xs\">âœ“</span>\n                            </div>\n                          )}\n                        </div>\n                      </div>\n                      \n                      <div className=\"text-red-400\">\n                        <Heart className=\"h-5 w-5\" fill=\"currentColor\" />\n                      </div>\n                    </div>\n                  ))}\n                </div>\n              )}\n            </div>\n          </div>\n        </div>\n      )}\n    </>\n  );\n});\n\n// âœ… MAIN APP COMPONENT - Enhanced with Better State Management  \nexport default function App() {\n  const { currentPath, navigate } = useSimpleRouter();\n  const [user, setUser] = useState(null);\n  const [posts, setPosts] = useState([]);\n  const [publicPosts, setPublicPosts] = useState([]);\n  const [currentView, setCurrentView] = useState('landing');\n  const [isLoggedIn, setIsLoggedIn] = useState(false);\n  const [newPost, setNewPost] = useState('');\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState('');\n  const [selectedPost, setSelectedPost] = useState(null);\n  const [apiStatus, setApiStatus] = useState('checking');\n  \n  // Login/Register forms\n  const [loginForm, setLoginForm] = useState({ email: '', password: '' });\n  const [registerForm, setRegisterForm] = useState({ username: '', email: '', password: '' });\n  const [showRegister, setShowRegister] = useState(false);\n  \n  const fileInputRef = useRef(null);\n\n  // Check authentication on mount\n  useEffect(() => {\n    const token = localStorage.getItem('authToken');\n    const userData = localStorage.getItem('userData');\n    \n    if (token && userData) {\n      try {\n        const parsedUser = JSON.parse(userData);\n        setUser(parsedUser);\n        setIsLoggedIn(true);\n        setCurrentView('feed');\n        checkApiStatus();\n        fetchPosts();\n      } catch (error) {\n        console.error('Error parsing user data:', error);\n        localStorage.removeItem('authToken');\n        localStorage.removeItem('userData');\n      }\n    } else {\n      setCurrentView('landing');\n    }\n  }, []);\n\n  const checkApiStatus = async () => {\n    try {\n      const data = await apiRequest('/health');\n      setApiStatus(data.status === 'OK' ? 'online' : 'offline');\n    } catch (error) {\n      console.error('API health check failed:', error);\n      setApiStatus('offline');\n    }\n  };\n\n  // âœ… ENHANCED: Authenticated posts fetch\n  const fetchPosts = async () => {\n    try {\n      const data = await apiRequest('/posts');\n      setPosts(Array.isArray(data) ? data : []);\n    } catch (error) {\n      console.error('Error fetching posts:', error);\n      setPosts([]);\n    }\n  };\n\n  // âœ… ENHANCED: Public posts fetch function\n  const fetchPublicPosts = async () => {\n    try {\n      console.log('ðŸ”„ Fetching public posts from:', `${API_BASE}/posts/public`);\n      const data = await apiRequest('/posts/public');\n      console.log('âœ… Public posts fetched successfully:', data.length, 'posts');\n      setPublicPosts(Array.isArray(data) ? data : []);\n    } catch (error) {\n      console.error('âŒ Error fetching public posts:', error);\n      setPublicPosts([]);\n    }\n  };\n\n  const handleLogin = async () => {\n    if (!loginForm.email || !loginForm.password) {\n      setError('Please fill in all fields');\n      return;\n    }\n\n    setLoading(true);\n    setError('');\n\n    try {\n      const data = await apiRequest('/auth/login', {\n        method: 'POST',\n        body: JSON.stringify(loginForm)\n      });\n\n      localStorage.setItem('authToken', data.token);\n      localStorage.setItem('userData', JSON.stringify(data.user));\n      setUser(data.user);\n      setIsLoggedIn(true);\n      setCurrentView('feed');\n      setLoginForm({ email: '', password: '' });\n      await fetchPosts();\n    } catch (error) {\n      console.error('Login error:', error);\n      setError(error.message || 'Login failed');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const handleRegister = async () => {\n    if (!registerForm.username || !registerForm.email || !registerForm.password) {\n      setError('Please fill in all fields');\n      return;\n    }\n\n    setLoading(true);\n    setError('');\n\n    try {\n      const data = await apiRequest('/auth/register', {\n        method: 'POST',\n        body: JSON.stringify(registerForm)\n      });\n\n      localStorage.setItem('authToken', data.token);\n      localStorage.setItem('userData', JSON.stringify(data.user));\n      setUser(data.user);\n      setIsLoggedIn(true);\n      setCurrentView('feed');\n      setRegisterForm({ username: '', email: '', password: '' });\n      await fetchPosts();\n    } catch (error) {\n      console.error('Registration error:', error);\n      setError(error.message || 'Registration failed');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const handleLogout = () => {\n    localStorage.removeItem('authToken');\n    localStorage.removeItem('userData');\n    setUser(null);\n    setIsLoggedIn(false);\n    setCurrentView('landing');\n    setPosts([]);\n    setPublicPosts([]);\n    navigate('/');\n  };\n\n  const handlePost = async (uploadedFiles = []) => {\n    if (!newPost.trim() && uploadedFiles.length === 0) return;\n\n    setLoading(true);\n    try {\n      await apiRequest('/posts', {\n        method: 'POST',\n        body: JSON.stringify({\n          content: newPost,\n          mediaFiles: uploadedFiles\n        })\n      });\n\n      setNewPost('');\n      await fetchPosts();\n    } catch (error) {\n      console.error('Error creating post:', error);\n      setError('Failed to create post. Please try again.');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const handleLike = async (postId) => {\n    try {\n      await apiRequest(`/posts/${postId}/like`, {\n        method: 'POST'\n      });\n      await fetchPosts();\n    } catch (error) {\n      console.error('Error liking post:', error);\n    }\n  };\n\n  const handleComment = async (postId, content) => {\n    try {\n      await apiRequest(`/posts/${postId}/comment`, {\n        method: 'POST',\n        body: JSON.stringify({ content })\n      });\n      await fetchPosts();\n    } catch (error) {\n      console.error('Error commenting:', error);\n    }\n  };\n\n  const handleBrowsePublic = () => {\n    console.log('ðŸ”„ handleBrowsePublic called - switching to public view');\n    setCurrentView('public');\n    fetchPublicPosts();\n  };\n\n  const handleLoginPrompt = () => {\n    setCurrentView('landing');\n  };\n\n  const handlePostClick = (post) => {\n    setSelectedPost(post);\n    setCurrentView('post');\n  };\n\n  const handleBackToFeed = () => {\n    setSelectedPost(null);\n    setCurrentView('feed');\n    navigate('/');\n  };\n\n  // Router handling\n  useEffect(() => {\n    if (currentPath.startsWith('/post/') && isLoggedIn) {\n      const postId = currentPath.split('/')[2];\n      const post = posts.find(p => p._id === postId);\n      if (post) {\n        setSelectedPost(post);\n        setCurrentView('post');\n      }\n    }\n  }, [currentPath, posts, isLoggedIn]);\n\n  const handleFileUpload = async (files) => {\n    console.log('File upload triggered:', files?.length);\n  };\n\n  // âœ… RENDER: Main app with enhanced error boundaries and loading states\n  return (\n    <div className=\"min-h-screen bg-gradient-to-br from-gray-900 via-slate-900 to-zinc-900\">\n      {currentView === 'landing' && (\n        <LandingPage\n          loginForm={loginForm}\n          setLoginForm={setLoginForm}\n          registerForm={registerForm}\n          setRegisterForm={setRegisterForm}\n          showRegister={showRegister}\n          setShowRegister={setShowRegister}\n          handleLogin={handleLogin}\n          handleRegister={handleRegister}\n          loading={loading}\n          error={error}\n          onBrowsePublic={handleBrowsePublic}\n        />\n      )}\n\n      {(currentView === 'feed' || currentView === 'profile' || currentView === 'chat' || currentView === 'post' || currentView === 'public') && (\n        <>\n          <Header\n            currentView={currentView}\n            setCurrentView={setCurrentView}\n            apiStatus={apiStatus}\n            handleLogout={handleLogout}\n            user={user}\n            selectedPost={selectedPost}\n            onBackToFeed={handleBackToFeed}\n            navigate={navigate}\n          />\n\n          <main className=\"container mx-auto px-4 py-6 max-w-2xl\">\n            {currentView === 'post' && selectedPost ? (\n              <Post\n                post={selectedPost}\n                user={user}\n                handleLike={handleLike}\n                handleComment={handleComment}\n                handleShare={() => {}}\n                onPostClick={handlePostClick}\n                isDetailView={true}\n                navigate={navigate}\n              />\n            ) : currentView === 'public' ? (\n              <div>\n                <div className=\"text-center mb-6\">\n                  <h2 className=\"text-2xl font-bold text-white mb-2\">Public Feed</h2>\n                  <p className=\"text-slate-400\">Browse posts from the SickoScoop community</p>\n                  <button\n                    onClick={() => setCurrentView('landing')}\n                    className=\"mt-3 text-sm text-slate-500 hover:text-slate-400 underline\"\n                  >\n                    â† Back to login\n                  </button>\n                </div>\n                \n                {publicPosts.length === 0 ? (\n                  <div className=\"text-center py-12\">\n                    <div className=\"animate-spin rounded-full h-8 w-8 border-b-2 border-white mx-auto mb-4\"></div>\n                    <p className=\"text-slate-400 mb-4\">Loading public posts...</p>\n                    <button\n                      onClick={fetchPublicPosts}\n                      className=\"text-sm text-blue-400 hover:text-blue-300 underline\"\n                    >\n                      Retry loading posts\n                    </button>\n                  </div>\n                ) : (\n                  publicPosts.map(post => (\n                    <Post\n                      key={post._id}\n                      post={post}\n                      user={null}\n                      handleLike={() => {}}\n                      handleComment={() => {}}\n                      handleShare={() => {}}\n                      isPublicView={true}\n                      onLoginPrompt={handleLoginPrompt}\n                      onPostClick={handlePostClick}\n                      navigate={navigate}\n                    />\n                  ))\n                )}\n              </div>\n            ) : currentView === 'profile' ? (\n              <div className=\"text-center py-12\">\n                <h2 className=\"text-2xl font-bold text-white mb-4\">Profile</h2>\n                <p className=\"text-slate-400\">Profile features coming soon!</p>\n              </div>\n            ) : currentView === 'chat' ? (\n              <div className=\"text-center py-12\">\n                <h2 className=\"text-2xl font-bold text-white mb-4\">Chat</h2>\n                <p className=\"text-slate-400\">Chat features coming soon!</p>\n              </div>\n            ) : (\n              <>\n                {isLoggedIn && (\n                  <PostCreator\n                    user={user}\n                    newPost={newPost}\n                    setNewPost={setNewPost}\n                    handlePost={handlePost}\n                    loading={loading}\n                    fileInputRef={fileInputRef}\n                    handleFileUpload={handleFileUpload}\n                  />\n                )}\n\n                {posts.length === 0 ? (\n                  <div className=\"text-center py-12\">\n                    <p className=\"text-slate-400 mb-4\">No posts yet</p>\n                    {isLoggedIn && (\n                      <p className=\"text-slate-500 text-sm\">Be the first to share something!</p>\n                    )}\n                  </div>\n                ) : (\n                  posts.map(post => (\n                    <Post\n                      key={post._id}\n                      post={post}\n                      user={user}\n                      handleLike={handleLike}\n                      handleComment={handleComment}\n                      handleShare={() => {}}\n                      onPostClick={handlePostClick}\n                      navigate={navigate}\n                    />\n                  ))\n                )}\n              </>\n            )}\n          </main>\n        </>\n      )}\n    </div>\n  );\n}"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}